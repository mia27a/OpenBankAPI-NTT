2022-09-26 11:43:55.475 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-09-26 11:43:55.560 +01:00 [DBG] Hosting starting
2022-09-26 11:43:55.655 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9CC642E9838495A6C3C202DECA6A8AD300396DD2)
2022-09-26 11:43:55.694 +01:00 [INF] Now listening on: https://localhost:7036
2022-09-26 11:43:55.696 +01:00 [INF] Now listening on: http://localhost:5036
2022-09-26 11:43:55.697 +01:00 [DBG] Loaded hosting startup assembly APIBank
2022-09-26 11:43:55.699 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-09-26 11:43:55.699 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-09-26 11:43:55.700 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-26 11:43:55.701 +01:00 [INF] Hosting environment: Development
2022-09-26 11:43:55.701 +01:00 [INF] Content root path: C:\Users\mguedesa\OneDrive - NTT DATA EMEAL\Documentos\GitHub\OpenBankAPI-NTT\APIBank\APIBank\
2022-09-26 11:43:55.702 +01:00 [DBG] Hosting started
2022-09-26 11:43:56.056 +01:00 [DBG] Connection id "0HMKVLG1GKQ5T" accepted.
2022-09-26 11:43:56.057 +01:00 [DBG] Connection id "0HMKVLG1GKQ5U" accepted.
2022-09-26 11:43:56.060 +01:00 [DBG] Connection id "0HMKVLG1GKQ5T" started.
2022-09-26 11:43:56.060 +01:00 [DBG] Connection id "0HMKVLG1GKQ5U" started.
2022-09-26 11:43:56.061 +01:00 [DBG] Connection id "0HMKVLG1GKQ5T" received FIN.
2022-09-26 11:43:56.061 +01:00 [DBG] Connection id "0HMKVLG1GKQ5U" received FIN.
2022-09-26 11:43:56.081 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-26 11:43:56.081 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-26 11:43:56.117 +01:00 [DBG] Connection id "0HMKVLG1GKQ5T" stopped.
2022-09-26 11:43:56.117 +01:00 [DBG] Connection id "0HMKVLG1GKQ5U" stopped.
2022-09-26 11:43:56.119 +01:00 [DBG] Connection id "0HMKVLG1GKQ5T" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-26 11:43:56.119 +01:00 [DBG] Connection id "0HMKVLG1GKQ5U" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-26 11:43:56.714 +01:00 [DBG] Connection id "0HMKVLG1GKQ5V" accepted.
2022-09-26 11:43:56.716 +01:00 [DBG] Connection id "0HMKVLG1GKQ5V" started.
2022-09-26 11:43:56.778 +01:00 [DBG] Connection 0HMKVLG1GKQ5V established using the following protocol: "Tls12"
2022-09-26 11:43:56.855 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/index.html - -
2022-09-26 11:43:56.881 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-09-26 11:43:56.907 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-09-26 11:43:56.909 +01:00 [DBG] Request did not match any endpoints
2022-09-26 11:43:56.997 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-09-26 11:43:57.123 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-09-26 11:43:57.128 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/index.html - - - 200 - text/html;charset=utf-8 277.0192ms
2022-09-26 11:43:57.145 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - -
2022-09-26 11:43:57.149 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_vs/browserLink - -
2022-09-26 11:43:57.150 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 5.4284ms
2022-09-26 11:43:57.200 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 50.5989ms
2022-09-26 11:43:57.257 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - -
2022-09-26 11:43:57.259 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-09-26 11:43:57.261 +01:00 [DBG] Request did not match any endpoints
2022-09-26 11:43:57.367 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 109.8913ms
2022-09-26 11:45:19.361 +01:00 [DBG] Connection id "0HMKVLG1GKQ60" accepted.
2022-09-26 11:45:19.362 +01:00 [DBG] Connection id "0HMKVLG1GKQ60" received FIN.
2022-09-26 11:45:19.365 +01:00 [DBG] Connection id "0HMKVLG1GKQ61" accepted.
2022-09-26 11:45:19.366 +01:00 [DBG] Connection id "0HMKVLG1GKQ60" started.
2022-09-26 11:45:19.368 +01:00 [DBG] Connection id "0HMKVLG1GKQ61" started.
2022-09-26 11:45:19.369 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-26 11:45:19.371 +01:00 [DBG] Connection id "0HMKVLG1GKQ60" stopped.
2022-09-26 11:45:19.373 +01:00 [DBG] Connection id "0HMKVLG1GKQ60" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-26 11:45:19.375 +01:00 [DBG] Connection 0HMKVLG1GKQ61 established using the following protocol: "Tls12"
2022-09-26 11:45:19.382 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Login application/json 65
2022-09-26 11:45:19.389 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-26 11:45:19.394 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-26 11:45:19.395 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 11:45:19.399 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:45:19.687 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 11:45:19.710 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:45:19.715 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:45:19.717 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:45:19.719 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:45:19.720 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:45:19.721 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:45:19.723 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:45:19.724 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:45:19.734 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-26 11:45:19.737 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-26 11:45:19.739 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 11:45:19.742 +01:00 [DBG] Connection id "0HMKVLG1GKQ61", Request id "0HMKVLG1GKQ61:00000002": started reading request body.
2022-09-26 11:45:19.743 +01:00 [DBG] Connection id "0HMKVLG1GKQ61", Request id "0HMKVLG1GKQ61:00000002": done reading request body.
2022-09-26 11:45:19.749 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-26 11:45:19.752 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 11:45:19.753 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 11:45:19.754 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-26 11:45:19.761 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 11:45:19.844 +01:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'.
2022-09-26 11:45:20.817 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:45:20.874 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(x => x.Username == __model_Username_0)'
2022-09-26 11:45:21.101 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.username == @__model_Username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:45:21.133 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:21.169 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (34ms).
2022-09-26 11:45:21.175 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:21.376 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:21.388 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-26 11:45:21.483 +01:00 [INF] Executed DbCommand (99ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-26 11:45:21.533 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:21.574 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:21.579 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:21.585 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:21.785 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(user => user.RefreshTokenCollection
        .Any(reftoken => reftoken.RefToken == __token_0))'
2022-09-26 11:45:21.841 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM users AS u
            WHERE EXISTS (
                SELECT 1
                FROM refresh_token AS r
                WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__token_0)))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .Single()'
2022-09-26 11:45:21.857 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:21.859 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:45:21.860 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:21.863 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:21.864 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:45:21.870 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:45:21.873 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:21.875 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:21.876 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:21.879 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:45:21.881 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:45:21.898 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:21.930 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:21.968 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:21.973 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:45:21.982 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:21.985 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:21.986 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:45:21.993 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:45:22.046 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:22.049 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-09-26 11:45:22.050 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
2022-09-26 11:45:22.064 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
2022-09-26 11:45:22.076 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:45:22.090 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:22.093 +01:00 [DBG] Committing transaction.
2022-09-26 11:45:22.097 +01:00 [DBG] Committed transaction.
2022-09-26 11:45:22.099 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:22.099 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:22.101 +01:00 [DBG] Disposing transaction.
2022-09-26 11:45:22.109 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.110 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:45:22.226 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.UserId == __id_0)
    .AsNoTracking()
    .Select(rt => new RefreshToken{ 
        Id = rt.Id, 
        UserId = rt.UserId, 
        RefToken = rt.RefToken, 
        Expires = rt.Expires, 
        Created = rt.Created, 
        CreatedByIp = rt.CreatedByIp, 
        Revoked = rt.Revoked, 
        RevokedByIp = rt.RevokedByIp, 
        ReplacedByToken = rt.ReplacedByToken, 
        ReasonRevoked = rt.ReasonRevoked, 
        IsExpired = rt.IsExpired, 
        IsRevoked = rt.IsRevoked, 
        IsActive = rt.IsActive 
    }
    )'
2022-09-26 11:45:22.249 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Id -> 0
            UserId -> 1
            RefToken -> 2
            Expires -> 3
            Created -> 4
            CreatedByIp -> 5
            Revoked -> 6
            RevokedByIp -> 7
            ReplacedByToken -> 8
            ReasonRevoked -> 9
            IsExpired -> 10
            IsRevoked -> 11
            IsActive -> 12
        SELECT r.id AS Id, r.user_id AS UserId, r.token AS RefToken, r.expires AS Expires, r.created AS Created, r.created_by_ip AS CreatedByIp, r.revoked AS Revoked, r.revoked_by_ip AS RevokedByIp, r.replaced_by_token AS ReplacedByToken, r.reason_revoked AS ReasonRevoked, r.is_expired AS IsExpired, r.is_revoked AS IsRevoked, r.is_active AS IsActive
        FROM refresh_token AS r
        WHERE r.user_id == @__id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-26 11:45:22.252 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:22.254 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:45:22.255 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:22.256 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:22.258 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:45:22.263 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:45:22.267 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:22.268 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:22.270 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:22.272 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.273 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.276 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:45:22.277 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:45:22.283 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:45:22.284 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:22.285 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:22.286 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:45:22.286 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:45:22.292 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:22.293 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:45:22.294 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM refresh_token
WHERE id = @p0;
2022-09-26 11:45:22.297 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM refresh_token
WHERE id = @p0;
2022-09-26 11:45:22.298 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:22.299 +01:00 [DBG] Committing transaction.
2022-09-26 11:45:22.300 +01:00 [DBG] Committed transaction.
2022-09-26 11:45:22.300 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:22.301 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:22.302 +01:00 [DBG] Disposing transaction.
2022-09-26 11:45:22.308 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.309 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:45:22.310 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.313 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.315 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:45:22.315 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:45:22.316 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:45:22.317 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:22.317 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:22.318 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:45:22.319 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:45:22.319 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:22.320 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:45:22.321 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM refresh_token
WHERE id = @p0;
2022-09-26 11:45:22.323 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM refresh_token
WHERE id = @p0;
2022-09-26 11:45:22.324 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:22.324 +01:00 [DBG] Committing transaction.
2022-09-26 11:45:22.325 +01:00 [DBG] Committed transaction.
2022-09-26 11:45:22.326 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:22.327 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:22.328 +01:00 [DBG] Disposing transaction.
2022-09-26 11:45:22.329 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.330 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:45:22.331 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.332 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.333 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:45:22.334 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:45:22.334 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:45:22.335 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:22.336 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:22.336 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:45:22.337 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:45:22.338 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:22.338 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:45:22.339 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM refresh_token
WHERE id = @p0;
2022-09-26 11:45:22.341 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM refresh_token
WHERE id = @p0;
2022-09-26 11:45:22.343 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:22.343 +01:00 [DBG] Committing transaction.
2022-09-26 11:45:22.346 +01:00 [DBG] Committed transaction.
2022-09-26 11:45:22.346 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:22.347 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:22.348 +01:00 [DBG] Disposing transaction.
2022-09-26 11:45:22.349 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.350 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:45:22.351 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.352 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.353 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:45:22.354 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:45:22.355 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:45:22.355 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:22.356 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:22.357 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:45:22.359 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:45:22.359 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:22.360 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:45:22.362 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM refresh_token
WHERE id = @p0;
2022-09-26 11:45:22.364 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM refresh_token
WHERE id = @p0;
2022-09-26 11:45:22.366 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:22.366 +01:00 [DBG] Committing transaction.
2022-09-26 11:45:22.367 +01:00 [DBG] Committed transaction.
2022-09-26 11:45:22.368 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:22.369 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:22.369 +01:00 [DBG] Disposing transaction.
2022-09-26 11:45:22.370 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.371 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:45:22.372 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.374 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.376 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:45:22.377 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:45:22.377 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:45:22.379 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:22.380 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:22.380 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:45:22.381 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:45:22.391 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:45:22.393 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:22.394 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:45:22.396 +01:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-26 11:45:22.399 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-26 11:45:22.402 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:22.402 +01:00 [DBG] Committing transaction.
2022-09-26 11:45:22.403 +01:00 [DBG] Committed transaction.
2022-09-26 11:45:22.404 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:22.405 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:22.406 +01:00 [DBG] Disposing transaction.
2022-09-26 11:45:22.406 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.408 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:22.409 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:45:22.414 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:45:22.418 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:45:22.418 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:45:22.419 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:45:22.420 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:45:22.421 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-26 11:45:22.433 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 2707.0532ms
2022-09-26 11:45:22.434 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 11:45:22.435 +01:00 [DBG] Connection id "0HMKVLG1GKQ61" completed keep alive response.
2022-09-26 11:45:22.436 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:45:22.439 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Login application/json 65 - 200 - application/json;+charset=utf-8 3056.7498ms
2022-09-26 11:45:42.377 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-26 11:45:42.381 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-26 11:45:42.383 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-26 11:45:42.385 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:45:42.385 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:45:42.471 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:45:42.484 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-26 11:45:42.489 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(1) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:45:42.492 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:42.493 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:45:42.496 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:42.497 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:42.498 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:45:42.501 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:45:42.503 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:42.504 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:42.505 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:42.506 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:42.507 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:45:42.508 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 11:45:42.510 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:45:42.512 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:45:42.513 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:45:42.514 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:45:42.515 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:45:42.516 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:45:42.517 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:45:42.520 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-26 11:45:42.525 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.Created (DateTime) Required, 1], [Property: RefreshToken.CreatedByIp (string) Required MaxLength(200), 2], [Property: RefreshToken.Expires (DateTime) Required, 3], [Property: RefreshToken.IsActive (no field, bool) Required, 4], [Property: RefreshToken.IsExpired (no field, bool) Required, 5], [Property: RefreshToken.IsRevoked (no field, bool) Required, 6], [Property: RefreshToken.ReasonRevoked (string) MaxLength(200), 7], [Property: RefreshToken.RefToken (string) Required MaxLength(254), 8], [Property: RefreshToken.ReplacedByToken (string) MaxLength(200), 9], [Property: RefreshToken.Revoked (DateTime?), 10], [Property: RefreshToken.RevokedByIp (string) MaxLength(200), 11], [Property: RefreshToken.UserId (int) Required FK Index, 12] }
        SELECT TOP(1) r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
        FROM refresh_token AS r
        WHERE r.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:45:42.527 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:42.528 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:45:42.529 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:42.530 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:42.531 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:45:42.533 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:45:42.534 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:42.536 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:42.537 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:42.537 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:42.540 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(u => u.UserId == __userId_0)
    .Select(u => new AccountRequestResponse{ 
        Balance = u.Balance, 
        CreatedAt = u.CreatedAt, 
        Currency = u.Currency, 
        Id = u.Id 
    }
    )'
2022-09-26 11:45:42.544 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AccountRequestResponse>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Balance -> 0
            CreatedAt -> 1
            Currency -> 2
            Id -> 3
        SELECT a.balance AS Balance, a.created_at AS CreatedAt, a.currency AS Currency, a.id AS Id
        FROM accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountRequestResponse>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-26 11:45:42.546 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:42.547 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:45:42.548 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:42.549 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:42.550 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 11:45:42.554 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 11:45:42.564 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:42.564 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:42.565 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:42.566 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:45:42.568 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:45:42.568 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:45:42.569 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:45:42.570 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:45:42.571 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-26 11:45:42.576 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 59.7858ms
2022-09-26 11:45:42.577 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:45:42.578 +01:00 [DBG] Connection id "0HMKVLG1GKQ61" completed keep alive response.
2022-09-26 11:45:42.579 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:45:42.581 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 203.3145ms
2022-09-26 11:45:58.947 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Accounts/Create application/json 44
2022-09-26 11:45:58.952 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/Create'
2022-09-26 11:45:58.954 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)' with route pattern 'api/Accounts/Create' is valid for the request path '/api/Accounts/Create'
2022-09-26 11:45:58.956 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 11:45:58.957 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:45:59.001 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:45:59.006 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:59.009 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:45:59.010 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:59.011 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:59.012 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:45:59.017 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:45:59.018 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:59.019 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:59.020 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:59.021 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:59.022 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 11:45:59.023 +01:00 [INF] Route matched with {action = "Create", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.AccountCreateRequest) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 11:45:59.025 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:45:59.026 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:45:59.027 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:45:59.030 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:45:59.031 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:45:59.033 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:45:59.034 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:45:59.035 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-26 11:45:59.036 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' using the name '' in request data ...
2022-09-26 11:45:59.037 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 11:45:59.038 +01:00 [DBG] Connection id "0HMKVLG1GKQ61", Request id "0HMKVLG1GKQ61:00000004": started reading request body.
2022-09-26 11:45:59.039 +01:00 [DBG] Connection id "0HMKVLG1GKQ61", Request id "0HMKVLG1GKQ61:00000004": done reading request body.
2022-09-26 11:45:59.042 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.AccountCreateRequest'
2022-09-26 11:45:59.042 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 11:45:59.043 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 11:45:59.044 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-26 11:45:59.048 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 11:45:59.050 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:59.051 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:45:59.052 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:59.053 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:59.054 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:45:59.055 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:45:59.058 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:59.059 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:59.059 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:59.061 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:59.068 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:45:59.070 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:59.071 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:45:59.072 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:45:59.073 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:59.090 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:59.091 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:45:59.092 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:45:59.097 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:45:59.099 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 11:45:59.103 +01:00 [DBG] Created transaction savepoint.
2022-09-26 11:45:59.104 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:59.105 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:45:59.107 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (balance, currency, user_id)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 11:45:59.115 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (balance, currency, user_id)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 11:45:59.118 +01:00 [DBG] The foreign key property 'Account.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:45:59.120 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:59.121 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 11:45:59.122 +01:00 [DBG] Released transaction savepoint.
2022-09-26 11:45:59.125 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:59.126 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:45:59.127 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:59.137 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:59.138 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:45:59.139 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:45:59.141 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:45:59.142 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 11:45:59.143 +01:00 [DBG] Created transaction savepoint.
2022-09-26 11:45:59.143 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:45:59.144 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:45:59.145 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 11:45:59.150 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 11:45:59.153 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:45:59.154 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:45:59.155 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 11:45:59.155 +01:00 [DBG] Released transaction savepoint.
2022-09-26 11:45:59.156 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:45:59.158 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:45:59.158 +01:00 [DBG] Committing transaction.
2022-09-26 11:45:59.159 +01:00 [DBG] Committed transaction.
2022-09-26 11:45:59.160 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:45:59.161 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:45:59.162 +01:00 [DBG] Disposing transaction.
2022-09-26 11:45:59.163 +01:00 [INF] Account Created
2022-09-26 11:45:59.165 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:45:59.167 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:45:59.167 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:45:59.168 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:45:59.169 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:45:59.170 +01:00 [INF] Executing CreatedResult, writing value of type 'APIBank.Models.Responses.AccountRequestResponse'.
2022-09-26 11:45:59.171 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.Create (APIBank) in 137.821ms
2022-09-26 11:45:59.172 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 11:45:59.172 +01:00 [DBG] Connection id "0HMKVLG1GKQ61" completed keep alive response.
2022-09-26 11:45:59.173 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:45:59.174 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Accounts/Create application/json 44 - 201 - application/json;+charset=utf-8 226.8591ms
2022-09-26 11:46:09.123 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-26 11:46:09.127 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-26 11:46:09.128 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-26 11:46:09.130 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:46:09.131 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:46:09.133 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:46:09.135 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:09.135 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:46:09.136 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:09.138 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:09.139 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:46:09.141 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:46:09.143 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:46:09.144 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:09.145 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:09.145 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:09.147 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:46:09.148 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 11:46:09.150 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:46:09.151 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:46:09.152 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:46:09.153 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:46:09.155 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:46:09.157 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:46:09.158 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:46:09.160 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:09.160 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:46:09.161 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:09.162 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:09.163 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:46:09.165 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:46:09.167 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:46:09.168 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:09.168 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:09.169 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:09.173 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:09.174 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:46:09.175 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:09.176 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:09.177 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 11:46:09.179 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 11:46:09.181 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:09.182 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:09.182 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:09.183 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:46:09.184 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:46:09.185 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:46:09.185 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:46:09.186 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:46:09.188 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-26 11:46:09.189 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 32.8781ms
2022-09-26 11:46:09.190 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:46:09.191 +01:00 [DBG] Connection id "0HMKVLG1GKQ61" completed keep alive response.
2022-09-26 11:46:09.192 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:46:09.193 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 70.0479ms
2022-09-26 11:46:09.590 +01:00 [DBG] Connection id "0HMKVLG1GKQ5V" is closing.
2022-09-26 11:46:09.592 +01:00 [DBG] Connection id "0HMKVLG1GKQ5V" is closed. The last processed stream ID was 7.
2022-09-26 11:46:09.597 +01:00 [DBG] Connection id "0HMKVLG1GKQ5V" received FIN.
2022-09-26 11:46:09.598 +01:00 [DBG] Connection id "0HMKVLG1GKQ5V" sending FIN because: "The client closed the connection."
2022-09-26 11:46:09.606 +01:00 [DBG] Connection id "0HMKVLG1GKQ5V" stopped.
2022-09-26 11:46:23.001 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000000 - -
2022-09-26 11:46:23.003 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetById/100000000'
2022-09-26 11:46:23.004 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)' with route pattern 'api/Accounts/GetById/{accountId}' is valid for the request path '/api/Accounts/GetById/100000000'
2022-09-26 11:46:23.007 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 11:46:23.007 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:46:23.014 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 11:46:23.016 +01:00 [INF] Route matched with {action = "GetById", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(Int32) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 11:46:23.019 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:46:23.020 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:46:23.021 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:46:23.022 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:46:23.023 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:46:23.027 +01:00 [INF] Authorization failed for the request at filter 'APIBank.Authorization.AuthorizeAttribute'.
2022-09-26 11:46:23.030 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:46:23.032 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetById (APIBank) in 6.8854ms
2022-09-26 11:46:23.033 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 11:46:23.034 +01:00 [DBG] Connection id "0HMKVLG1GKQ61" completed keep alive response.
2022-09-26 11:46:23.035 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000000 - - - 401 - application/json;+charset=utf-8 33.8340ms
2022-09-26 11:46:30.629 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0
2022-09-26 11:46:30.632 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/refreshToken'
2022-09-26 11:46:30.633 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)' with route pattern 'api/Users/refreshToken' is valid for the request path '/api/Users/refreshToken'
2022-09-26 11:46:30.636 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:46:30.638 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:46:30.640 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:46:30.643 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RefreshToken() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:46:30.646 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:46:30.647 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:46:30.648 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:46:30.650 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:46:30.651 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:46:30.655 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:46:30.656 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:46:30.660 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:46:30.662 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(userQuery => userQuery.RefreshTokenCollection
        .Any(refTokenQuery => refTokenQuery.RefToken == __refToken_0))'
2022-09-26 11:46:30.667 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE EXISTS (
            SELECT 1
            FROM refresh_token AS r
            WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__refToken_0))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:46:30.670 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:30.672 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:46:30.673 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:30.674 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:30.675 +01:00 [DBG] Executing DbCommand [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:46:30.678 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:46:30.680 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:46:30.681 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:30.682 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:30.683 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:30.684 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:30.685 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:46:30.688 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:30.690 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:30.691 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:46:30.693 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:46:30.695 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:30.695 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:30.697 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:30.698 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:30.699 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:46:30.700 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:30.702 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:30.704 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:46:30.706 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:46:30.707 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:30.707 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:30.708 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:30.709 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:30.710 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:46:30.710 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:30.711 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:30.712 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:46:30.713 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:46:30.714 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:30.715 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:30.716 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:30.717 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:46:30.721 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:46:30.721 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:46:30.722 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:46:30.723 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:46:30.724 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:46:30.725 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:46:30.725 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:30.726 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:30.727 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:46:30.727 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:46:30.728 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:46:30.729 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:30.729 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:46:30.730 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 11:46:30.732 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 11:46:30.735 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:46:30.738 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:30.739 +01:00 [DBG] Committing transaction.
2022-09-26 11:46:30.740 +01:00 [DBG] Committed transaction.
2022-09-26 11:46:30.741 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:30.741 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:30.742 +01:00 [DBG] Disposing transaction.
2022-09-26 11:46:30.742 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:46:30.743 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:46:30.744 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:46:30.746 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:46:30.747 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:46:30.747 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:46:30.748 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:46:30.749 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:46:30.750 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-26 11:46:30.751 +01:00 [INF] Executed action APIBank.Controllers.UsersController.RefreshToken (APIBank) in 96.7376ms
2022-09-26 11:46:30.752 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:46:30.754 +01:00 [DBG] Connection id "0HMKVLG1GKQ61" completed keep alive response.
2022-09-26 11:46:30.755 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:46:30.755 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0 - 200 - application/json;+charset=utf-8 126.0610ms
2022-09-26 11:46:45.230 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-26 11:46:45.233 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-26 11:46:45.235 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-26 11:46:45.236 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:46:45.237 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:46:45.240 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:46:45.243 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:45.245 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:46:45.247 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:45.248 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:45.249 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:46:45.251 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:46:45.253 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:46:45.255 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:45.256 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:45.258 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:45.259 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:46:45.261 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 11:46:45.263 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:46:45.264 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:46:45.265 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:46:45.267 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:46:45.268 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:46:45.269 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:46:45.270 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:46:45.273 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:45.274 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:46:45.275 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:45.277 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:45.278 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:46:45.280 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:46:45.282 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:46:45.283 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:45.284 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:45.285 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:45.286 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:45.287 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:46:45.288 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:45.290 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:45.293 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 11:46:45.295 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 11:46:45.297 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:45.297 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:45.299 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:45.300 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:46:45.302 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:46:45.302 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:46:45.303 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:46:45.303 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:46:45.304 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-26 11:46:45.307 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 37.5675ms
2022-09-26 11:46:45.308 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:46:45.309 +01:00 [DBG] Connection id "0HMKVLG1GKQ61" completed keep alive response.
2022-09-26 11:46:45.310 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:46:45.311 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 80.4192ms
2022-09-26 11:46:52.351 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000000 - -
2022-09-26 11:46:52.354 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetById/100000000'
2022-09-26 11:46:52.356 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)' with route pattern 'api/Accounts/GetById/{accountId}' is valid for the request path '/api/Accounts/GetById/100000000'
2022-09-26 11:46:52.358 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 11:46:52.359 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:46:52.361 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:46:52.364 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:52.365 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:46:52.367 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:52.368 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:52.369 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:46:52.370 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:46:52.373 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:46:52.374 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:52.374 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:52.375 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:52.376 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 11:46:52.377 +01:00 [INF] Route matched with {action = "GetById", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(Int32) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 11:46:52.379 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:46:52.380 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:46:52.381 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:46:52.383 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:46:52.385 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:46:52.386 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:46:52.388 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:46:52.389 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' ...
2022-09-26 11:46:52.390 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' using the name 'accountId' in request data ...
2022-09-26 11:46:52.391 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 11:46:52.392 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 11:46:52.393 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Int32' ...
2022-09-26 11:46:52.394 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Int32'.
2022-09-26 11:46:52.396 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:52.397 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:46:52.398 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:52.399 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:52.401 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:46:52.403 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:46:52.405 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:46:52.406 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:52.407 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:52.407 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:52.411 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Include(a => a.Transactions)
    .Where(a => a.Id == __accountId_0 && a.UserId == __userId_1)
    .Select(a => new AccountMovims{ 
        Account = new AccountRequestResponse{ 
            Balance = a.Balance, 
            Currency = a.Currency, 
            CreatedAt = a.CreatedAt, 
            Id = a.Id 
        }
        , 
        Movims = a.Transactions
            .Select(b => new Movim{ 
                Amount = b.Amount, 
                CreatedAt = b.CreatedAt 
            }
            )
            .ToArray() 
    }
    )
    .SingleOrDefault()'
2022-09-26 11:46:52.474 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AccountMovims>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
        SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
        FROM 
        (
            SELECT TOP(2) a.balance, a.currency, a.created_at, a.id
            FROM accounts AS a
            WHERE (a.id == @__accountId_0) && (a.user_id == @__userId_1)
        ) AS t
        LEFT JOIN transactions AS t0 ON t.id == t0.account_id
        ORDER BY t.id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountMovims>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:46:52.477 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:46:52.477 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:46:52.478 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:46:52.479 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:52.479 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:46:52.481 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:46:52.487 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:46:52.487 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:46:52.488 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:46:52.489 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:46:52.490 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:46:52.491 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:46:52.491 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:46:52.492 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:46:52.493 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.Responses.AccountMovims'.
2022-09-26 11:46:52.494 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetById (APIBank) in 107.8595ms
2022-09-26 11:46:52.496 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 11:46:52.497 +01:00 [DBG] Connection id "0HMKVLG1GKQ61" completed keep alive response.
2022-09-26 11:46:52.498 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:46:52.500 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000000 - - - 200 - application/json;+charset=utf-8 148.6833ms
2022-09-26 11:47:08.848 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Transfers/TransferRequest text/plain 80
2022-09-26 11:47:08.850 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:47:08.851 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-09-26 11:47:08.853 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:47:08.858 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:47:08.860 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:47:08.862 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:47:08.863 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:47:08.864 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:47:08.865 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:47:08.868 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:47:08.870 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:47:08.873 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:47:08.875 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:47:08.876 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:47:08.877 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2022-09-26 11:47:08.879 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2022-09-26 11:47:08.879 +01:00 [DBG] Connection id "0HMKVLG1GKQ61" completed keep alive response.
2022-09-26 11:47:08.880 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:47:08.881 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Transfers/TransferRequest text/plain 80 - 405 0 - 33.5063ms
2022-09-26 11:47:08.882 +01:00 [DBG] Connection id "0HMKVLG1GKQ61", Request id "0HMKVLG1GKQ61:0000000A": started reading request body.
2022-09-26 11:47:08.883 +01:00 [DBG] Connection id "0HMKVLG1GKQ61", Request id "0HMKVLG1GKQ61:0000000A": done reading request body.
2022-09-26 11:47:22.635 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Transfers/TransferRequest text/plain 80
2022-09-26 11:47:22.637 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:47:22.639 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-09-26 11:47:22.642 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:47:22.645 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:47:22.647 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:47:22.647 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:47:22.648 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:47:22.650 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:47:22.652 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:47:22.654 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:47:22.655 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:47:22.658 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:47:22.658 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:47:22.659 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:47:22.660 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2022-09-26 11:47:22.660 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2022-09-26 11:47:22.661 +01:00 [DBG] Connection id "0HMKVLG1GKQ61" completed keep alive response.
2022-09-26 11:47:22.663 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:47:22.663 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Transfers/TransferRequest text/plain 80 - 405 0 - 28.6370ms
2022-09-26 11:47:22.665 +01:00 [DBG] Connection id "0HMKVLG1GKQ61", Request id "0HMKVLG1GKQ61:0000000B": started reading request body.
2022-09-26 11:47:22.666 +01:00 [DBG] Connection id "0HMKVLG1GKQ61", Request id "0HMKVLG1GKQ61:0000000B": done reading request body.
2022-09-26 11:48:56.748 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-09-26 11:48:56.881 +01:00 [DBG] Hosting starting
2022-09-26 11:48:57.102 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9CC642E9838495A6C3C202DECA6A8AD300396DD2)
2022-09-26 11:48:57.217 +01:00 [INF] Now listening on: https://localhost:7036
2022-09-26 11:48:57.219 +01:00 [INF] Now listening on: http://localhost:5036
2022-09-26 11:48:57.219 +01:00 [DBG] Loaded hosting startup assembly APIBank
2022-09-26 11:48:57.220 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-09-26 11:48:57.221 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-09-26 11:48:57.222 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-26 11:48:57.223 +01:00 [INF] Hosting environment: Development
2022-09-26 11:48:57.224 +01:00 [INF] Content root path: C:\Users\mguedesa\OneDrive - NTT DATA EMEAL\Documentos\GitHub\OpenBankAPI-NTT\APIBank\APIBank\
2022-09-26 11:48:57.226 +01:00 [DBG] Hosting started
2022-09-26 11:48:57.422 +01:00 [DBG] Connection id "0HMKVLIRAMEO0" received FIN.
2022-09-26 11:48:57.422 +01:00 [DBG] Connection id "0HMKVLIRAMENV" received FIN.
2022-09-26 11:48:57.425 +01:00 [DBG] Connection id "0HMKVLIRAMEO0" accepted.
2022-09-26 11:48:57.425 +01:00 [DBG] Connection id "0HMKVLIRAMENV" accepted.
2022-09-26 11:48:57.429 +01:00 [DBG] Connection id "0HMKVLIRAMEO0" started.
2022-09-26 11:48:57.429 +01:00 [DBG] Connection id "0HMKVLIRAMENV" started.
2022-09-26 11:48:57.454 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-26 11:48:57.454 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-26 11:48:57.511 +01:00 [DBG] Connection id "0HMKVLIRAMEO0" stopped.
2022-09-26 11:48:57.511 +01:00 [DBG] Connection id "0HMKVLIRAMENV" stopped.
2022-09-26 11:48:57.515 +01:00 [DBG] Connection id "0HMKVLIRAMEO0" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-26 11:48:57.515 +01:00 [DBG] Connection id "0HMKVLIRAMENV" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-26 11:48:57.934 +01:00 [DBG] Connection id "0HMKVLIRAMEO1" accepted.
2022-09-26 11:48:57.937 +01:00 [DBG] Connection id "0HMKVLIRAMEO1" started.
2022-09-26 11:48:57.987 +01:00 [DBG] Connection 0HMKVLIRAMEO1 established using the following protocol: "Tls12"
2022-09-26 11:48:58.054 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/index.html - -
2022-09-26 11:48:58.097 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-09-26 11:48:58.130 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-09-26 11:48:58.133 +01:00 [DBG] Request did not match any endpoints
2022-09-26 11:48:58.245 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-09-26 11:48:58.432 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-09-26 11:48:58.443 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/index.html - - - 200 - text/html;charset=utf-8 386.9593ms
2022-09-26 11:48:58.465 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_vs/browserLink - -
2022-09-26 11:48:58.465 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - -
2022-09-26 11:48:58.482 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 16.5650ms
2022-09-26 11:48:58.500 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 34.3438ms
2022-09-26 11:48:58.585 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - -
2022-09-26 11:48:58.586 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-09-26 11:48:58.589 +01:00 [DBG] Request did not match any endpoints
2022-09-26 11:48:58.763 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 178.1875ms
2022-09-26 11:49:26.623 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Transfers/TransferRequest application/json 76
2022-09-26 11:49:26.646 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:49:26.656 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:49:26.660 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:49:26.663 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:49:27.205 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:49:27.230 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 11:49:27.236 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:49:27.237 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:49:27.238 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:49:27.240 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:49:27.241 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:49:27.244 +01:00 [INF] Authorization failed for the request at filter 'APIBank.Authorization.AuthorizeAttribute'.
2022-09-26 11:49:27.246 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:49:27.262 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 13.0281ms
2022-09-26 11:49:27.267 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:49:27.274 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Transfers/TransferRequest application/json 76 - 401 - application/json;+charset=utf-8 651.3368ms
2022-09-26 11:49:27.277 +01:00 [DBG] Connection id "0HMKVLIRAMEO1", Request id "0HMKVLIRAMEO1:00000009": started reading request body.
2022-09-26 11:49:27.279 +01:00 [DBG] Connection id "0HMKVLIRAMEO1", Request id "0HMKVLIRAMEO1:00000009": done reading request body.
2022-09-26 11:49:41.555 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58
2022-09-26 11:49:41.559 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-26 11:49:41.561 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-26 11:49:41.565 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 11:49:41.566 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:49:41.578 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 11:49:41.581 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:49:41.582 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:49:41.585 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:49:41.589 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:49:41.592 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:49:41.593 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:49:41.595 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:49:41.597 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:49:41.616 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-26 11:49:41.624 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-26 11:49:41.626 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 11:49:41.633 +01:00 [DBG] Connection id "0HMKVLIRAMEO1", Request id "0HMKVLIRAMEO1:0000000B": started reading request body.
2022-09-26 11:49:41.635 +01:00 [DBG] Connection id "0HMKVLIRAMEO1", Request id "0HMKVLIRAMEO1:0000000B": done reading request body.
2022-09-26 11:49:41.644 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-26 11:49:41.645 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 11:49:41.646 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 11:49:41.647 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-26 11:49:41.662 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 11:49:41.837 +01:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'.
2022-09-26 11:49:43.578 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:49:43.691 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(x => x.Username == __model_Username_0)'
2022-09-26 11:49:44.229 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.username == @__model_Username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:49:44.298 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:49:44.404 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (95ms).
2022-09-26 11:49:44.416 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:49:44.735 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:44.761 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-26 11:49:44.922 +01:00 [INF] Executed DbCommand (165ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-26 11:49:45.010 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:45.082 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:49:45.092 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:45.105 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:49:45.369 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(user => user.RefreshTokenCollection
        .Any(reftoken => reftoken.RefToken == __token_0))'
2022-09-26 11:49:45.509 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM users AS u
            WHERE EXISTS (
                SELECT 1
                FROM refresh_token AS r
                WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__token_0)))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .Single()'
2022-09-26 11:49:45.528 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:49:45.530 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:49:45.532 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:49:45.534 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:45.537 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:49:45.540 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:49:45.545 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:49:45.545 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:45.546 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:49:45.553 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:49:45.557 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:49:45.594 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:45.647 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:45.707 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:45.718 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:49:45.730 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:49:45.731 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:45.737 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:49:45.748 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:49:45.841 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:49:45.844 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-09-26 11:49:45.846 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
2022-09-26 11:49:45.874 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
2022-09-26 11:49:45.904 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:49:45.913 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:49:45.921 +01:00 [DBG] Committing transaction.
2022-09-26 11:49:45.937 +01:00 [DBG] Committed transaction.
2022-09-26 11:49:45.941 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:45.943 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:49:45.946 +01:00 [DBG] Disposing transaction.
2022-09-26 11:49:45.962 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:45.971 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:49:46.267 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.UserId == __id_0)
    .AsNoTracking()
    .Select(rt => new RefreshToken{ 
        Id = rt.Id, 
        UserId = rt.UserId, 
        RefToken = rt.RefToken, 
        Expires = rt.Expires, 
        Created = rt.Created, 
        CreatedByIp = rt.CreatedByIp, 
        Revoked = rt.Revoked, 
        RevokedByIp = rt.RevokedByIp, 
        ReplacedByToken = rt.ReplacedByToken, 
        ReasonRevoked = rt.ReasonRevoked, 
        IsExpired = rt.IsExpired, 
        IsRevoked = rt.IsRevoked, 
        IsActive = rt.IsActive 
    }
    )'
2022-09-26 11:49:46.308 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Id -> 0
            UserId -> 1
            RefToken -> 2
            Expires -> 3
            Created -> 4
            CreatedByIp -> 5
            Revoked -> 6
            RevokedByIp -> 7
            ReplacedByToken -> 8
            ReasonRevoked -> 9
            IsExpired -> 10
            IsRevoked -> 11
            IsActive -> 12
        SELECT r.id AS Id, r.user_id AS UserId, r.token AS RefToken, r.expires AS Expires, r.created AS Created, r.created_by_ip AS CreatedByIp, r.revoked AS Revoked, r.revoked_by_ip AS RevokedByIp, r.replaced_by_token AS ReplacedByToken, r.reason_revoked AS ReasonRevoked, r.is_expired AS IsExpired, r.is_revoked AS IsRevoked, r.is_active AS IsActive
        FROM refresh_token AS r
        WHERE r.user_id == @__id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-26 11:49:46.314 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:49:46.315 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:49:46.319 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:49:46.320 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:46.321 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:49:46.324 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:49:46.327 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:49:46.328 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:46.330 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:49:46.335 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:46.337 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:46.338 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:49:46.339 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:49:46.340 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:49:46.341 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:49:46.342 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:46.343 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:49:46.344 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:49:46.366 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:49:46.377 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:49:46.379 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:49:46.382 +01:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-26 11:49:46.388 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-26 11:49:46.392 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:49:46.392 +01:00 [DBG] Committing transaction.
2022-09-26 11:49:46.394 +01:00 [DBG] Committed transaction.
2022-09-26 11:49:46.395 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:46.396 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:49:46.397 +01:00 [DBG] Disposing transaction.
2022-09-26 11:49:46.398 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:46.402 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:46.404 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:49:46.409 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:49:46.413 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-26 11:49:46.415 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-26 11:49:46.418 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:49:46.419 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:49:46.420 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:49:46.422 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-26 11:49:46.429 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 4834.9781ms
2022-09-26 11:49:46.430 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 11:49:46.436 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:49:46.450 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58 - 200 - application/json;+charset=utf-8 4895.3819ms
2022-09-26 11:49:57.374 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Transfers/TransferRequest application/json 76
2022-09-26 11:49:57.378 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:49:57.380 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:49:57.384 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:49:57.387 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:49:57.543 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:49:57.561 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-26 11:49:57.567 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(1) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:49:57.570 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:49:57.570 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:49:57.572 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:49:57.574 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:57.578 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:49:57.581 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:49:57.586 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:57.589 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:49:57.591 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:57.594 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:49:57.595 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:49:57.597 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 11:49:57.602 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:49:57.603 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:49:57.606 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:49:57.610 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:49:57.612 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:49:57.614 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:49:57.615 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:49:57.617 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:49:57.618 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' using the name '' in request data ...
2022-09-26 11:49:57.620 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 11:49:57.627 +01:00 [DBG] Connection id "0HMKVLIRAMEO1", Request id "0HMKVLIRAMEO1:0000000D": started reading request body.
2022-09-26 11:49:57.628 +01:00 [DBG] Connection id "0HMKVLIRAMEO1", Request id "0HMKVLIRAMEO1:0000000D": done reading request body.
2022-09-26 11:49:57.634 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.TransferRequest'
2022-09-26 11:49:57.635 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:49:57.636 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:49:57.637 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:49:57.644 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:49:57.654 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Include(a => a.Transactions)
    .Where(a => a.Id == __accountId_0 && a.UserId == __userId_1)
    .Select(a => new AccountMovims{ 
        Account = new AccountRequestResponse{ 
            Balance = a.Balance, 
            Currency = a.Currency, 
            CreatedAt = a.CreatedAt, 
            Id = a.Id 
        }
        , 
        Movims = a.Transactions
            .Select(b => new Movim{ 
                Amount = b.Amount, 
                CreatedAt = b.CreatedAt 
            }
            )
            .ToArray() 
    }
    )
    .SingleOrDefault()'
2022-09-26 11:49:57.796 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AccountMovims>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
        SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
        FROM 
        (
            SELECT TOP(2) a.balance, a.currency, a.created_at, a.id
            FROM accounts AS a
            WHERE (a.id == @__accountId_0) && (a.user_id == @__userId_1)
        ) AS t
        LEFT JOIN transactions AS t0 ON t.id == t0.account_id
        ORDER BY t.id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountMovims>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:49:57.807 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:49:57.810 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:49:57.814 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:49:57.816 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:57.818 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:49:57.830 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:49:57.859 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:49:57.862 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:57.865 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:49:57.869 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-26 11:49:57.879 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.Created (DateTime) Required, 1], [Property: RefreshToken.CreatedByIp (string) Required MaxLength(200), 2], [Property: RefreshToken.Expires (DateTime) Required, 3], [Property: RefreshToken.IsActive (no field, bool) Required, 4], [Property: RefreshToken.IsExpired (no field, bool) Required, 5], [Property: RefreshToken.IsRevoked (no field, bool) Required, 6], [Property: RefreshToken.ReasonRevoked (string) MaxLength(200), 7], [Property: RefreshToken.RefToken (string) Required MaxLength(254), 8], [Property: RefreshToken.ReplacedByToken (string) MaxLength(200), 9], [Property: RefreshToken.Revoked (DateTime?), 10], [Property: RefreshToken.RevokedByIp (string) MaxLength(200), 11], [Property: RefreshToken.UserId (int) Required FK Index, 12] }
        SELECT TOP(1) r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
        FROM refresh_token AS r
        WHERE r.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:49:57.884 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:49:57.885 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:49:57.885 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:49:57.886 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:57.887 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:49:57.894 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:49:57.895 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:57.897 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:49:57.898 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:57.899 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:49:57.907 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:49:57.911 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:49:57.912 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:49:57.912 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:49:57.915 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:57.937 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:57.941 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:49:57.943 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:49:57.952 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:49:57.959 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 11:49:57.966 +01:00 [DBG] Created transaction savepoint.
2022-09-26 11:49:57.967 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:49:57.968 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:49:57.969 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transfers (amount, currency, from_account_id, to_account_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at;
2022-09-26 11:49:57.987 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transfers (amount, currency, from_account_id, to_account_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at;
2022-09-26 11:49:57.994 +01:00 [DBG] The foreign key property 'Transfer.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:49:57.996 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:49:57.999 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 11:49:58.001 +01:00 [DBG] Released transaction savepoint.
2022-09-26 11:49:58.010 +01:00 [DBG] An entity of type 'Transfer' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:58.014 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:49:58.017 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:58.033 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:58.034 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:58.036 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:58.039 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:49:58.041 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:49:58.048 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:49:58.049 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 11:49:58.051 +01:00 [DBG] Created transaction savepoint.
2022-09-26 11:49:58.057 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:49:58.059 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:49:58.062 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-09-26 11:49:58.064 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id;
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p4, @p5, @p6, @p7)
RETURNING id;
2022-09-26 11:49:58.068 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id;
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p4, @p5, @p6, @p7)
RETURNING id;
2022-09-26 11:49:58.075 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:49:58.080 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:49:58.082 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:49:58.083 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 11:49:58.084 +01:00 [DBG] Released transaction savepoint.
2022-09-26 11:49:58.085 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:58.090 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:58.093 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:49:58.096 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-26 11:49:58.099 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (int) Required FK Index, 4] }
        SELECT TOP(1) a.id, a.balance, a.created_at, a.currency, a.user_id
        FROM accounts AS a
        WHERE a.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:49:58.101 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:49:58.102 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:49:58.103 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:49:58.109 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:49:58.113 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:58.128 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:49:58.132 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:49:58.134 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:49:58.135 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:49:58.137 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:49:58.142 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:49:58.143 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:50:06.907 +01:00 [INF] Error while transferring funds:
2022-09-26 11:50:18.793 +01:00 [DBG] Disposing transaction.
2022-09-26 11:50:18.797 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:50:18.797 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:50:18.819 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 21205.1012ms
2022-09-26 11:50:18.826 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:50:28.974 +01:00 [INF] Global Error was found:
2022-09-26 11:50:33.018 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:50:33.020 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Transfers/TransferRequest application/json 76 - 400 - application/json 35645.9339ms
2022-09-26 11:50:53.970 +01:00 [DBG] Connection id "0HMKVLIRAMEO2" received FIN.
2022-09-26 11:50:53.974 +01:00 [DBG] Connection id "0HMKVLIRAMEO2" accepted.
2022-09-26 11:50:53.976 +01:00 [DBG] Connection id "0HMKVLIRAMEO2" started.
2022-09-26 11:50:53.980 +01:00 [DBG] Connection id "0HMKVLIRAMEO3" accepted.
2022-09-26 11:50:53.981 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-26 11:50:53.981 +01:00 [DBG] Connection id "0HMKVLIRAMEO3" started.
2022-09-26 11:50:53.984 +01:00 [DBG] Connection id "0HMKVLIRAMEO2" stopped.
2022-09-26 11:50:53.985 +01:00 [DBG] Connection id "0HMKVLIRAMEO2" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-26 11:50:53.990 +01:00 [DBG] Connection 0HMKVLIRAMEO3 established using the following protocol: "Tls12"
2022-09-26 11:50:54.000 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Transfers/TransferRequest text/plain 80
2022-09-26 11:50:54.001 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:50:54.002 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-09-26 11:50:54.003 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:50:54.064 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2022-09-26 11:50:54.067 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2022-09-26 11:50:54.069 +01:00 [DBG] Connection id "0HMKVLIRAMEO3" completed keep alive response.
2022-09-26 11:50:54.070 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Transfers/TransferRequest text/plain 80 - 405 0 - 69.2240ms
2022-09-26 11:50:54.070 +01:00 [DBG] Connection id "0HMKVLIRAMEO3", Request id "0HMKVLIRAMEO3:00000002": started reading request body.
2022-09-26 11:50:54.071 +01:00 [DBG] Connection id "0HMKVLIRAMEO3", Request id "0HMKVLIRAMEO3:00000002": done reading request body.
2022-09-26 11:51:06.104 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest text/plain 80
2022-09-26 11:51:06.106 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:51:06.109 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:51:06.111 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:51:06.113 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:51:06.142 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:51:06.144 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 11:51:06.146 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:51:06.149 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:51:06.151 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:51:06.153 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:51:06.154 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:51:06.156 +01:00 [INF] Authorization failed for the request at filter 'APIBank.Authorization.AuthorizeAttribute'.
2022-09-26 11:51:06.158 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:51:06.160 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 4.115ms
2022-09-26 11:51:06.163 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:51:06.165 +01:00 [DBG] Connection id "0HMKVLIRAMEO3" completed keep alive response.
2022-09-26 11:51:06.166 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest text/plain 80 - 401 - application/json;+charset=utf-8 62.0342ms
2022-09-26 11:51:06.167 +01:00 [DBG] Connection id "0HMKVLIRAMEO3", Request id "0HMKVLIRAMEO3:00000003": started reading request body.
2022-09-26 11:51:06.169 +01:00 [DBG] Connection id "0HMKVLIRAMEO3", Request id "0HMKVLIRAMEO3:00000003": done reading request body.
2022-09-26 11:51:10.706 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0
2022-09-26 11:51:10.711 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/refreshToken'
2022-09-26 11:51:10.713 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)' with route pattern 'api/Users/refreshToken' is valid for the request path '/api/Users/refreshToken'
2022-09-26 11:51:10.715 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:51:10.717 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:51:10.746 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:51:10.751 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RefreshToken() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:51:10.753 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:51:10.755 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:51:10.756 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:51:10.758 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:51:10.761 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:51:10.763 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:51:10.764 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:51:10.835 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:51:10.839 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(userQuery => userQuery.RefreshTokenCollection
        .Any(refTokenQuery => refTokenQuery.RefToken == __refToken_0))'
2022-09-26 11:51:10.847 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE EXISTS (
            SELECT 1
            FROM refresh_token AS r
            WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__refToken_0))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:51:10.849 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:51:10.850 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:51:10.851 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:51:10.852 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:10.854 +01:00 [DBG] Executing DbCommand [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:51:10.855 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:51:10.857 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:51:10.859 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:51:10.860 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:10.862 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:51:10.865 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:51:10.866 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:51:10.867 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:51:10.868 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:10.869 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:51:10.871 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:51:10.873 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:51:10.873 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:10.874 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:51:10.877 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:51:10.879 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:51:10.880 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:51:10.881 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:10.882 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:51:10.884 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:51:10.885 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:51:10.886 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:10.887 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:51:10.888 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:51:10.889 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:51:10.890 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:51:10.892 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:10.894 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:51:10.896 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:51:10.899 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:51:10.899 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:10.900 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:51:10.901 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:51:10.902 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:51:10.903 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:51:10.903 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:51:10.904 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:51:10.905 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:51:10.906 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:51:10.907 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:51:10.910 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:10.911 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:51:10.912 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:51:10.913 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:51:10.913 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:51:10.914 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:51:10.915 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 11:51:10.917 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 11:51:10.919 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:51:10.920 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:51:10.921 +01:00 [DBG] Committing transaction.
2022-09-26 11:51:10.923 +01:00 [DBG] Committed transaction.
2022-09-26 11:51:10.925 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:10.927 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:51:10.928 +01:00 [DBG] Disposing transaction.
2022-09-26 11:51:10.929 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:51:10.930 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:51:10.931 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:51:10.933 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:51:10.935 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:51:10.935 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:51:10.936 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:51:10.937 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:51:10.938 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-26 11:51:10.939 +01:00 [INF] Executed action APIBank.Controllers.UsersController.RefreshToken (APIBank) in 176.8113ms
2022-09-26 11:51:10.941 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:51:10.943 +01:00 [DBG] Connection id "0HMKVLIRAMEO3" completed keep alive response.
2022-09-26 11:51:10.944 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:51:10.946 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0 - 200 - application/json;+charset=utf-8 239.2584ms
2022-09-26 11:51:24.128 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest text/plain 80
2022-09-26 11:51:24.135 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:51:24.137 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:51:24.138 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:51:24.138 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:51:29.711 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:51:29.715 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:51:29.716 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:51:29.717 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:51:29.719 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:29.719 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:51:29.721 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:51:29.723 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:51:29.725 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:51:29.728 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:29.729 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:51:29.730 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:51:29.730 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 11:51:29.732 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:51:29.733 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:51:29.733 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:51:29.735 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:51:29.736 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:51:29.738 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:51:29.739 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:51:29.748 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:51:29.749 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' using the name '' in request data ...
2022-09-26 11:51:29.750 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'text/plain'.
2022-09-26 11:51:29.751 +01:00 [DBG] No input formatter was found to support the content type 'text/plain' for use with the [FromBody] attribute.
2022-09-26 11:51:29.753 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:51:29.754 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:51:29.755 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:51:29.757 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:51:29.759 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter'.
2022-09-26 11:51:29.762 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:51:29.765 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:51:29.766 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-26 11:51:29.767 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-26 11:51:29.768 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-09-26 11:51:29.770 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 32.1861ms
2022-09-26 11:51:29.771 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:51:29.773 +01:00 [DBG] Connection id "0HMKVLIRAMEO3" completed keep alive response.
2022-09-26 11:51:29.774 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:51:29.775 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest text/plain 80 - 415 - application/problem+json;+charset=utf-8 5646.4576ms
2022-09-26 11:51:29.778 +01:00 [DBG] Connection id "0HMKVLIRAMEO3", Request id "0HMKVLIRAMEO3:00000005": started reading request body.
2022-09-26 11:51:29.780 +01:00 [DBG] Connection id "0HMKVLIRAMEO3", Request id "0HMKVLIRAMEO3:00000005": done reading request body.
2022-09-26 11:51:35.865 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest text/plain 80
2022-09-26 11:51:35.869 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:51:35.873 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:51:35.876 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:51:35.878 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:51:35.880 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:51:35.882 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:51:35.883 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:51:35.884 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:51:35.886 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:35.890 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:51:35.893 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:51:35.895 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:51:35.896 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:51:35.897 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:35.898 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:51:35.899 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:51:35.900 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 11:51:35.902 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:51:35.907 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:51:35.910 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:51:35.911 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:51:35.912 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:51:35.913 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:51:35.915 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:51:35.916 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:51:35.917 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' using the name '' in request data ...
2022-09-26 11:51:35.920 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'text/plain'.
2022-09-26 11:51:35.924 +01:00 [DBG] No input formatter was found to support the content type 'text/plain' for use with the [FromBody] attribute.
2022-09-26 11:51:35.925 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:51:35.926 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:51:35.927 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:51:35.929 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:51:35.930 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter'.
2022-09-26 11:51:35.931 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:51:35.934 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:51:35.934 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-26 11:51:35.940 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-26 11:51:35.941 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-09-26 11:51:35.941 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 28.722ms
2022-09-26 11:51:35.942 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:51:35.943 +01:00 [DBG] Connection id "0HMKVLIRAMEO3" completed keep alive response.
2022-09-26 11:51:35.944 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:51:35.945 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest text/plain 80 - 415 - application/problem+json;+charset=utf-8 79.3595ms
2022-09-26 11:51:35.945 +01:00 [DBG] Connection id "0HMKVLIRAMEO3", Request id "0HMKVLIRAMEO3:00000006": started reading request body.
2022-09-26 11:51:35.946 +01:00 [DBG] Connection id "0HMKVLIRAMEO3", Request id "0HMKVLIRAMEO3:00000006": done reading request body.
2022-09-26 11:51:57.249 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest text/plain 80
2022-09-26 11:51:57.254 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:51:57.255 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:51:57.257 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:51:57.258 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:51:57.260 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:51:57.266 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:51:57.275 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2022-09-26 11:51:57.278 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:51:57.279 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:57.281 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:51:57.290 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:51:57.293 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:51:57.294 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:51:57.294 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:51:57.296 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:51:57.297 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:51:57.297 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 11:51:57.299 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:51:57.302 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:51:57.305 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:51:57.306 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:51:57.307 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:51:57.308 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:51:57.309 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:51:57.311 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:51:57.311 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' using the name '' in request data ...
2022-09-26 11:51:57.313 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'text/plain'.
2022-09-26 11:51:57.315 +01:00 [DBG] No input formatter was found to support the content type 'text/plain' for use with the [FromBody] attribute.
2022-09-26 11:51:57.316 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:51:57.318 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:51:57.320 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:51:57.321 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:51:57.322 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter'.
2022-09-26 11:51:57.323 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:51:57.324 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:51:57.325 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-26 11:51:57.326 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-26 11:51:57.327 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-09-26 11:51:57.328 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 19.255ms
2022-09-26 11:51:57.328 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:51:57.329 +01:00 [DBG] Connection id "0HMKVLIRAMEO3" completed keep alive response.
2022-09-26 11:51:57.330 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:51:57.331 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest text/plain 80 - 415 - application/problem+json;+charset=utf-8 81.5147ms
2022-09-26 11:51:57.331 +01:00 [DBG] Connection id "0HMKVLIRAMEO3", Request id "0HMKVLIRAMEO3:00000007": started reading request body.
2022-09-26 11:51:57.332 +01:00 [DBG] Connection id "0HMKVLIRAMEO3", Request id "0HMKVLIRAMEO3:00000007": done reading request body.
2022-09-26 11:52:19.620 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0
2022-09-26 11:52:19.623 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Logout'
2022-09-26 11:52:19.624 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)' with route pattern 'api/Users/Logout' is valid for the request path '/api/Users/Logout'
2022-09-26 11:52:19.625 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:52:19.626 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:52:19.650 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:52:19.653 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:52:19.655 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:52:19.658 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:52:19.660 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:52:19.662 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:52:19.665 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:52:19.670 +01:00 [INF] Authorization failed for the request at filter 'APIBank.Authorization.AuthorizeAttribute'.
2022-09-26 11:52:19.673 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:52:19.674 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Logout (APIBank) in 3.8574ms
2022-09-26 11:52:19.675 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:52:19.676 +01:00 [DBG] Connection id "0HMKVLIRAMEO3" completed keep alive response.
2022-09-26 11:52:19.676 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0 - 401 - application/json;+charset=utf-8 56.7058ms
2022-09-26 11:52:26.881 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Login application/json 65
2022-09-26 11:52:26.884 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-26 11:52:26.886 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-26 11:52:26.887 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 11:52:26.888 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:52:26.912 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 11:52:26.914 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:52:26.915 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:52:26.916 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:52:26.917 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:52:26.919 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:52:26.920 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:52:26.923 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:52:26.925 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:52:26.926 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-26 11:52:26.928 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-26 11:52:26.930 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 11:52:26.931 +01:00 [DBG] Connection id "0HMKVLIRAMEO3", Request id "0HMKVLIRAMEO3:00000009": started reading request body.
2022-09-26 11:52:26.932 +01:00 [DBG] Connection id "0HMKVLIRAMEO3", Request id "0HMKVLIRAMEO3:00000009": done reading request body.
2022-09-26 11:52:26.933 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-26 11:52:26.934 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 11:52:26.935 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 11:52:26.936 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-26 11:52:26.937 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 11:52:26.938 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:52:26.940 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:52:26.941 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:52:26.943 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:52:26.944 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:26.945 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-26 11:52:26.947 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-26 11:52:26.948 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:26.950 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:52:26.950 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:26.951 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:52:27.199 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:52:27.203 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-09-26 11:52:27.204 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:52:27.204 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:27.205 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:52:27.209 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:52:27.213 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:52:27.214 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:27.217 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:52:27.219 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:52:27.219 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:52:27.221 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:27.223 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:27.226 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:27.229 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:52:27.230 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:52:27.232 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:27.233 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:52:27.234 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:52:27.235 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:52:27.236 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:52:27.236 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
2022-09-26 11:52:27.239 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
2022-09-26 11:52:27.242 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:52:27.247 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:52:27.248 +01:00 [DBG] Committing transaction.
2022-09-26 11:52:27.250 +01:00 [DBG] Committed transaction.
2022-09-26 11:52:27.251 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:27.253 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:52:27.254 +01:00 [DBG] Disposing transaction.
2022-09-26 11:52:27.255 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:27.262 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:52:27.264 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:52:27.265 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:52:27.266 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:52:27.268 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:27.269 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:52:27.271 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:52:27.276 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:52:27.278 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:27.280 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:52:27.281 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:27.283 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:27.286 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:52:27.288 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:52:27.290 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:52:27.292 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:52:27.294 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:27.297 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:52:27.298 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:52:27.299 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:52:27.300 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:52:27.300 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:52:27.301 +01:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-26 11:52:27.303 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-26 11:52:27.305 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:52:27.306 +01:00 [DBG] Committing transaction.
2022-09-26 11:52:27.307 +01:00 [DBG] Committed transaction.
2022-09-26 11:52:27.308 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:27.310 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:52:27.312 +01:00 [DBG] Disposing transaction.
2022-09-26 11:52:27.312 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:27.314 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:27.315 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:52:27.315 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:52:27.317 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:52:27.317 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:52:27.318 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:52:27.318 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:52:27.319 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-26 11:52:27.320 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 397.7287ms
2022-09-26 11:52:27.321 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 11:52:27.322 +01:00 [DBG] Connection id "0HMKVLIRAMEO3" completed keep alive response.
2022-09-26 11:52:27.323 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:52:27.323 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Login application/json 65 - 200 - application/json;+charset=utf-8 442.1326ms
2022-09-26 11:52:43.425 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-09-26 11:52:43.502 +01:00 [DBG] Hosting starting
2022-09-26 11:52:43.578 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9CC642E9838495A6C3C202DECA6A8AD300396DD2)
2022-09-26 11:52:43.618 +01:00 [INF] Now listening on: https://localhost:7036
2022-09-26 11:52:43.620 +01:00 [INF] Now listening on: http://localhost:5036
2022-09-26 11:52:43.621 +01:00 [DBG] Loaded hosting startup assembly APIBank
2022-09-26 11:52:43.621 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-09-26 11:52:43.622 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-09-26 11:52:43.623 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-26 11:52:43.623 +01:00 [INF] Hosting environment: Development
2022-09-26 11:52:43.624 +01:00 [INF] Content root path: C:\Users\mguedesa\OneDrive - NTT DATA EMEAL\Documentos\GitHub\OpenBankAPI-NTT\APIBank\APIBank\
2022-09-26 11:52:43.624 +01:00 [DBG] Hosting started
2022-09-26 11:52:43.671 +01:00 [DBG] Connection id "0HMKVLKUOC5QQ" accepted.
2022-09-26 11:52:43.671 +01:00 [DBG] Connection id "0HMKVLKUOC5QR" accepted.
2022-09-26 11:52:43.673 +01:00 [DBG] Connection id "0HMKVLKUOC5QQ" started.
2022-09-26 11:52:43.673 +01:00 [DBG] Connection id "0HMKVLKUOC5QR" started.
2022-09-26 11:52:43.684 +01:00 [DBG] Connection id "0HMKVLKUOC5QR" received FIN.
2022-09-26 11:52:43.684 +01:00 [DBG] Connection id "0HMKVLKUOC5QQ" received FIN.
2022-09-26 11:52:43.690 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-26 11:52:43.690 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-26 11:52:43.721 +01:00 [DBG] Connection id "0HMKVLKUOC5QQ" stopped.
2022-09-26 11:52:43.723 +01:00 [DBG] Connection id "0HMKVLKUOC5QR" stopped.
2022-09-26 11:52:43.726 +01:00 [DBG] Connection id "0HMKVLKUOC5QR" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-26 11:52:43.728 +01:00 [DBG] Connection id "0HMKVLKUOC5QQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-26 11:52:43.861 +01:00 [DBG] Connection id "0HMKVLKUOC5QS" accepted.
2022-09-26 11:52:43.865 +01:00 [DBG] Connection id "0HMKVLKUOC5QS" started.
2022-09-26 11:52:43.904 +01:00 [DBG] Connection 0HMKVLKUOC5QS established using the following protocol: "Tls12"
2022-09-26 11:52:43.959 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/index.html - -
2022-09-26 11:52:43.990 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-09-26 11:52:44.012 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-09-26 11:52:44.014 +01:00 [DBG] Request did not match any endpoints
2022-09-26 11:52:44.088 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-09-26 11:52:44.200 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-09-26 11:52:44.205 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/index.html - - - 200 - text/html;charset=utf-8 248.8185ms
2022-09-26 11:52:44.224 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - -
2022-09-26 11:52:44.229 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 4.8136ms
2022-09-26 11:52:44.232 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_vs/browserLink - -
2022-09-26 11:52:44.242 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 9.7293ms
2022-09-26 11:52:44.329 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - -
2022-09-26 11:52:44.331 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-09-26 11:52:44.333 +01:00 [DBG] Request did not match any endpoints
2022-09-26 11:52:44.463 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 132.9549ms
2022-09-26 11:52:50.309 +01:00 [DBG] Connection id "0HMKVLKUOC5QT" accepted.
2022-09-26 11:52:50.311 +01:00 [DBG] Connection id "0HMKVLKUOC5QT" received FIN.
2022-09-26 11:52:50.313 +01:00 [DBG] Connection id "0HMKVLKUOC5QT" started.
2022-09-26 11:52:50.313 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" accepted.
2022-09-26 11:52:50.316 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-26 11:52:50.316 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" started.
2022-09-26 11:52:50.318 +01:00 [DBG] Connection id "0HMKVLKUOC5QT" stopped.
2022-09-26 11:52:50.319 +01:00 [DBG] Connection id "0HMKVLKUOC5QT" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-26 11:52:50.324 +01:00 [DBG] Connection 0HMKVLKUOC5QU established using the following protocol: "Tls12"
2022-09-26 11:52:50.329 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Login application/json 65
2022-09-26 11:52:50.334 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-26 11:52:50.339 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-26 11:52:50.342 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 11:52:50.344 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:52:50.517 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 11:52:50.537 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:52:50.544 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:52:50.545 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:52:50.546 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:52:50.547 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:52:50.548 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:52:50.550 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:52:50.551 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:52:50.559 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-26 11:52:50.561 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-26 11:52:50.564 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 11:52:50.566 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:00000002": started reading request body.
2022-09-26 11:52:50.567 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:00000002": done reading request body.
2022-09-26 11:52:50.574 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-26 11:52:50.575 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 11:52:50.576 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 11:52:50.577 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-26 11:52:50.583 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 11:52:50.627 +01:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'.
2022-09-26 11:52:51.319 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:52:51.366 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(x => x.Username == __model_Username_0)'
2022-09-26 11:52:51.581 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.username == @__model_Username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:52:51.627 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:52:51.668 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (38ms).
2022-09-26 11:52:51.677 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:52:51.898 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:51.912 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-26 11:52:51.995 +01:00 [INF] Executed DbCommand (88ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-26 11:52:52.049 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:52.107 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:52:52.113 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:52.123 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:52:52.348 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(user => user.RefreshTokenCollection
        .Any(reftoken => reftoken.RefToken == __token_0))'
2022-09-26 11:52:52.425 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM users AS u
            WHERE EXISTS (
                SELECT 1
                FROM refresh_token AS r
                WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__token_0)))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .Single()'
2022-09-26 11:52:52.440 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:52:52.443 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:52:52.444 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:52:52.444 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:52.445 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:52:52.448 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:52:52.450 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:52:52.451 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:52.453 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:52:52.457 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:52:52.458 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:52:52.477 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:52.506 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:52.558 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:52.562 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:52:52.578 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:52:52.581 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:52.583 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:52:52.595 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:52:52.662 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:52:52.665 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-09-26 11:52:52.666 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
2022-09-26 11:52:52.677 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
2022-09-26 11:52:52.694 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:52:52.706 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:52:52.708 +01:00 [DBG] Committing transaction.
2022-09-26 11:52:52.712 +01:00 [DBG] Committed transaction.
2022-09-26 11:52:52.714 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:52.715 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:52:52.716 +01:00 [DBG] Disposing transaction.
2022-09-26 11:52:52.728 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:52.732 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:52:52.855 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.UserId == __id_0)
    .AsNoTracking()
    .Select(rt => new RefreshToken{ 
        Id = rt.Id, 
        UserId = rt.UserId, 
        RefToken = rt.RefToken, 
        Expires = rt.Expires, 
        Created = rt.Created, 
        CreatedByIp = rt.CreatedByIp, 
        Revoked = rt.Revoked, 
        RevokedByIp = rt.RevokedByIp, 
        ReplacedByToken = rt.ReplacedByToken, 
        ReasonRevoked = rt.ReasonRevoked, 
        IsExpired = rt.IsExpired, 
        IsRevoked = rt.IsRevoked, 
        IsActive = rt.IsActive 
    }
    )'
2022-09-26 11:52:52.875 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Id -> 0
            UserId -> 1
            RefToken -> 2
            Expires -> 3
            Created -> 4
            CreatedByIp -> 5
            Revoked -> 6
            RevokedByIp -> 7
            ReplacedByToken -> 8
            ReasonRevoked -> 9
            IsExpired -> 10
            IsRevoked -> 11
            IsActive -> 12
        SELECT r.id AS Id, r.user_id AS UserId, r.token AS RefToken, r.expires AS Expires, r.created AS Created, r.created_by_ip AS CreatedByIp, r.revoked AS Revoked, r.revoked_by_ip AS RevokedByIp, r.replaced_by_token AS ReplacedByToken, r.reason_revoked AS ReasonRevoked, r.is_expired AS IsExpired, r.is_revoked AS IsRevoked, r.is_active AS IsActive
        FROM refresh_token AS r
        WHERE r.user_id == @__id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-26 11:52:52.880 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:52:52.882 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:52:52.887 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:52:52.891 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:52.892 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:52:52.894 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:52:52.896 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:52:52.896 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:52.897 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:52:52.899 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:52.901 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:52.903 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:52:52.905 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:52:52.906 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:52:52.908 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:52:52.909 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:52.910 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:52:52.910 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:52:52.924 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:52:52.926 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:52:52.927 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:52:52.928 +01:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-26 11:52:52.930 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-26 11:52:52.933 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:52:52.933 +01:00 [DBG] Committing transaction.
2022-09-26 11:52:52.934 +01:00 [DBG] Committed transaction.
2022-09-26 11:52:52.936 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:52:52.939 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:52:52.940 +01:00 [DBG] Disposing transaction.
2022-09-26 11:52:52.941 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:52.942 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:52:52.943 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:52:52.947 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:52:52.950 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:52:52.950 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:52:52.951 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:52:52.954 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:52:52.956 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-26 11:52:52.967 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 2413.9522ms
2022-09-26 11:52:52.974 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 11:52:52.975 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:52:52.978 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:52:52.982 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Login application/json 65 - 200 - application/json;+charset=utf-8 2652.3891ms
2022-09-26 11:53:06.321 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-26 11:53:06.327 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-26 11:53:06.330 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-26 11:53:06.332 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:53:06.332 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:53:06.422 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:53:06.434 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-26 11:53:06.438 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(1) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:53:06.441 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:53:06.444 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:53:06.446 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:53:06.447 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:53:06.448 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:53:06.449 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:53:06.451 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:53:06.452 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:53:06.452 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:53:06.453 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:53:06.453 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:53:06.455 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 11:53:06.458 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:53:06.461 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:53:06.462 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:53:06.463 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:53:06.464 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:53:06.465 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:53:06.466 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:53:06.469 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-26 11:53:06.473 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.Created (DateTime) Required, 1], [Property: RefreshToken.CreatedByIp (string) Required MaxLength(200), 2], [Property: RefreshToken.Expires (DateTime) Required, 3], [Property: RefreshToken.IsActive (no field, bool) Required, 4], [Property: RefreshToken.IsExpired (no field, bool) Required, 5], [Property: RefreshToken.IsRevoked (no field, bool) Required, 6], [Property: RefreshToken.ReasonRevoked (string) MaxLength(200), 7], [Property: RefreshToken.RefToken (string) Required MaxLength(254), 8], [Property: RefreshToken.ReplacedByToken (string) MaxLength(200), 9], [Property: RefreshToken.Revoked (DateTime?), 10], [Property: RefreshToken.RevokedByIp (string) MaxLength(200), 11], [Property: RefreshToken.UserId (int) Required FK Index, 12] }
        SELECT TOP(1) r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
        FROM refresh_token AS r
        WHERE r.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:53:06.477 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:53:06.478 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:53:06.479 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:53:06.480 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:53:06.481 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:53:06.482 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:53:06.484 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:53:06.485 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:53:06.486 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:53:06.486 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:53:06.488 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(u => u.UserId == __userId_0)
    .Select(u => new AccountRequestResponse{ 
        Balance = u.Balance, 
        CreatedAt = u.CreatedAt, 
        Currency = u.Currency, 
        Id = u.Id 
    }
    )'
2022-09-26 11:53:06.495 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AccountRequestResponse>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Balance -> 0
            CreatedAt -> 1
            Currency -> 2
            Id -> 3
        SELECT a.balance AS Balance, a.created_at AS CreatedAt, a.currency AS Currency, a.id AS Id
        FROM accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountRequestResponse>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-26 11:53:06.497 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:53:06.497 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:53:06.498 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:53:06.499 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:53:06.500 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 11:53:06.502 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 11:53:06.512 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:53:06.513 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:53:06.514 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:53:06.514 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:53:06.516 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:53:06.516 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:53:06.517 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:53:06.517 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:53:06.519 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-26 11:53:06.525 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 60.6292ms
2022-09-26 11:53:06.528 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:53:06.529 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:53:06.530 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:53:06.531 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 209.6780ms
2022-09-26 11:53:11.695 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest text/plain 80
2022-09-26 11:53:11.698 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:53:11.701 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:53:11.706 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:53:11.709 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:53:11.766 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:53:11.777 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:53:11.780 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:53:11.781 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:53:11.784 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:53:11.788 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:53:11.791 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:53:11.793 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:53:11.794 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:53:11.794 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:53:11.795 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:53:11.796 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:53:11.797 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 11:53:11.799 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:53:11.800 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:53:11.801 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:53:11.803 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:53:11.806 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:53:11.807 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:53:11.808 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:53:11.809 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:53:11.810 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' using the name '' in request data ...
2022-09-26 11:53:11.813 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'text/plain'.
2022-09-26 11:53:11.814 +01:00 [DBG] No input formatter was found to support the content type 'text/plain' for use with the [FromBody] attribute.
2022-09-26 11:53:11.817 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:53:11.820 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:53:11.822 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:53:11.824 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:53:11.826 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter'.
2022-09-26 11:53:11.828 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:53:11.829 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:53:11.830 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-26 11:53:11.832 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-26 11:53:11.833 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-09-26 11:53:11.834 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 27.5942ms
2022-09-26 11:53:11.836 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:53:11.838 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:53:11.840 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:53:11.842 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest text/plain 80 - 415 - application/problem+json;+charset=utf-8 146.1230ms
2022-09-26 11:53:11.842 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:00000004": started reading request body.
2022-09-26 11:53:11.844 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:00000004": done reading request body.
2022-09-26 11:54:23.661 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80
2022-09-26 11:54:23.664 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:54:23.665 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:54:23.667 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:54:23.668 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:54:23.675 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:54:23.680 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 11:54:23.682 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:54:23.684 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:54:23.686 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:54:23.691 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:54:23.694 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:54:23.696 +01:00 [INF] Authorization failed for the request at filter 'APIBank.Authorization.AuthorizeAttribute'.
2022-09-26 11:54:23.698 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:54:23.699 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 3.0979ms
2022-09-26 11:54:23.701 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:54:23.702 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:54:23.703 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80 - 401 - application/json;+charset=utf-8 41.9586ms
2022-09-26 11:54:23.703 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:00000005": started reading request body.
2022-09-26 11:54:23.705 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:00000005": done reading request body.
2022-09-26 11:54:28.030 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0
2022-09-26 11:54:28.033 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/refreshToken'
2022-09-26 11:54:28.035 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)' with route pattern 'api/Users/refreshToken' is valid for the request path '/api/Users/refreshToken'
2022-09-26 11:54:28.037 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:54:28.039 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:54:28.041 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:54:28.042 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RefreshToken() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:54:28.044 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:54:28.046 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:54:28.046 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:54:28.048 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:54:28.049 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:54:28.050 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:54:28.051 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:54:28.059 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:54:28.061 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(userQuery => userQuery.RefreshTokenCollection
        .Any(refTokenQuery => refTokenQuery.RefToken == __refToken_0))'
2022-09-26 11:54:28.064 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE EXISTS (
            SELECT 1
            FROM refresh_token AS r
            WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__refToken_0))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:54:28.066 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:28.066 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:54:28.067 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:54:28.068 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:28.069 +01:00 [DBG] Executing DbCommand [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:54:28.075 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:54:28.077 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:28.078 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:28.079 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:28.080 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:54:28.082 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:28.084 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:54:28.085 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:54:28.090 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:28.091 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:54:28.093 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:54:28.095 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:28.096 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:28.097 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:54:28.099 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:28.100 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:54:28.101 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:54:28.104 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:28.106 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:54:28.109 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:54:28.111 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:28.111 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:28.112 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:54:28.114 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:28.115 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:54:28.117 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:54:28.117 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:28.119 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:54:28.123 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:54:28.127 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:28.128 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:28.129 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:54:28.131 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:28.133 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:54:28.134 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:54:28.137 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:28.140 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:28.142 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:28.143 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:54:28.147 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:54:28.149 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:28.149 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:54:28.150 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:54:28.151 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:54:28.153 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:28.156 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:54:28.157 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 11:54:28.160 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 11:54:28.162 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:54:28.164 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:28.165 +01:00 [DBG] Committing transaction.
2022-09-26 11:54:28.167 +01:00 [DBG] Committed transaction.
2022-09-26 11:54:28.167 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:28.169 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:54:28.170 +01:00 [DBG] Disposing transaction.
2022-09-26 11:54:28.173 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:28.175 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:28.176 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:54:28.177 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:54:28.180 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:54:28.180 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:54:28.181 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:54:28.182 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:54:28.183 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-26 11:54:28.184 +01:00 [INF] Executed action APIBank.Controllers.UsersController.RefreshToken (APIBank) in 134.3697ms
2022-09-26 11:54:28.186 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:54:28.187 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:54:28.189 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:54:28.191 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0 - 200 - application/json;+charset=utf-8 160.5521ms
2022-09-26 11:54:41.736 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80
2022-09-26 11:54:41.740 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:54:41.743 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:54:41.747 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:54:41.748 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:54:41.750 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:54:41.753 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:41.754 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:54:41.755 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:54:41.756 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:41.760 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:54:41.763 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:54:41.765 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:41.766 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:41.766 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:41.767 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:54:41.767 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:54:41.768 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 11:54:41.769 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:54:41.770 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:54:41.771 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:54:41.772 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:54:41.775 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:54:41.778 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:54:41.780 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:54:41.781 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:54:41.782 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' using the name '' in request data ...
2022-09-26 11:54:41.783 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 11:54:41.784 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:00000007": started reading request body.
2022-09-26 11:54:41.785 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:00000007": done reading request body.
2022-09-26 11:54:41.788 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.TransferRequest'
2022-09-26 11:54:41.789 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:54:41.791 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:54:41.793 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:54:41.796 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:54:41.800 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Include(a => a.Transactions)
    .Where(a => a.Id == __accountId_0 && a.UserId == __userId_1)
    .Select(a => new AccountMovims{ 
        Account = new AccountRequestResponse{ 
            Balance = a.Balance, 
            Currency = a.Currency, 
            CreatedAt = a.CreatedAt, 
            Id = a.Id 
        }
        , 
        Movims = a.Transactions
            .Select(b => new Movim{ 
                Amount = b.Amount, 
                CreatedAt = b.CreatedAt 
            }
            )
            .ToArray() 
    }
    )
    .SingleOrDefault()'
2022-09-26 11:54:41.893 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AccountMovims>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
        SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
        FROM 
        (
            SELECT TOP(2) a.balance, a.currency, a.created_at, a.id
            FROM accounts AS a
            WHERE (a.id == @__accountId_0) && (a.user_id == @__userId_1)
        ) AS t
        LEFT JOIN transactions AS t0 ON t.id == t0.account_id
        ORDER BY t.id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountMovims>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:54:41.899 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:41.900 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:54:41.901 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:54:41.901 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:41.902 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:54:41.905 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:54:41.911 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:41.912 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:41.913 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:54:41.915 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:41.915 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:54:41.916 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:54:41.917 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:41.918 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:54:41.919 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:54:41.921 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:41.922 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:41.923 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:41.924 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:54:41.928 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:54:41.930 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:41.930 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:54:41.931 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:54:41.934 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:41.952 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:41.953 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:54:41.954 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:54:41.961 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:54:41.963 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 11:54:41.967 +01:00 [DBG] Created transaction savepoint.
2022-09-26 11:54:41.969 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:41.970 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:54:41.971 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transfers (amount, currency, from_account_id, to_account_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at;
2022-09-26 11:54:41.980 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transfers (amount, currency, from_account_id, to_account_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at;
2022-09-26 11:54:41.986 +01:00 [DBG] The foreign key property 'Transfer.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:54:41.987 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:41.989 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 11:54:41.993 +01:00 [DBG] Released transaction savepoint.
2022-09-26 11:54:41.999 +01:00 [DBG] An entity of type 'Transfer' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:42.002 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:54:42.004 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:42.018 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:42.019 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:42.020 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:42.021 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:54:42.024 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:54:42.029 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:54:42.032 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 11:54:42.032 +01:00 [DBG] Created transaction savepoint.
2022-09-26 11:54:42.035 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:54:42.036 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:42.037 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:54:42.038 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id;
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p4, @p5, @p6, @p7)
RETURNING id;
2022-09-26 11:54:42.043 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id;
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p4, @p5, @p6, @p7)
RETURNING id;
2022-09-26 11:54:42.046 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:54:42.048 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:54:42.049 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:42.049 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 11:54:42.050 +01:00 [DBG] Released transaction savepoint.
2022-09-26 11:54:42.051 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:42.053 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:42.054 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:54:42.057 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-26 11:54:42.063 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (int) Required FK Index, 4] }
        SELECT TOP(1) a.id, a.balance, a.created_at, a.currency, a.user_id
        FROM accounts AS a
        WHERE a.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 11:54:42.065 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:42.066 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:54:42.066 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:54:42.068 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:54:42.070 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:42.084 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:42.085 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:42.086 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:54:42.087 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:54:42.088 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:54:42.091 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:42.094 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:42.095 +01:00 [INF] Error while transferring funds:
2022-09-26 11:54:42.097 +01:00 [DBG] Disposing transaction.
2022-09-26 11:54:42.098 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:42.099 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:54:42.101 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 322.6601ms
2022-09-26 11:54:42.102 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:54:42.103 +01:00 [INF] Global Error was found:
2022-09-26 11:54:42.104 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:54:42.105 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:54:42.106 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80 - 400 - application/json 369.7953ms
2022-09-26 11:54:54.358 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80
2022-09-26 11:54:54.362 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:54:54.367 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:54:54.370 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:54:54.371 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:54:54.372 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:54:54.375 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:54.376 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:54:54.377 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:54:54.378 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:54.379 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:54:54.381 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:54:54.384 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.385 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:54.386 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:54.387 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:54:54.387 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:54:54.388 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 11:54:54.390 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:54:54.391 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:54:54.392 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:54:54.393 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:54:54.394 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:54:54.396 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:54:54.400 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:54:54.401 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:54:54.402 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' using the name '' in request data ...
2022-09-26 11:54:54.403 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 11:54:54.404 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:00000008": started reading request body.
2022-09-26 11:54:54.404 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:00000008": done reading request body.
2022-09-26 11:54:54.406 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.TransferRequest'
2022-09-26 11:54:54.407 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:54:54.407 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:54:54.408 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:54:54.409 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:54:54.410 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:54.411 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:54:54.412 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:54:54.413 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:54.414 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:54:54.417 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:54:54.419 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:54.419 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:54.420 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:54:54.422 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:54.423 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:54:54.424 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:54:54.424 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:54.425 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:54:54.427 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:54:54.430 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.433 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:54.433 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:54.434 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:54:54.435 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:54:54.436 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:54.437 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:54:54.438 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:54:54.439 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.440 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.441 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:54:54.442 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:54:54.442 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:54:54.443 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 11:54:54.444 +01:00 [DBG] Created transaction savepoint.
2022-09-26 11:54:54.445 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:54.446 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:54:54.448 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transfers (amount, currency, from_account_id, to_account_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at;
2022-09-26 11:54:54.451 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transfers (amount, currency, from_account_id, to_account_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at;
2022-09-26 11:54:54.453 +01:00 [DBG] The foreign key property 'Transfer.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:54:54.454 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:54.455 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 11:54:54.456 +01:00 [DBG] Released transaction savepoint.
2022-09-26 11:54:54.457 +01:00 [DBG] An entity of type 'Transfer' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.458 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:54:54.459 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.461 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.462 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.464 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.466 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:54:54.467 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:54:54.468 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:54:54.470 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 11:54:54.471 +01:00 [DBG] Created transaction savepoint.
2022-09-26 11:54:54.472 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:54:54.473 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:54.473 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:54:54.483 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id;
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p4, @p5, @p6, @p7)
RETURNING id;
2022-09-26 11:54:54.486 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id;
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p4, @p5, @p6, @p7)
RETURNING id;
2022-09-26 11:54:54.489 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:54:54.490 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:54:54.491 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:54.491 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 11:54:54.492 +01:00 [DBG] Released transaction savepoint.
2022-09-26 11:54:54.493 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.494 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.495 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:54:54.498 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:54.501 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:54:54.502 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:54:54.503 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:54:54.505 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.506 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:54.507 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:54.507 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:54:54.508 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:54:54.510 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:54:54.511 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.512 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:54.514 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:54:54.517 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:54:54.520 +01:00 [DBG] The unchanged property 'Account.Balance' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:54:54.521 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.523 +01:00 [DBG] The unchanged property 'Account.Balance' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:54:54.525 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.526 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:54:54.527 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 11:54:54.528 +01:00 [DBG] Created transaction savepoint.
2022-09-26 11:54:54.528 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:54:54.531 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:54:54.534 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-09-26 11:54:54.536 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
UPDATE accounts SET balance = @p0
WHERE id = @p1;
UPDATE accounts SET balance = @p2
WHERE id = @p3;
2022-09-26 11:54:54.537 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
UPDATE accounts SET balance = @p0
WHERE id = @p1;
UPDATE accounts SET balance = @p2
WHERE id = @p3;
2022-09-26 11:54:54.539 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:54:54.539 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 11:54:54.540 +01:00 [DBG] Released transaction savepoint.
2022-09-26 11:54:54.541 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.542 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:54:54.543 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:54:54.544 +01:00 [DBG] Committing transaction.
2022-09-26 11:54:54.547 +01:00 [DBG] Committed transaction.
2022-09-26 11:54:54.550 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:54:54.551 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:54:54.551 +01:00 [DBG] Disposing transaction.
2022-09-26 11:54:54.552 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:54:54.554 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:54:54.554 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:54:54.555 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:54:54.555 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:54:54.556 +01:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:54:54.558 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 161.7693ms
2022-09-26 11:54:54.559 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:54:54.559 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:54:54.560 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:54:54.561 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80 - 201 - application/json;+charset=utf-8 202.1102ms
2022-09-26 11:54:56.446 +01:00 [DBG] Connection id "0HMKVLKUOC5QS" is closing.
2022-09-26 11:54:56.449 +01:00 [DBG] Connection id "0HMKVLKUOC5QS" is closed. The last processed stream ID was 7.
2022-09-26 11:54:56.451 +01:00 [DBG] Connection id "0HMKVLKUOC5QS" received FIN.
2022-09-26 11:54:56.452 +01:00 [DBG] Connection id "0HMKVLKUOC5QS" sending FIN because: "The client closed the connection."
2022-09-26 11:54:56.463 +01:00 [DBG] Connection id "0HMKVLKUOC5QS" stopped.
2022-09-26 11:55:02.033 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80
2022-09-26 11:55:02.036 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:55:02.038 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:55:02.039 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:55:02.041 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:55:02.046 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:55:02.049 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:02.050 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:02.051 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:02.052 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:02.053 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:55:02.055 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:55:02.060 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.061 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:02.062 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:02.062 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:02.063 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:55:02.064 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 11:55:02.066 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:55:02.068 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:55:02.070 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:55:02.073 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:55:02.076 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:55:02.077 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:55:02.078 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:55:02.080 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:55:02.081 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' using the name '' in request data ...
2022-09-26 11:55:02.082 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 11:55:02.083 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:00000009": started reading request body.
2022-09-26 11:55:02.084 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:00000009": done reading request body.
2022-09-26 11:55:02.085 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.TransferRequest'
2022-09-26 11:55:02.085 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:55:02.086 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:55:02.088 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:55:02.091 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:55:02.094 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:02.095 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:55:02.096 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:02.097 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:02.097 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:55:02.100 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:55:02.101 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:02.102 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:02.103 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:02.104 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:02.105 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:02.107 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:02.109 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:02.110 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:55:02.112 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:55:02.114 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.115 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:02.115 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:02.116 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:02.124 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:02.126 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:02.128 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:55:02.130 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:55:02.131 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.132 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.132 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:55:02.133 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:55:02.135 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:55:02.135 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 11:55:02.136 +01:00 [DBG] Created transaction savepoint.
2022-09-26 11:55:02.137 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:02.138 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:02.139 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transfers (amount, currency, from_account_id, to_account_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at;
2022-09-26 11:55:02.142 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transfers (amount, currency, from_account_id, to_account_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at;
2022-09-26 11:55:02.145 +01:00 [DBG] The foreign key property 'Transfer.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:55:02.146 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:02.146 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 11:55:02.147 +01:00 [DBG] Released transaction savepoint.
2022-09-26 11:55:02.148 +01:00 [DBG] An entity of type 'Transfer' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.150 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:55:02.151 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.152 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.153 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.154 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.155 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:55:02.155 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:55:02.157 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:55:02.159 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 11:55:02.161 +01:00 [DBG] Created transaction savepoint.
2022-09-26 11:55:02.161 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:55:02.162 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:02.163 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:02.164 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id;
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p4, @p5, @p6, @p7)
RETURNING id;
2022-09-26 11:55:02.167 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id;
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p4, @p5, @p6, @p7)
RETURNING id;
2022-09-26 11:55:02.169 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:55:02.170 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:55:02.171 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:02.171 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 11:55:02.173 +01:00 [DBG] Released transaction savepoint.
2022-09-26 11:55:02.175 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.177 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.179 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:55:02.181 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:02.182 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:02.182 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:55:02.184 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:55:02.185 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.186 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:02.187 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:02.188 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:02.190 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:55:02.193 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 11:55:02.195 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.196 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:02.197 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:55:02.197 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:55:02.198 +01:00 [DBG] The unchanged property 'Account.Balance' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:55:02.199 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.200 +01:00 [DBG] The unchanged property 'Account.Balance' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:55:02.201 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.202 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:55:02.203 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 11:55:02.203 +01:00 [DBG] Created transaction savepoint.
2022-09-26 11:55:02.204 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:55:02.205 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:02.206 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:02.207 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
UPDATE accounts SET balance = @p0
WHERE id = @p1;
UPDATE accounts SET balance = @p2
WHERE id = @p3;
2022-09-26 11:55:02.210 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
UPDATE accounts SET balance = @p0
WHERE id = @p1;
UPDATE accounts SET balance = @p2
WHERE id = @p3;
2022-09-26 11:55:02.212 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:02.213 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 11:55:02.214 +01:00 [DBG] Released transaction savepoint.
2022-09-26 11:55:02.214 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.215 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:02.217 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:55:02.218 +01:00 [DBG] Committing transaction.
2022-09-26 11:55:02.220 +01:00 [DBG] Committed transaction.
2022-09-26 11:55:02.221 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:02.221 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:02.223 +01:00 [DBG] Disposing transaction.
2022-09-26 11:55:02.224 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:55:02.228 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:55:02.229 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:55:02.229 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:55:02.230 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:55:02.230 +01:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:55:02.231 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 154.2434ms
2022-09-26 11:55:02.232 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:55:02.233 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:55:02.234 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:55:02.234 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80 - 201 - application/json;+charset=utf-8 201.1119ms
2022-09-26 11:55:06.094 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000000 - -
2022-09-26 11:55:06.097 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetById/100000000'
2022-09-26 11:55:06.099 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)' with route pattern 'api/Accounts/GetById/{accountId}' is valid for the request path '/api/Accounts/GetById/100000000'
2022-09-26 11:55:06.102 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 11:55:06.104 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:55:06.107 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:55:06.110 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:06.111 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:06.111 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:06.112 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:06.113 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:55:06.115 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:55:06.116 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:06.118 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:06.119 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:06.120 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:06.121 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 11:55:06.124 +01:00 [INF] Route matched with {action = "GetById", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(Int32) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 11:55:06.125 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:55:06.126 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:55:06.127 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:55:06.128 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:55:06.129 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:55:06.131 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:55:06.131 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:55:06.132 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' ...
2022-09-26 11:55:06.133 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' using the name 'accountId' in request data ...
2022-09-26 11:55:06.135 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 11:55:06.136 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 11:55:06.137 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Int32' ...
2022-09-26 11:55:06.140 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Int32'.
2022-09-26 11:55:06.142 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:06.142 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:06.143 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:06.144 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:06.146 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:55:06.147 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:55:06.149 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:06.150 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:06.150 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:06.151 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:06.152 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:06.154 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:55:06.156 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:06.157 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:06.158 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:55:06.159 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:55:06.162 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:06.162 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:06.163 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:06.164 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:55:06.166 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:55:06.166 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:55:06.167 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:55:06.167 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:55:06.168 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.Responses.AccountMovims'.
2022-09-26 11:55:06.173 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetById (APIBank) in 42.7745ms
2022-09-26 11:55:06.176 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 11:55:06.177 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:55:06.177 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:55:06.178 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000000 - - - 200 - application/json;+charset=utf-8 84.5500ms
2022-09-26 11:55:11.907 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-26 11:55:11.910 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-26 11:55:11.913 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-26 11:55:11.915 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:55:11.917 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:55:11.920 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:55:11.924 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:11.925 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:55:11.927 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:11.928 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:11.929 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:55:11.935 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:55:11.939 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:11.940 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:11.940 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:11.941 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:11.942 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:55:11.943 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 11:55:11.945 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:55:11.946 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:55:11.948 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:55:11.951 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:55:11.952 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:55:11.953 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:55:11.954 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:55:11.955 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:11.956 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:11.957 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:11.958 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:11.959 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:55:11.962 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:55:11.965 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:11.968 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:11.970 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:11.971 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:11.974 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:11.974 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:11.975 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:11.976 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:11.977 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 11:55:11.979 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 11:55:11.982 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:11.985 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:11.986 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:11.987 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:55:11.990 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:55:11.990 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:55:11.991 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:55:11.992 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:55:11.993 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-26 11:55:11.995 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 41.2235ms
2022-09-26 11:55:11.996 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:55:11.997 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:55:11.998 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:55:12.000 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 93.2419ms
2022-09-26 11:55:20.635 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Users/1/refresh-tokens - -
2022-09-26 11:55:20.638 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/1/refresh-tokens'
2022-09-26 11:55:20.639 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.GetRefreshTokens (APIBank)' with route pattern 'api/Users/{id}/refresh-tokens' is valid for the request path '/api/Users/1/refresh-tokens'
2022-09-26 11:55:20.641 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.GetRefreshTokens (APIBank)'
2022-09-26 11:55:20.643 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:55:20.646 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:55:20.649 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:20.650 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:20.651 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:20.652 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:20.653 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:55:20.655 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:55:20.658 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:20.662 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:20.662 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:20.663 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:20.664 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.GetRefreshTokens (APIBank)'
2022-09-26 11:55:20.665 +01:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetRefreshTokens(Int32) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:55:20.667 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:55:20.668 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:55:20.669 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:55:20.671 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:55:20.672 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:55:20.674 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:55:20.677 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:55:20.678 +01:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2022-09-26 11:55:20.679 +01:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2022-09-26 11:55:20.680 +01:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2022-09-26 11:55:20.681 +01:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2022-09-26 11:55:20.683 +01:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2022-09-26 11:55:20.684 +01:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2022-09-26 11:55:20.686 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:20.686 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:20.687 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:20.688 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:20.689 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:55:20.694 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:55:20.697 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:20.697 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:20.698 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:20.699 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:20.700 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:55:20.702 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:55:20.702 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:55:20.703 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:55:20.703 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:55:20.704 +01:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[APIBank.ModelEntities.RefreshToken, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-26 11:55:20.713 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.UserId == __id_0)
    .AsNoTracking()
    .Select(rt => new RefreshToken{ 
        Id = rt.Id, 
        UserId = rt.UserId, 
        RefToken = rt.RefToken, 
        Expires = rt.Expires, 
        Created = rt.Created, 
        CreatedByIp = rt.CreatedByIp, 
        Revoked = rt.Revoked, 
        RevokedByIp = rt.RevokedByIp, 
        ReplacedByToken = rt.ReplacedByToken, 
        ReasonRevoked = rt.ReasonRevoked, 
        IsExpired = rt.IsExpired, 
        IsRevoked = rt.IsRevoked, 
        IsActive = rt.IsActive 
    }
    )'
2022-09-26 11:55:20.718 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Id -> 0
            UserId -> 1
            RefToken -> 2
            Expires -> 3
            Created -> 4
            CreatedByIp -> 5
            Revoked -> 6
            RevokedByIp -> 7
            ReplacedByToken -> 8
            ReasonRevoked -> 9
            IsExpired -> 10
            IsRevoked -> 11
            IsActive -> 12
        SELECT r.id AS Id, r.user_id AS UserId, r.token AS RefToken, r.expires AS Expires, r.created AS Created, r.created_by_ip AS CreatedByIp, r.revoked AS Revoked, r.revoked_by_ip AS RevokedByIp, r.replaced_by_token AS ReplacedByToken, r.reason_revoked AS ReasonRevoked, r.is_expired AS IsExpired, r.is_revoked AS IsRevoked, r.is_active AS IsActive
        FROM refresh_token AS r
        WHERE r.user_id == @__id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-26 11:55:20.731 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:20.732 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:20.735 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:20.737 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:20.739 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:55:20.749 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:55:20.757 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:20.762 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:20.763 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:20.766 +01:00 [INF] Executed action APIBank.Controllers.UsersController.GetRefreshTokens (APIBank) in 92.2127ms
2022-09-26 11:55:20.767 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.GetRefreshTokens (APIBank)'
2022-09-26 11:55:20.770 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:55:20.771 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:55:20.772 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Users/1/refresh-tokens - - - 200 - application/json;+charset=utf-8 137.0741ms
2022-09-26 11:55:38.472 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0
2022-09-26 11:55:38.478 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Logout'
2022-09-26 11:55:38.480 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)' with route pattern 'api/Users/Logout' is valid for the request path '/api/Users/Logout'
2022-09-26 11:55:38.481 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:55:38.483 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:55:38.484 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:55:38.486 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:55:38.489 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:55:38.492 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:55:38.496 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:55:38.499 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:55:38.500 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:55:38.501 +01:00 [INF] Authorization failed for the request at filter 'APIBank.Authorization.AuthorizeAttribute'.
2022-09-26 11:55:38.502 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:55:38.504 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Logout (APIBank) in 2.6333ms
2022-09-26 11:55:38.505 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:55:38.506 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:55:38.506 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0 - 401 - application/json;+charset=utf-8 34.1950ms
2022-09-26 11:55:41.832 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0
2022-09-26 11:55:41.834 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/refreshToken'
2022-09-26 11:55:41.835 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)' with route pattern 'api/Users/refreshToken' is valid for the request path '/api/Users/refreshToken'
2022-09-26 11:55:41.837 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:55:41.837 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:55:41.839 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:55:41.841 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RefreshToken() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:55:41.843 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:55:41.844 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:55:41.845 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:55:41.847 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:55:41.848 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:55:41.849 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:55:41.850 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:55:41.852 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:55:41.854 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:41.856 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:55:41.858 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:41.859 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:41.859 +01:00 [DBG] Executing DbCommand [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:55:41.862 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:55:41.863 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:41.864 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:41.864 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:41.865 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:41.866 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:41.867 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:41.867 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:41.868 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:41.869 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:55:41.872 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:55:41.875 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:41.876 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:41.877 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:41.878 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:41.879 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:41.879 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:41.880 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:41.881 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:55:41.883 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:55:41.885 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:41.886 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:41.886 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:41.888 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:41.889 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:55:41.892 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:41.893 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:41.894 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:55:41.896 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:55:41.897 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:41.898 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:41.899 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:41.900 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:41.901 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:55:41.902 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:55:41.904 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:41.909 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:41.912 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:41.913 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:55:41.914 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:55:41.914 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:41.915 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:55:41.916 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:55:41.917 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:55:41.918 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:55:41.918 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:55:41.919 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 11:55:41.924 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 11:55:41.928 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:55:41.929 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:55:41.929 +01:00 [DBG] Committing transaction.
2022-09-26 11:55:41.931 +01:00 [DBG] Committed transaction.
2022-09-26 11:55:41.931 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:55:41.932 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:55:41.932 +01:00 [DBG] Disposing transaction.
2022-09-26 11:55:41.933 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:41.934 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:55:41.935 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:55:41.937 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:55:41.942 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:55:41.943 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:55:41.943 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:55:41.944 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:55:41.945 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-26 11:55:41.946 +01:00 [INF] Executed action APIBank.Controllers.UsersController.RefreshToken (APIBank) in 97.2113ms
2022-09-26 11:55:41.947 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:55:41.948 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:55:41.949 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:55:41.950 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0 - 200 - application/json;+charset=utf-8 117.4727ms
2022-09-26 11:55:53.952 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0
2022-09-26 11:55:53.954 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Logout'
2022-09-26 11:55:53.957 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)' with route pattern 'api/Users/Logout' is valid for the request path '/api/Users/Logout'
2022-09-26 11:55:53.958 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:55:53.959 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:55:53.962 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:55:53.965 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:55:53.968 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:55:53.969 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:55:53.969 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:55:53.971 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:55:53.971 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:55:53.973 +01:00 [INF] Authorization failed for the request at filter 'APIBank.Authorization.AuthorizeAttribute'.
2022-09-26 11:55:53.974 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:55:53.974 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Logout (APIBank) in 1.4796ms
2022-09-26 11:55:53.975 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:55:53.976 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:55:53.978 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0 - 401 - application/json;+charset=utf-8 26.4593ms
2022-09-26 11:56:05.913 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Users/Logout - -
2022-09-26 11:56:05.918 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Logout'
2022-09-26 11:56:05.922 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-09-26 11:56:05.923 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:56:05.924 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2022-09-26 11:56:05.925 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2022-09-26 11:56:05.926 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:56:05.927 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Users/Logout - - - 405 0 - 13.5509ms
2022-09-26 11:56:17.494 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0
2022-09-26 11:56:17.498 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Logout'
2022-09-26 11:56:17.500 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)' with route pattern 'api/Users/Logout' is valid for the request path '/api/Users/Logout'
2022-09-26 11:56:17.503 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:56:17.503 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:56:17.504 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:56:17.505 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:56:17.507 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:56:17.511 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:56:17.512 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:56:17.513 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:56:17.516 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:56:17.517 +01:00 [INF] Authorization failed for the request at filter 'APIBank.Authorization.AuthorizeAttribute'.
2022-09-26 11:56:17.517 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:56:17.518 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Logout (APIBank) in 1.7877ms
2022-09-26 11:56:17.520 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:56:17.521 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:56:17.522 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0 - 401 - application/json;+charset=utf-8 28.2178ms
2022-09-26 11:56:43.503 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0
2022-09-26 11:56:43.507 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Logout'
2022-09-26 11:56:43.508 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)' with route pattern 'api/Users/Logout' is valid for the request path '/api/Users/Logout'
2022-09-26 11:56:43.509 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:56:43.510 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:56:43.511 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:56:43.512 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:56:43.513 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:56:43.515 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:56:43.516 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:56:43.517 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:56:43.519 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:56:43.521 +01:00 [INF] Authorization failed for the request at filter 'APIBank.Authorization.AuthorizeAttribute'.
2022-09-26 11:56:43.522 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:56:43.523 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Logout (APIBank) in 1.6212ms
2022-09-26 11:56:43.524 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:56:43.524 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:56:43.526 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0 - 401 - application/json;+charset=utf-8 23.0237ms
2022-09-26 11:56:48.544 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0
2022-09-26 11:56:48.550 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Logout'
2022-09-26 11:56:48.553 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)' with route pattern 'api/Users/Logout' is valid for the request path '/api/Users/Logout'
2022-09-26 11:56:48.557 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:56:48.559 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:56:48.561 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:56:48.566 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:56:48.570 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:56:48.571 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:56:48.572 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:56:48.573 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:56:48.574 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:56:48.575 +01:00 [INF] Authorization failed for the request at filter 'APIBank.Authorization.AuthorizeAttribute'.
2022-09-26 11:56:48.576 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:56:48.577 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Logout (APIBank) in 1.9602ms
2022-09-26 11:56:48.578 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:56:48.582 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:56:48.584 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0 - 401 - application/json;+charset=utf-8 39.9729ms
2022-09-26 11:56:53.156 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0
2022-09-26 11:56:53.158 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/refreshToken'
2022-09-26 11:56:53.158 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)' with route pattern 'api/Users/refreshToken' is valid for the request path '/api/Users/refreshToken'
2022-09-26 11:56:53.160 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:56:53.163 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:56:53.166 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:56:53.168 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RefreshToken() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:56:53.171 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:56:53.173 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:56:53.175 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:56:53.178 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:56:53.181 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:56:53.183 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:56:53.184 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:56:53.187 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:56:53.188 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:56:53.189 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:56:53.190 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:56:53.191 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:56:53.192 +01:00 [DBG] Executing DbCommand [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:56:53.198 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:56:53.199 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:56:53.201 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:56:53.201 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:56:53.202 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:56:53.203 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:56:53.203 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:56:53.204 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:56:53.205 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:56:53.206 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:56:53.208 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:56:53.214 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:56:53.214 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:56:53.215 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:56:53.217 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:56:53.217 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:56:53.218 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:56:53.219 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:56:53.219 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:56:53.221 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 11:56:53.223 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:56:53.224 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:56:53.225 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:56:53.227 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:56:53.229 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:56:53.230 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:56:53.231 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:56:53.232 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:56:53.234 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:56:53.236 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:56:53.237 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:56:53.237 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:56:53.238 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:56:53.240 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:56:53.241 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:56:53.242 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:56:53.244 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:56:53.246 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:56:53.248 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:56:53.249 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:56:53.250 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:56:53.250 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:56:53.251 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:56:53.252 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:56:53.253 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:56:53.253 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:56:53.255 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 11:56:53.257 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 11:56:53.260 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:56:53.263 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:56:53.264 +01:00 [DBG] Committing transaction.
2022-09-26 11:56:53.266 +01:00 [DBG] Committed transaction.
2022-09-26 11:56:53.267 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:56:53.268 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:56:53.268 +01:00 [DBG] Disposing transaction.
2022-09-26 11:56:53.270 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:56:53.271 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:56:53.272 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:56:53.273 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:56:53.275 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:56:53.276 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:56:53.277 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:56:53.277 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:56:53.280 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-26 11:56:53.282 +01:00 [INF] Executed action APIBank.Controllers.UsersController.RefreshToken (APIBank) in 98.4638ms
2022-09-26 11:56:53.283 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:56:53.283 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:56:53.284 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:56:53.286 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0 - 200 - application/json;+charset=utf-8 129.6344ms
2022-09-26 11:57:05.663 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0
2022-09-26 11:57:05.666 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Logout'
2022-09-26 11:57:05.669 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)' with route pattern 'api/Users/Logout' is valid for the request path '/api/Users/Logout'
2022-09-26 11:57:05.671 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:57:05.671 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:57:05.673 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:57:05.676 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:05.676 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:05.677 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:05.678 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:05.679 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:05.682 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:05.686 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:05.688 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:05.688 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:05.689 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:05.690 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:57:05.691 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:57:05.692 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:57:05.693 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:57:05.694 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:57:05.695 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:57:05.696 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:57:05.696 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:57:05.697 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:57:05.701 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:05.702 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:57:05.704 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:05.705 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:05.706 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:05.708 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:05.709 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:05.710 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:05.711 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:05.712 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:05.714 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:05.715 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:57:05.717 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:05.720 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:05.721 +01:00 [DBG] Executing DbCommand [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:57:05.723 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:57:05.724 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:05.724 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:05.725 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:05.726 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:05.727 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:05.727 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:05.728 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:05.729 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:57:05.731 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:57:05.733 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:05.735 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:05.737 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:05.739 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:57:05.740 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:57:05.741 +01:00 [DBG] The unchanged property 'RefreshToken.IsActive' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:57:05.742 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:05.743 +01:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:57:05.744 +01:00 [DBG] The unchanged property 'RefreshToken.ReasonRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:57:05.745 +01:00 [DBG] The unchanged property 'RefreshToken.Revoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:57:05.746 +01:00 [DBG] The unchanged property 'RefreshToken.RevokedByIp' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:57:05.747 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:57:05.747 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:05.749 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:05.752 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:57:05.754 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:57:05.754 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:05.755 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:05.756 +01:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?', @p3='?' (DbType = DateTime), @p4='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET is_active = @p0, is_revoked = @p1, reason_revoked = @p2, revoked = @p3, revoked_by_ip = @p4
WHERE id = @p5;
2022-09-26 11:57:05.757 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?', @p3='?' (DbType = DateTime), @p4='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET is_active = @p0, is_revoked = @p1, reason_revoked = @p2, revoked = @p3, revoked_by_ip = @p4
WHERE id = @p5;
2022-09-26 11:57:05.759 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:05.759 +01:00 [DBG] Committing transaction.
2022-09-26 11:57:05.760 +01:00 [DBG] Committed transaction.
2022-09-26 11:57:05.760 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:05.761 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:05.762 +01:00 [DBG] Disposing transaction.
2022-09-26 11:57:05.762 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:05.763 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:57:05.764 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:57:05.767 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:57:05.768 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:57:05.769 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:57:05.769 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:57:05.770 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:57:05.771 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Logout (APIBank) in 74.6189ms
2022-09-26 11:57:05.772 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:57:05.772 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:57:05.773 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:57:05.774 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0 - 200 - application/json;+charset=utf-8 111.0209ms
2022-09-26 11:57:09.726 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-26 11:57:09.729 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-26 11:57:09.731 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-26 11:57:09.734 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:57:09.735 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:57:09.737 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:57:09.741 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:09.744 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:57:09.746 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:09.748 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:09.750 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:09.754 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:09.758 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:09.759 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:09.760 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:09.761 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:09.763 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:57:09.766 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 11:57:09.768 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:57:09.769 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:57:09.770 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:57:09.771 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:57:09.772 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:57:09.773 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:57:09.774 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:57:09.776 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:09.777 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:09.778 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:09.780 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:09.782 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:09.784 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:09.785 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:09.786 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:09.787 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:09.788 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:09.789 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:57:09.790 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:57:09.791 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-26 11:57:09.793 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-26 11:57:09.793 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-09-26 11:57:09.796 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 22.3014ms
2022-09-26 11:57:09.798 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:57:09.799 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:57:09.800 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:57:09.801 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - - - 401 - application/problem+json;+charset=utf-8 74.7266ms
2022-09-26 11:57:18.100 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Users/1/refresh-tokens - -
2022-09-26 11:57:18.102 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/1/refresh-tokens'
2022-09-26 11:57:18.104 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.GetRefreshTokens (APIBank)' with route pattern 'api/Users/{id}/refresh-tokens' is valid for the request path '/api/Users/1/refresh-tokens'
2022-09-26 11:57:18.106 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.GetRefreshTokens (APIBank)'
2022-09-26 11:57:18.108 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:57:18.111 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:57:18.114 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:18.115 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:57:18.115 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:18.116 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:18.117 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:18.118 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:18.120 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:18.121 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:18.122 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:18.125 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:18.126 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.GetRefreshTokens (APIBank)'
2022-09-26 11:57:18.126 +01:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetRefreshTokens(Int32) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:57:18.128 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:57:18.129 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:57:18.129 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:57:18.130 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:57:18.131 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:57:18.132 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:57:18.133 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:57:18.133 +01:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2022-09-26 11:57:18.134 +01:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2022-09-26 11:57:18.135 +01:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2022-09-26 11:57:18.136 +01:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2022-09-26 11:57:18.136 +01:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2022-09-26 11:57:18.138 +01:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2022-09-26 11:57:18.140 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:18.142 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:57:18.143 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:18.144 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:18.144 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:18.146 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:18.148 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:18.149 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:18.149 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:18.150 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:18.151 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:57:18.153 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:57:18.154 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-26 11:57:18.159 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-26 11:57:18.161 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-09-26 11:57:18.164 +01:00 [INF] Executed action APIBank.Controllers.UsersController.GetRefreshTokens (APIBank) in 31.7031ms
2022-09-26 11:57:18.165 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.GetRefreshTokens (APIBank)'
2022-09-26 11:57:18.166 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:57:18.168 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:57:18.170 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Users/1/refresh-tokens - - - 401 - application/problem+json;+charset=utf-8 69.8020ms
2022-09-26 11:57:22.790 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0
2022-09-26 11:57:22.793 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Logout'
2022-09-26 11:57:22.796 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)' with route pattern 'api/Users/Logout' is valid for the request path '/api/Users/Logout'
2022-09-26 11:57:22.797 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:57:22.797 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:57:22.799 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:57:22.802 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:22.805 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:57:22.805 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:22.806 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:22.807 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:22.808 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:22.810 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:22.811 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:22.811 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:22.812 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:22.812 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:57:22.814 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:57:22.815 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:57:22.816 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:57:22.817 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:57:22.820 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:57:22.821 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:57:22.822 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:57:22.823 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:57:22.824 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:22.825 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:22.825 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:22.826 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:22.827 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:22.829 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:22.830 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:22.831 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:22.832 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:22.833 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:22.835 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:57:22.838 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:57:22.838 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-26 11:57:22.840 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-26 11:57:22.841 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-09-26 11:57:22.842 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Logout (APIBank) in 20.4013ms
2022-09-26 11:57:22.843 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 11:57:22.845 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:57:22.845 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:57:22.846 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0 - 401 - application/problem+json;+charset=utf-8 55.6681ms
2022-09-26 11:57:25.817 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0
2022-09-26 11:57:25.821 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/refreshToken'
2022-09-26 11:57:25.823 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)' with route pattern 'api/Users/refreshToken' is valid for the request path '/api/Users/refreshToken'
2022-09-26 11:57:25.824 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:57:25.825 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:57:25.825 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:57:25.826 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RefreshToken() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:57:25.827 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:57:25.828 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:57:25.829 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:57:25.832 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:57:25.833 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:57:25.836 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:57:25.837 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:57:25.838 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:57:25.840 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:25.841 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:57:25.842 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:25.843 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:25.843 +01:00 [DBG] Executing DbCommand [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:57:25.845 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 11:57:25.848 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:25.850 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:25.852 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:25.852 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:25.853 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:25.854 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:25.855 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:25.856 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:25.857 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:57:25.859 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 11:57:25.861 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:25.861 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:25.862 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:25.863 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:25.866 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:25.869 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:57:25.869 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:57:25.870 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:57:25.871 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:25.872 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:25.873 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:57:25.873 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:57:25.874 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 11:57:25.875 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:25.876 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:25.877 +01:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-26 11:57:25.879 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-26 11:57:25.882 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:25.883 +01:00 [DBG] Committing transaction.
2022-09-26 11:57:25.886 +01:00 [DBG] Committed transaction.
2022-09-26 11:57:25.887 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:25.888 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:25.889 +01:00 [DBG] Disposing transaction.
2022-09-26 11:57:25.889 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:25.890 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:25.892 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 11:57:25.893 +01:00 [INF] Executed action APIBank.Controllers.UsersController.RefreshToken (APIBank) in 56.8981ms
2022-09-26 11:57:25.894 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 11:57:25.895 +01:00 [INF] Global Error was found:
2022-09-26 11:57:25.896 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:57:25.896 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:57:25.898 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0 - 400 - application/json 81.3410ms
2022-09-26 11:57:29.883 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Accounts/Create application/json 44
2022-09-26 11:57:29.884 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/Create'
2022-09-26 11:57:29.887 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)' with route pattern 'api/Accounts/Create' is valid for the request path '/api/Accounts/Create'
2022-09-26 11:57:29.888 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 11:57:29.889 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:57:29.891 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:57:29.899 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:29.901 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:57:29.903 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:29.904 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:29.906 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:29.907 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:29.909 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:29.909 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:29.910 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:29.911 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:29.914 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 11:57:29.916 +01:00 [INF] Route matched with {action = "Create", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.AccountCreateRequest) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 11:57:29.917 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:57:29.918 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:57:29.919 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:57:29.921 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:57:29.922 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:57:29.923 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:57:29.924 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:57:29.925 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-26 11:57:29.926 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' using the name '' in request data ...
2022-09-26 11:57:29.928 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 11:57:29.930 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:0000001A": started reading request body.
2022-09-26 11:57:29.931 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:0000001A": done reading request body.
2022-09-26 11:57:29.933 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.AccountCreateRequest'
2022-09-26 11:57:29.933 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 11:57:29.934 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 11:57:29.935 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-26 11:57:29.939 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 11:57:29.941 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:29.941 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:29.942 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:29.943 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:29.944 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:29.948 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:29.950 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:29.952 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:29.953 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:29.953 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:29.954 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:57:29.956 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:57:29.956 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-26 11:57:29.959 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-26 11:57:29.960 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-09-26 11:57:29.962 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.Create (APIBank) in 38.8134ms
2022-09-26 11:57:29.964 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 11:57:29.965 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:57:29.966 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:57:29.967 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Accounts/Create application/json 44 - 401 - application/problem+json;+charset=utf-8 84.4038ms
2022-09-26 11:57:32.932 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-26 11:57:32.934 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-26 11:57:32.935 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-26 11:57:32.937 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:57:32.938 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:57:32.940 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:57:32.944 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:32.947 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 11:57:32.948 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:32.949 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:32.950 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:32.952 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:32.953 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:32.954 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:32.955 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:32.956 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:32.956 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:57:32.957 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 11:57:32.960 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:57:32.961 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:57:32.962 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:57:32.963 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:57:32.964 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:57:32.965 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:57:32.966 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:57:32.968 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:32.969 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:32.969 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:32.970 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:32.971 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:32.973 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:32.975 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:32.977 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:32.978 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:32.979 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:32.980 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:57:32.982 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:57:32.982 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-26 11:57:32.984 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-26 11:57:32.985 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-09-26 11:57:32.986 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 21.0469ms
2022-09-26 11:57:32.987 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 11:57:32.988 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:57:32.989 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:57:32.989 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - - - 401 - application/problem+json;+charset=utf-8 57.5325ms
2022-09-26 11:57:35.702 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000000 - -
2022-09-26 11:57:35.704 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetById/100000000'
2022-09-26 11:57:35.710 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)' with route pattern 'api/Accounts/GetById/{accountId}' is valid for the request path '/api/Accounts/GetById/100000000'
2022-09-26 11:57:35.713 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 11:57:35.714 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:57:35.718 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:57:35.732 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:35.733 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:57:35.735 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:35.736 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:35.738 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:35.744 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:35.746 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:35.747 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:35.747 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:35.748 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:35.749 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 11:57:35.750 +01:00 [INF] Route matched with {action = "GetById", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(Int32) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 11:57:35.752 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:57:35.754 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:57:35.757 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:57:35.760 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:57:35.761 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:57:35.763 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:57:35.763 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 11:57:35.764 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' ...
2022-09-26 11:57:35.765 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' using the name 'accountId' in request data ...
2022-09-26 11:57:35.766 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 11:57:35.767 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 11:57:35.768 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Int32' ...
2022-09-26 11:57:35.769 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Int32'.
2022-09-26 11:57:35.771 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:35.773 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 11:57:35.775 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:35.777 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:35.778 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:35.780 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:35.782 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:35.783 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:35.783 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:35.785 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:35.786 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:57:35.788 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:57:35.789 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-26 11:57:35.791 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-26 11:57:35.794 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-09-26 11:57:35.795 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetById (APIBank) in 32.8034ms
2022-09-26 11:57:35.797 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 11:57:35.798 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:57:35.799 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:57:35.799 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000000 - - - 401 - application/problem+json;+charset=utf-8 96.9837ms
2022-09-26 11:57:38.380 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80
2022-09-26 11:57:38.385 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:57:38.388 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 11:57:38.391 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:57:38.393 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:57:38.395 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:57:38.397 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:38.398 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:38.399 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:38.399 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:38.400 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:38.404 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 11:57:38.408 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:38.409 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:38.410 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:38.410 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:38.411 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:57:38.412 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 11:57:38.413 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:57:38.414 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:57:38.415 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:57:38.417 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:57:38.418 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:57:38.419 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:57:38.420 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 11:57:38.421 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:57:38.423 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' using the name '' in request data ...
2022-09-26 11:57:38.424 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 11:57:38.425 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:0000001D": started reading request body.
2022-09-26 11:57:38.426 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:0000001D": done reading request body.
2022-09-26 11:57:38.427 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.TransferRequest'
2022-09-26 11:57:38.427 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:57:38.428 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:57:38.429 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 11:57:38.429 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 11:57:38.430 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:38.431 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:38.432 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:38.432 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:38.434 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:57:38.435 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 11:57:38.438 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:38.440 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:38.440 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:38.442 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:38.442 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:38.443 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:38.444 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:38.444 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:38.446 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 11:57:38.447 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:38.449 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:38.449 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:38.450 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:38.451 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:57:38.452 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:57:38.453 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-26 11:57:38.456 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-26 11:57:38.457 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-09-26 11:57:38.458 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 39.2063ms
2022-09-26 11:57:38.459 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 11:57:38.460 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:57:38.460 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:57:38.461 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80 - 401 - application/problem+json;+charset=utf-8 80.9652ms
2022-09-26 11:57:43.224 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Create application/json 162
2022-09-26 11:57:43.226 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Create'
2022-09-26 11:57:43.227 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Create (APIBank)' with route pattern 'api/Users/Create' is valid for the request path '/api/Users/Create'
2022-09-26 11:57:43.229 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Create (APIBank)'
2022-09-26 11:57:43.230 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 11:57:43.231 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Create (APIBank)'
2022-09-26 11:57:43.239 +01:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.UserCreateRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 11:57:43.242 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 11:57:43.245 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 11:57:43.246 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 11:57:43.250 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 11:57:43.254 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 11:57:43.258 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:57:43.259 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 11:57:43.260 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest' ...
2022-09-26 11:57:43.262 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest' using the name '' in request data ...
2022-09-26 11:57:43.265 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 11:57:43.268 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:0000001E": started reading request body.
2022-09-26 11:57:43.273 +01:00 [DBG] Connection id "0HMKVLKUOC5QU", Request id "0HMKVLKUOC5QU:0000001E": done reading request body.
2022-09-26 11:57:43.274 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserCreateRequest'
2022-09-26 11:57:43.275 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest'.
2022-09-26 11:57:43.276 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest'.
2022-09-26 11:57:43.277 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest' ...
2022-09-26 11:57:43.279 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest'.
2022-09-26 11:57:43.282 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 11:57:43.286 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(x => x.Username == __model_Username_0)'
2022-09-26 11:57:43.289 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM users AS u
            WHERE u.username == @__model_Username_0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .Single()'
2022-09-26 11:57:43.290 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:43.291 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:43.291 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:43.292 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:43.293 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE u.username = @__model_Username_0)
2022-09-26 11:57:43.295 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE u.username = @__model_Username_0)
2022-09-26 11:57:43.297 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:43.297 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:43.298 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:43.299 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(x => x.Email == __model_Email_0)'
2022-09-26 11:57:43.303 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM users AS u
            WHERE u.email == @__model_Email_0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .Single()'
2022-09-26 11:57:43.306 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:43.306 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:43.307 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:43.308 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:43.309 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE u.email = @__model_Email_0)
2022-09-26 11:57:43.311 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE u.email = @__model_Email_0)
2022-09-26 11:57:43.312 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:43.313 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:43.314 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:43.518 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:43.526 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:43.529 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 11:57:43.530 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 11:57:43.532 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 11:57:43.534 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 11:57:43.536 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:43.538 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 11:57:43.538 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 11:57:43.539 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 11:57:43.540 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 11:57:43.540 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO users (email, full_name, password_hash, username)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at, password_changed_at;
2022-09-26 11:57:43.543 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO users (email, full_name, password_hash, username)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at, password_changed_at;
2022-09-26 11:57:43.546 +01:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 11:57:43.548 +01:00 [DBG] A data reader was disposed.
2022-09-26 11:57:43.548 +01:00 [DBG] Committing transaction.
2022-09-26 11:57:43.551 +01:00 [DBG] Committed transaction.
2022-09-26 11:57:43.552 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 11:57:43.553 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 11:57:43.554 +01:00 [DBG] Disposing transaction.
2022-09-26 11:57:43.555 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 11:57:43.557 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 11:57:43.558 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 11:57:43.559 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 11:57:43.559 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 11:57:43.560 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 11:57:43.561 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 11:57:43.562 +01:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 11:57:43.563 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Create (APIBank) in 304.5359ms
2022-09-26 11:57:43.563 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Create (APIBank)'
2022-09-26 11:57:43.564 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" completed keep alive response.
2022-09-26 11:57:43.566 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 11:57:43.568 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Create application/json 162 - 201 - application/json;+charset=utf-8 343.7816ms
2022-09-26 11:59:55.482 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" disconnecting.
2022-09-26 11:59:55.488 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" stopped.
2022-09-26 11:59:55.489 +01:00 [DBG] Connection id "0HMKVLKUOC5QU" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-26 13:45:52.955 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-09-26 13:45:53.042 +01:00 [DBG] Hosting starting
2022-09-26 13:45:53.144 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9CC642E9838495A6C3C202DECA6A8AD300396DD2)
2022-09-26 13:45:53.199 +01:00 [INF] Now listening on: https://localhost:7036
2022-09-26 13:45:53.202 +01:00 [INF] Now listening on: http://localhost:5036
2022-09-26 13:45:53.205 +01:00 [DBG] Loaded hosting startup assembly APIBank
2022-09-26 13:45:53.207 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-09-26 13:45:53.208 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-09-26 13:45:53.209 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-26 13:45:53.210 +01:00 [INF] Hosting environment: Development
2022-09-26 13:45:53.210 +01:00 [INF] Content root path: C:\Users\mguedesa\OneDrive - NTT DATA EMEAL\Documentos\GitHub\OpenBankAPI-NTT\APIBank\APIBank\
2022-09-26 13:45:53.211 +01:00 [DBG] Hosting started
2022-09-26 13:45:53.630 +01:00 [DBG] Connection id "0HMKVNK6AFECC" received FIN.
2022-09-26 13:45:53.630 +01:00 [DBG] Connection id "0HMKVNK6AFECD" received FIN.
2022-09-26 13:45:53.638 +01:00 [DBG] Connection id "0HMKVNK6AFECC" accepted.
2022-09-26 13:45:53.638 +01:00 [DBG] Connection id "0HMKVNK6AFECD" accepted.
2022-09-26 13:45:53.640 +01:00 [DBG] Connection id "0HMKVNK6AFECC" started.
2022-09-26 13:45:53.641 +01:00 [DBG] Connection id "0HMKVNK6AFECD" started.
2022-09-26 13:45:53.660 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-26 13:45:53.660 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-26 13:45:53.688 +01:00 [DBG] Connection id "0HMKVNK6AFECD" stopped.
2022-09-26 13:45:53.688 +01:00 [DBG] Connection id "0HMKVNK6AFECC" stopped.
2022-09-26 13:45:53.692 +01:00 [DBG] Connection id "0HMKVNK6AFECC" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-26 13:45:53.692 +01:00 [DBG] Connection id "0HMKVNK6AFECD" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-26 13:45:53.840 +01:00 [DBG] Connection id "0HMKVNK6AFECE" accepted.
2022-09-26 13:45:53.843 +01:00 [DBG] Connection id "0HMKVNK6AFECE" started.
2022-09-26 13:45:54.046 +01:00 [DBG] Connection 0HMKVNK6AFECE established using the following protocol: "Tls12"
2022-09-26 13:45:54.132 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/index.html - -
2022-09-26 13:45:54.175 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-09-26 13:45:54.204 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-09-26 13:45:54.208 +01:00 [DBG] Request did not match any endpoints
2022-09-26 13:45:54.303 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-09-26 13:45:54.398 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-09-26 13:45:54.409 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/index.html - - - 200 - text/html;charset=utf-8 283.7769ms
2022-09-26 13:45:54.447 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - -
2022-09-26 13:45:54.452 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 5.0669ms
2022-09-26 13:45:54.460 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_vs/browserLink - -
2022-09-26 13:45:54.484 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.6939ms
2022-09-26 13:45:54.610 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - -
2022-09-26 13:45:54.614 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-09-26 13:45:54.615 +01:00 [DBG] Request did not match any endpoints
2022-09-26 13:45:54.777 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 170.1649ms
2022-09-26 13:46:02.233 +01:00 [DBG] Connection id "0HMKVNK6AFECF" accepted.
2022-09-26 13:46:02.234 +01:00 [DBG] Connection id "0HMKVNK6AFECF" received FIN.
2022-09-26 13:46:02.237 +01:00 [DBG] Connection id "0HMKVNK6AFECF" started.
2022-09-26 13:46:02.237 +01:00 [DBG] Connection id "0HMKVNK6AFECG" accepted.
2022-09-26 13:46:02.239 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-26 13:46:02.240 +01:00 [DBG] Connection id "0HMKVNK6AFECG" started.
2022-09-26 13:46:02.242 +01:00 [DBG] Connection id "0HMKVNK6AFECF" stopped.
2022-09-26 13:46:02.244 +01:00 [DBG] Connection id "0HMKVNK6AFECF" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-26 13:46:02.249 +01:00 [DBG] Connection 0HMKVNK6AFECG established using the following protocol: "Tls12"
2022-09-26 13:46:02.257 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Create application/json 166
2022-09-26 13:46:02.266 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Create'
2022-09-26 13:46:02.272 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Create (APIBank)' with route pattern 'api/Users/Create' is valid for the request path '/api/Users/Create'
2022-09-26 13:46:02.274 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Create (APIBank)'
2022-09-26 13:46:02.276 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:46:02.525 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Create (APIBank)'
2022-09-26 13:46:02.550 +01:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.UserCreateRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 13:46:02.554 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:46:02.556 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:46:02.557 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:46:02.559 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:46:02.560 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:46:02.562 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 13:46:02.567 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 13:46:02.573 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest' ...
2022-09-26 13:46:02.576 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest' using the name '' in request data ...
2022-09-26 13:46:02.578 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 13:46:02.585 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:00000002": started reading request body.
2022-09-26 13:46:02.586 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:00000002": done reading request body.
2022-09-26 13:46:02.591 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserCreateRequest'
2022-09-26 13:46:02.592 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest'.
2022-09-26 13:46:02.593 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest'.
2022-09-26 13:46:02.595 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest' ...
2022-09-26 13:46:02.605 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest'.
2022-09-26 13:46:02.662 +01:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'.
2022-09-26 13:46:03.498 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:46:03.539 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(x => x.Username == __model_Username_0)'
2022-09-26 13:46:03.750 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM users AS u
            WHERE u.username == @__model_Username_0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .Single()'
2022-09-26 13:46:03.784 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:03.816 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (28ms).
2022-09-26 13:46:03.822 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:04.156 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:04.175 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE u.username = @__model_Username_0)
2022-09-26 13:46:04.272 +01:00 [INF] Executed DbCommand (102ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE u.username = @__model_Username_0)
2022-09-26 13:46:04.292 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:04.297 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:04.301 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:04.302 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(x => x.Email == __model_Email_0)'
2022-09-26 13:46:04.307 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM users AS u
            WHERE u.email == @__model_Email_0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .Single()'
2022-09-26 13:46:04.309 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:04.310 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:46:04.313 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:04.315 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:04.317 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE u.email = @__model_Email_0)
2022-09-26 13:46:04.320 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE u.email = @__model_Email_0)
2022-09-26 13:46:04.322 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:04.322 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:04.323 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:04.572 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:04.651 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:04.656 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:46:04.658 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:46:04.669 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:46:04.677 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:04.680 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:04.682 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 13:46:04.688 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 13:46:04.729 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:04.732 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-09-26 13:46:04.734 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO users (email, full_name, password_hash, username)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at, password_changed_at;
2022-09-26 13:46:04.737 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO users (email, full_name, password_hash, username)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at, password_changed_at;
2022-09-26 13:46:04.753 +01:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:46:04.760 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:04.765 +01:00 [DBG] Committing transaction.
2022-09-26 13:46:04.770 +01:00 [DBG] Committed transaction.
2022-09-26 13:46:04.771 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:04.772 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:04.774 +01:00 [DBG] Disposing transaction.
2022-09-26 13:46:04.791 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:04.797 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 13:46:04.800 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:46:04.805 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:46:04.806 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:46:04.808 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:46:04.817 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:46:04.820 +01:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 13:46:04.833 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Create (APIBank) in 2266.0096ms
2022-09-26 13:46:04.838 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Create (APIBank)'
2022-09-26 13:46:04.839 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:46:04.842 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:46:04.849 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Create application/json 166 - 201 - application/json;+charset=utf-8 2591.5980ms
2022-09-26 13:46:17.941 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Create application/json 166
2022-09-26 13:46:17.945 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Create'
2022-09-26 13:46:17.947 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Create (APIBank)' with route pattern 'api/Users/Create' is valid for the request path '/api/Users/Create'
2022-09-26 13:46:17.948 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Create (APIBank)'
2022-09-26 13:46:17.950 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:46:17.962 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Create (APIBank)'
2022-09-26 13:46:17.963 +01:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.UserCreateRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 13:46:17.965 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:46:17.967 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:46:17.970 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:46:17.973 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:46:17.974 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:46:17.977 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 13:46:17.978 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 13:46:17.979 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest' ...
2022-09-26 13:46:17.981 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest' using the name '' in request data ...
2022-09-26 13:46:17.982 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 13:46:17.984 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:00000003": started reading request body.
2022-09-26 13:46:17.986 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:00000003": done reading request body.
2022-09-26 13:46:17.989 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserCreateRequest'
2022-09-26 13:46:17.990 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest'.
2022-09-26 13:46:17.991 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest'.
2022-09-26 13:46:17.992 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest' ...
2022-09-26 13:46:17.994 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserCreateRequest'.
2022-09-26 13:46:17.998 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:46:18.006 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:18.008 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:46:18.010 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:18.011 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:18.012 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE u.username = @__model_Username_0)
2022-09-26 13:46:18.014 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE u.username = @__model_Username_0)
2022-09-26 13:46:18.017 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:18.020 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:18.021 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:18.023 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Create (APIBank) in 46.9318ms
2022-09-26 13:46:18.025 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Create (APIBank)'
2022-09-26 13:46:18.026 +01:00 [INF] Global Error was found:
2022-09-26 13:46:18.027 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:46:18.028 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:46:18.030 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Create application/json 166 - 400 - application/json 88.5136ms
2022-09-26 13:46:29.490 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Login application/json 65
2022-09-26 13:46:29.495 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-26 13:46:29.497 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-26 13:46:29.499 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 13:46:29.500 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:46:29.502 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 13:46:29.504 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 13:46:29.507 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:46:29.510 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:46:29.512 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:46:29.514 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:46:29.515 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:46:29.517 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 13:46:29.518 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 13:46:29.519 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-26 13:46:29.520 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-26 13:46:29.522 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 13:46:29.524 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:00000004": started reading request body.
2022-09-26 13:46:29.528 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:00000004": done reading request body.
2022-09-26 13:46:29.531 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-26 13:46:29.533 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 13:46:29.535 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 13:46:29.536 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-26 13:46:29.542 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-26 13:46:29.611 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:46:29.616 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(x => x.Username == __model_Username_0)'
2022-09-26 13:46:29.651 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.username == @__model_Username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 13:46:29.659 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:29.661 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 13:46:29.662 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:29.663 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:29.664 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-26 13:46:29.666 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-26 13:46:29.672 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:29.675 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:29.677 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:29.678 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:29.871 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(user => user.RefreshTokenCollection
        .Any(reftoken => reftoken.RefToken == __token_0))'
2022-09-26 13:46:29.926 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM users AS u
            WHERE EXISTS (
                SELECT 1
                FROM refresh_token AS r
                WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__token_0)))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .Single()'
2022-09-26 13:46:29.933 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:29.934 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:46:29.935 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:29.935 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:29.936 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 13:46:29.939 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 13:46:29.942 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:29.943 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:29.944 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:29.945 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:46:29.946 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:46:29.951 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:29.960 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:29.998 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:30.002 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:46:30.003 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:30.004 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:30.006 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 13:46:30.011 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 13:46:30.017 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:30.018 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:46:30.019 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
2022-09-26 13:46:30.032 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
2022-09-26 13:46:30.036 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:46:30.038 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:30.039 +01:00 [DBG] Committing transaction.
2022-09-26 13:46:30.042 +01:00 [DBG] Committed transaction.
2022-09-26 13:46:30.043 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:30.044 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:30.045 +01:00 [DBG] Disposing transaction.
2022-09-26 13:46:30.046 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:30.048 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 13:46:30.160 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.UserId == __id_0)
    .AsNoTracking()
    .Select(rt => new RefreshToken{ 
        Id = rt.Id, 
        UserId = rt.UserId, 
        RefToken = rt.RefToken, 
        Expires = rt.Expires, 
        Created = rt.Created, 
        CreatedByIp = rt.CreatedByIp, 
        Revoked = rt.Revoked, 
        RevokedByIp = rt.RevokedByIp, 
        ReplacedByToken = rt.ReplacedByToken, 
        ReasonRevoked = rt.ReasonRevoked, 
        IsExpired = rt.IsExpired, 
        IsRevoked = rt.IsRevoked, 
        IsActive = rt.IsActive 
    }
    )'
2022-09-26 13:46:30.177 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Id -> 0
            UserId -> 1
            RefToken -> 2
            Expires -> 3
            Created -> 4
            CreatedByIp -> 5
            Revoked -> 6
            RevokedByIp -> 7
            ReplacedByToken -> 8
            ReasonRevoked -> 9
            IsExpired -> 10
            IsRevoked -> 11
            IsActive -> 12
        SELECT r.id AS Id, r.user_id AS UserId, r.token AS RefToken, r.expires AS Expires, r.created AS Created, r.created_by_ip AS CreatedByIp, r.revoked AS Revoked, r.revoked_by_ip AS RevokedByIp, r.replaced_by_token AS ReplacedByToken, r.reason_revoked AS ReasonRevoked, r.is_expired AS IsExpired, r.is_revoked AS IsRevoked, r.is_active AS IsActive
        FROM refresh_token AS r
        WHERE r.user_id == @__id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-26 13:46:30.182 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:30.183 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:46:30.184 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:30.185 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:30.187 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 13:46:30.190 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 13:46:30.193 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:30.194 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:30.195 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:30.198 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:30.200 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:30.201 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:46:30.201 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:46:30.202 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:46:30.203 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:30.204 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:30.205 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 13:46:30.206 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 13:46:30.220 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 13:46:30.223 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:30.225 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:46:30.226 +01:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-26 13:46:30.230 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-26 13:46:30.232 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:30.233 +01:00 [DBG] Committing transaction.
2022-09-26 13:46:30.234 +01:00 [DBG] Committed transaction.
2022-09-26 13:46:30.234 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:30.235 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:30.236 +01:00 [DBG] Disposing transaction.
2022-09-26 13:46:30.237 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:30.238 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:30.241 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 13:46:30.244 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:46:30.246 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:46:30.247 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:46:30.247 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:46:30.248 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:46:30.249 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-26 13:46:30.254 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 737.0462ms
2022-09-26 13:46:30.255 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-26 13:46:30.256 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:46:30.258 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:46:30.260 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Login application/json 65 - 200 - application/json;+charset=utf-8 770.2763ms
2022-09-26 13:46:50.120 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-26 13:46:50.127 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-26 13:46:50.129 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-26 13:46:50.134 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 13:46:50.136 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:46:50.211 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:46:50.219 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-26 13:46:50.225 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(1) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 13:46:50.228 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:50.229 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:46:50.229 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:50.230 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:50.231 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:46:50.233 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:46:50.235 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:50.236 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:50.237 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:50.239 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:50.241 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 13:46:50.243 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 13:46:50.244 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:46:50.245 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:46:50.246 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:46:50.248 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:46:50.249 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:46:50.250 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:46:50.251 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:46:50.257 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-26 13:46:50.261 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.Created (DateTime) Required, 1], [Property: RefreshToken.CreatedByIp (string) Required MaxLength(200), 2], [Property: RefreshToken.Expires (DateTime) Required, 3], [Property: RefreshToken.IsActive (no field, bool) Required, 4], [Property: RefreshToken.IsExpired (no field, bool) Required, 5], [Property: RefreshToken.IsRevoked (no field, bool) Required, 6], [Property: RefreshToken.ReasonRevoked (string) MaxLength(200), 7], [Property: RefreshToken.RefToken (string) Required MaxLength(254), 8], [Property: RefreshToken.ReplacedByToken (string) MaxLength(200), 9], [Property: RefreshToken.Revoked (DateTime?), 10], [Property: RefreshToken.RevokedByIp (string) MaxLength(200), 11], [Property: RefreshToken.UserId (int) Required FK Index, 12] }
        SELECT TOP(1) r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
        FROM refresh_token AS r
        WHERE r.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 13:46:50.263 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:50.264 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:46:50.265 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:50.266 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:50.267 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:46:50.269 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:46:50.271 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:50.275 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:50.276 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:50.276 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:50.279 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(u => u.UserId == __userId_0)
    .Select(u => new AccountRequestResponse{ 
        Balance = u.Balance, 
        CreatedAt = u.CreatedAt, 
        Currency = u.Currency, 
        Id = u.Id 
    }
    )'
2022-09-26 13:46:50.283 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AccountRequestResponse>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Balance -> 0
            CreatedAt -> 1
            Currency -> 2
            Id -> 3
        SELECT a.balance AS Balance, a.created_at AS CreatedAt, a.currency AS Currency, a.id AS Id
        FROM accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountRequestResponse>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-26 13:46:50.286 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:50.287 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:46:50.288 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:50.290 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:50.291 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 13:46:50.294 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 13:46:50.295 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:50.296 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:50.297 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:50.297 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:46:50.299 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:46:50.300 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:46:50.300 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:46:50.301 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:46:50.302 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-26 13:46:50.305 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 54.725ms
2022-09-26 13:46:50.307 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 13:46:50.308 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:46:50.309 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:46:50.310 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 189.3613ms
2022-09-26 13:46:59.378 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Accounts/Create application/json 45
2022-09-26 13:46:59.384 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/Create'
2022-09-26 13:46:59.386 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)' with route pattern 'api/Accounts/Create' is valid for the request path '/api/Accounts/Create'
2022-09-26 13:46:59.387 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 13:46:59.388 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:46:59.390 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:46:59.394 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:59.395 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:46:59.396 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:59.399 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:59.400 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:46:59.402 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:46:59.404 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:59.405 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:59.405 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:59.406 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:59.407 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 13:46:59.408 +01:00 [INF] Route matched with {action = "Create", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.AccountCreateRequest) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 13:46:59.410 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:46:59.410 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:46:59.411 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:46:59.413 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:46:59.415 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:46:59.416 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:46:59.417 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:46:59.418 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-26 13:46:59.418 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' using the name '' in request data ...
2022-09-26 13:46:59.419 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 13:46:59.420 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:00000006": started reading request body.
2022-09-26 13:46:59.421 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:00000006": done reading request body.
2022-09-26 13:46:59.423 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.AccountCreateRequest'
2022-09-26 13:46:59.424 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 13:46:59.425 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 13:46:59.426 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-26 13:46:59.428 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 13:46:59.433 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:59.435 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:46:59.435 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:59.436 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:59.437 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:46:59.439 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:46:59.440 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:59.441 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:59.442 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:59.442 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:59.449 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:46:59.450 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:59.451 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 13:46:59.452 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 13:46:59.453 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:59.480 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:59.485 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:46:59.486 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:46:59.496 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:46:59.502 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 13:46:59.506 +01:00 [DBG] Created transaction savepoint.
2022-09-26 13:46:59.507 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:59.509 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:46:59.510 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (balance, currency, user_id)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 13:46:59.519 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (balance, currency, user_id)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 13:46:59.522 +01:00 [DBG] The foreign key property 'Account.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:46:59.525 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:59.526 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 13:46:59.528 +01:00 [DBG] Released transaction savepoint.
2022-09-26 13:46:59.530 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:59.532 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 13:46:59.534 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:59.544 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:59.545 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:46:59.545 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:46:59.550 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:46:59.551 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 13:46:59.553 +01:00 [DBG] Created transaction savepoint.
2022-09-26 13:46:59.554 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:46:59.554 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:46:59.555 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 13:46:59.558 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 13:46:59.560 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:46:59.561 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:46:59.561 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 13:46:59.562 +01:00 [DBG] Released transaction savepoint.
2022-09-26 13:46:59.564 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:46:59.567 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 13:46:59.568 +01:00 [DBG] Committing transaction.
2022-09-26 13:46:59.570 +01:00 [DBG] Committed transaction.
2022-09-26 13:46:59.571 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:46:59.571 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:46:59.573 +01:00 [DBG] Disposing transaction.
2022-09-26 13:46:59.573 +01:00 [INF] Account Created
2022-09-26 13:46:59.574 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:46:59.576 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:46:59.576 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:46:59.577 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:46:59.577 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:46:59.578 +01:00 [INF] Executing CreatedResult, writing value of type 'APIBank.Models.Responses.AccountRequestResponse'.
2022-09-26 13:46:59.582 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.Create (APIBank) in 166.1889ms
2022-09-26 13:46:59.585 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 13:46:59.585 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:46:59.586 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:46:59.587 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Accounts/Create application/json 45 - 201 - application/json;+charset=utf-8 209.5054ms
2022-09-26 13:47:04.270 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-26 13:47:04.274 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-26 13:47:04.275 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-26 13:47:04.281 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 13:47:04.282 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:47:04.285 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:47:04.290 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:04.298 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2022-09-26 13:47:04.300 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:04.301 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:04.303 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:47:04.305 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:47:04.308 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:04.311 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:04.312 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:04.313 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:04.314 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 13:47:04.315 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 13:47:04.317 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:47:04.318 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:47:04.318 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:47:04.320 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:47:04.320 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:47:04.321 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:47:04.323 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:47:04.326 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:04.328 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-26 13:47:04.329 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:04.330 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:04.331 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:47:04.334 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:47:04.336 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:04.337 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:04.337 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:04.338 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:04.340 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:04.341 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:47:04.345 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:04.347 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:04.348 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 13:47:04.350 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 13:47:04.357 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:04.358 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:04.359 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:04.361 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:47:04.364 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:47:04.365 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:47:04.366 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:47:04.366 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:47:04.367 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-26 13:47:04.369 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 48.1157ms
2022-09-26 13:47:04.370 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 13:47:04.371 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:47:04.373 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:47:04.374 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 104.1623ms
2022-09-26 13:47:13.200 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000005 - -
2022-09-26 13:47:13.204 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetById/100000005'
2022-09-26 13:47:13.205 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)' with route pattern 'api/Accounts/GetById/{accountId}' is valid for the request path '/api/Accounts/GetById/100000005'
2022-09-26 13:47:13.207 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:47:13.207 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:47:13.209 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:47:13.212 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:13.213 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:47:13.214 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:13.215 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:13.216 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:47:13.218 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:47:13.222 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:13.223 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:13.223 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:13.224 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:13.225 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:47:13.228 +01:00 [INF] Route matched with {action = "GetById", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(Int32) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 13:47:13.229 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:47:13.230 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:47:13.231 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:47:13.232 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:47:13.233 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:47:13.236 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:47:13.238 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:47:13.239 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' ...
2022-09-26 13:47:13.241 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' using the name 'accountId' in request data ...
2022-09-26 13:47:13.243 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 13:47:13.244 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 13:47:13.245 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Int32' ...
2022-09-26 13:47:13.246 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Int32'.
2022-09-26 13:47:13.248 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:13.248 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:47:13.249 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:13.250 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:13.251 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:47:13.254 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:47:13.256 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:13.258 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:13.258 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:13.259 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:13.263 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Include(a => a.Transactions)
    .Where(a => a.Id == __accountId_0 && a.UserId == __userId_1)
    .Select(a => new AccountMovims{ 
        Account = new AccountRequestResponse{ 
            Balance = a.Balance, 
            Currency = a.Currency, 
            CreatedAt = a.CreatedAt, 
            Id = a.Id 
        }
        , 
        Movims = a.Transactions
            .Select(b => new Movim{ 
                Amount = b.Amount, 
                CreatedAt = b.CreatedAt 
            }
            )
            .ToArray() 
    }
    )
    .SingleOrDefault()'
2022-09-26 13:47:13.316 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AccountMovims>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
        SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
        FROM 
        (
            SELECT TOP(2) a.balance, a.currency, a.created_at, a.id
            FROM accounts AS a
            WHERE (a.id == @__accountId_0) && (a.user_id == @__userId_1)
        ) AS t
        LEFT JOIN transactions AS t0 ON t.id == t0.account_id
        ORDER BY t.id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountMovims>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 13:47:13.322 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:13.323 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:47:13.324 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:13.325 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:13.325 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 13:47:13.328 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 13:47:13.333 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:13.337 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:13.340 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:13.342 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:47:13.344 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:47:13.345 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:47:13.346 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:47:13.347 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:47:13.347 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.Responses.AccountMovims'.
2022-09-26 13:47:13.350 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetById (APIBank) in 114.6321ms
2022-09-26 13:47:13.354 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:47:13.356 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:47:13.358 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:47:13.360 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000005 - - - 200 - application/json;+charset=utf-8 159.5703ms
2022-09-26 13:47:29.866 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Accounts/Create application/json 46
2022-09-26 13:47:29.868 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/Create'
2022-09-26 13:47:29.869 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)' with route pattern 'api/Accounts/Create' is valid for the request path '/api/Accounts/Create'
2022-09-26 13:47:29.870 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 13:47:29.871 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:47:29.875 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:47:29.877 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:29.878 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:47:29.879 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:29.880 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:29.882 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:47:29.885 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:47:29.894 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:29.895 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:29.896 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:29.897 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:29.898 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 13:47:29.900 +01:00 [INF] Route matched with {action = "Create", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.AccountCreateRequest) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 13:47:29.901 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:47:29.903 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:47:29.906 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:47:29.909 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:47:29.910 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:47:29.912 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:47:29.913 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:47:29.914 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-26 13:47:29.915 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' using the name '' in request data ...
2022-09-26 13:47:29.916 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 13:47:29.917 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:00000009": started reading request body.
2022-09-26 13:47:29.917 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:00000009": done reading request body.
2022-09-26 13:47:29.919 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.AccountCreateRequest'
2022-09-26 13:47:29.919 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 13:47:29.921 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 13:47:29.923 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-26 13:47:29.924 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 13:47:29.926 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:29.926 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:47:29.927 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:29.928 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:29.929 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:47:29.930 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:47:29.932 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:29.933 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:29.933 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:29.935 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:29.936 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:29.938 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:29.940 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 13:47:29.941 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 13:47:29.942 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:29.944 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:29.945 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:47:29.946 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:47:29.947 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:47:29.948 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 13:47:29.949 +01:00 [DBG] Created transaction savepoint.
2022-09-26 13:47:29.949 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:29.950 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:47:29.952 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (balance, currency, user_id)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 13:47:29.956 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (balance, currency, user_id)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 13:47:29.959 +01:00 [DBG] The foreign key property 'Account.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:47:29.960 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:29.961 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 13:47:29.961 +01:00 [DBG] Released transaction savepoint.
2022-09-26 13:47:29.962 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:29.964 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 13:47:29.965 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:29.966 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:29.968 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:47:29.968 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:47:29.969 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:47:29.969 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 13:47:29.971 +01:00 [DBG] Created transaction savepoint.
2022-09-26 13:47:29.973 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:29.974 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:47:29.975 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 13:47:29.978 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 13:47:29.980 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:47:29.981 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:29.981 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 13:47:29.983 +01:00 [DBG] Released transaction savepoint.
2022-09-26 13:47:29.984 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:29.985 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 13:47:29.986 +01:00 [DBG] Committing transaction.
2022-09-26 13:47:29.989 +01:00 [DBG] Committed transaction.
2022-09-26 13:47:29.990 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:29.991 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:29.992 +01:00 [DBG] Disposing transaction.
2022-09-26 13:47:29.992 +01:00 [INF] Account Created
2022-09-26 13:47:29.993 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:47:29.994 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:47:29.995 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:47:29.995 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:47:29.996 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:47:29.997 +01:00 [INF] Executing CreatedResult, writing value of type 'APIBank.Models.Responses.AccountRequestResponse'.
2022-09-26 13:47:29.999 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.Create (APIBank) in 87.3221ms
2022-09-26 13:47:30.000 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 13:47:30.000 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:47:30.001 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:47:30.002 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Accounts/Create application/json 46 - 201 - application/json;+charset=utf-8 135.9048ms
2022-09-26 13:47:37.824 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Accounts/Create application/json 45
2022-09-26 13:47:37.825 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/Create'
2022-09-26 13:47:37.826 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)' with route pattern 'api/Accounts/Create' is valid for the request path '/api/Accounts/Create'
2022-09-26 13:47:37.828 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 13:47:37.832 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:47:37.841 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 13:47:37.844 +01:00 [INF] Route matched with {action = "Create", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.AccountCreateRequest) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 13:47:37.845 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:47:37.847 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:47:37.850 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:47:37.851 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:47:37.853 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:47:37.854 +01:00 [INF] Authorization failed for the request at filter 'APIBank.Authorization.AuthorizeAttribute'.
2022-09-26 13:47:37.856 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 13:47:37.857 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.Create (APIBank) in 3.2999ms
2022-09-26 13:47:37.858 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 13:47:37.859 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:47:37.860 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Accounts/Create application/json 45 - 401 - application/json;+charset=utf-8 36.1555ms
2022-09-26 13:47:37.860 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:0000000A": started reading request body.
2022-09-26 13:47:37.862 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:0000000A": done reading request body.
2022-09-26 13:47:45.536 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0
2022-09-26 13:47:45.538 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/refreshToken'
2022-09-26 13:47:45.539 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)' with route pattern 'api/Users/refreshToken' is valid for the request path '/api/Users/refreshToken'
2022-09-26 13:47:45.542 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 13:47:45.544 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:47:45.550 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 13:47:45.554 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RefreshToken() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 13:47:45.556 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:47:45.558 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:47:45.559 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:47:45.561 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:47:45.562 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:47:45.563 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 13:47:45.565 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 13:47:45.571 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:47:45.573 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(userQuery => userQuery.RefreshTokenCollection
        .Any(refTokenQuery => refTokenQuery.RefToken == __refToken_0))'
2022-09-26 13:47:45.578 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE EXISTS (
            SELECT 1
            FROM refresh_token AS r
            WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__refToken_0))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 13:47:45.581 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:45.581 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:47:45.582 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:45.583 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:45.584 +01:00 [DBG] Executing DbCommand [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 13:47:45.586 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 13:47:45.587 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:45.589 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:45.589 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:45.591 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:45.593 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:45.594 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:47:45.596 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:45.596 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:45.597 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 13:47:45.599 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 13:47:45.600 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:45.601 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:45.602 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:45.603 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:45.604 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:47:45.604 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:45.605 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:45.606 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 13:47:45.610 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 13:47:45.612 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:45.612 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:45.613 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:45.614 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:45.615 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:47:45.616 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:45.616 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:45.617 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 13:47:45.619 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 13:47:45.620 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:45.621 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:45.622 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:45.623 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:45.625 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:47:45.627 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:47:45.628 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:45.631 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:45.634 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:45.635 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:47:45.636 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:47:45.637 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:45.637 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 13:47:45.638 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 13:47:45.639 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 13:47:45.643 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:47:45.646 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-09-26 13:47:45.647 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 13:47:45.650 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 13:47:45.652 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:47:45.653 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:47:45.654 +01:00 [DBG] Committing transaction.
2022-09-26 13:47:45.655 +01:00 [DBG] Committed transaction.
2022-09-26 13:47:45.655 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:47:45.661 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:47:45.662 +01:00 [DBG] Disposing transaction.
2022-09-26 13:47:45.663 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:45.664 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:47:45.665 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 13:47:45.667 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:47:45.668 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:47:45.669 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:47:45.669 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:47:45.670 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:47:45.671 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-26 13:47:45.672 +01:00 [INF] Executed action APIBank.Controllers.UsersController.RefreshToken (APIBank) in 108.3654ms
2022-09-26 13:47:45.673 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 13:47:45.675 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:47:45.676 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:47:45.677 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0 - 200 - application/json;+charset=utf-8 141.0878ms
2022-09-26 13:48:00.618 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Accounts/Create application/json 45
2022-09-26 13:48:00.621 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/Create'
2022-09-26 13:48:00.623 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)' with route pattern 'api/Accounts/Create' is valid for the request path '/api/Accounts/Create'
2022-09-26 13:48:00.625 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 13:48:00.626 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:48:00.630 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:48:00.635 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:00.636 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:48:00.637 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:00.638 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:00.639 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:48:00.641 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:48:00.644 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:00.646 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:00.646 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:00.647 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:00.649 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 13:48:00.650 +01:00 [INF] Route matched with {action = "Create", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.AccountCreateRequest) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 13:48:00.651 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:48:00.653 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:48:00.654 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:48:00.656 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:48:00.657 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:48:00.658 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:48:00.659 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:48:00.660 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-26 13:48:00.662 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' using the name '' in request data ...
2022-09-26 13:48:00.666 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 13:48:00.667 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:0000000C": started reading request body.
2022-09-26 13:48:00.668 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:0000000C": done reading request body.
2022-09-26 13:48:00.669 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.AccountCreateRequest'
2022-09-26 13:48:00.670 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 13:48:00.671 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 13:48:00.672 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-26 13:48:00.673 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-26 13:48:00.675 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:00.676 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:00.677 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:00.679 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:00.681 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:48:00.683 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:48:00.685 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:00.686 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:00.687 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:00.688 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:00.694 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:00.697 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:00.699 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 13:48:00.699 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 13:48:00.700 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:00.702 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:00.703 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:48:00.704 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:48:00.705 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:48:00.706 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 13:48:00.706 +01:00 [DBG] Created transaction savepoint.
2022-09-26 13:48:00.707 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:00.708 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:00.708 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (balance, currency, user_id)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 13:48:00.713 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (balance, currency, user_id)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 13:48:00.715 +01:00 [DBG] The foreign key property 'Account.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:48:00.716 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:00.717 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 13:48:00.718 +01:00 [DBG] Released transaction savepoint.
2022-09-26 13:48:00.718 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:00.719 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 13:48:00.720 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:00.722 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:00.723 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:48:00.724 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:48:00.725 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:48:00.726 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 13:48:00.726 +01:00 [DBG] Created transaction savepoint.
2022-09-26 13:48:00.731 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:00.732 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:48:00.733 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 13:48:00.736 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-26 13:48:00.737 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:48:00.739 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:00.739 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 13:48:00.740 +01:00 [DBG] Released transaction savepoint.
2022-09-26 13:48:00.741 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:00.743 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 13:48:00.745 +01:00 [DBG] Committing transaction.
2022-09-26 13:48:00.747 +01:00 [DBG] Committed transaction.
2022-09-26 13:48:00.748 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:00.749 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:00.749 +01:00 [DBG] Disposing transaction.
2022-09-26 13:48:00.750 +01:00 [INF] Account Created
2022-09-26 13:48:00.751 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:48:00.752 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:48:00.753 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:48:00.754 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:48:00.754 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:48:00.755 +01:00 [INF] Executing CreatedResult, writing value of type 'APIBank.Models.Responses.AccountRequestResponse'.
2022-09-26 13:48:00.757 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.Create (APIBank) in 98.6794ms
2022-09-26 13:48:00.759 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-26 13:48:00.760 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:48:00.766 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:48:00.767 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Accounts/Create application/json 45 - 201 - application/json;+charset=utf-8 148.8328ms
2022-09-26 13:48:04.482 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-26 13:48:04.483 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-26 13:48:04.484 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-26 13:48:04.486 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 13:48:04.486 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:48:04.488 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:48:04.493 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:04.494 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:04.495 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:04.496 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:04.496 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:48:04.498 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:48:04.500 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:04.500 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:04.501 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:04.502 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:04.503 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 13:48:04.503 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 13:48:04.505 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:48:04.506 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:48:04.506 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:48:04.510 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:48:04.511 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:48:04.512 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:48:04.513 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:48:04.514 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:04.515 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:04.516 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:04.517 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:04.518 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:48:04.520 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:48:04.523 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:04.528 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:04.529 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:04.530 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:04.531 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:04.531 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:04.532 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:04.533 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:04.535 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 13:48:04.536 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-26 13:48:04.538 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:04.538 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:04.540 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:04.542 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:48:04.544 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:48:04.545 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:48:04.546 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:48:04.546 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:48:04.547 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-26 13:48:04.548 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 36.178ms
2022-09-26 13:48:04.549 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 13:48:04.550 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:48:04.550 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:48:04.552 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 69.6887ms
2022-09-26 13:48:06.400 +01:00 [DBG] Connection id "0HMKVNK6AFECE" is closing.
2022-09-26 13:48:06.405 +01:00 [DBG] Connection id "0HMKVNK6AFECE" is closed. The last processed stream ID was 7.
2022-09-26 13:48:06.407 +01:00 [DBG] Connection id "0HMKVNK6AFECE" received FIN.
2022-09-26 13:48:06.408 +01:00 [DBG] Connection id "0HMKVNK6AFECE" sending FIN because: "The client closed the connection."
2022-09-26 13:48:06.415 +01:00 [DBG] Connection id "0HMKVNK6AFECE" stopped.
2022-09-26 13:48:18.886 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80
2022-09-26 13:48:18.888 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 13:48:18.890 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 13:48:18.892 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 13:48:18.893 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:48:18.897 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:48:18.900 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:18.901 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:18.902 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:18.902 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:18.903 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:48:18.906 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:48:18.909 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:18.910 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:18.910 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:18.912 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:18.914 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 13:48:18.916 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 13:48:18.918 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:48:18.919 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:48:18.920 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:48:18.923 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:48:18.924 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:48:18.925 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 13:48:18.926 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 13:48:18.927 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 13:48:18.929 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' using the name '' in request data ...
2022-09-26 13:48:18.931 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 13:48:18.933 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:0000000E": started reading request body.
2022-09-26 13:48:18.934 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:0000000E": done reading request body.
2022-09-26 13:48:18.935 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.TransferRequest'
2022-09-26 13:48:18.936 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 13:48:18.937 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 13:48:18.939 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 13:48:18.941 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 13:48:18.942 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:18.943 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:18.945 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:18.946 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:18.947 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 13:48:18.950 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 13:48:18.952 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:18.952 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:18.954 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:18.956 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:18.956 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:18.957 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:18.958 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:18.959 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:48:18.963 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:48:18.965 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:18.966 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:18.966 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:18.967 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:18.969 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:18.970 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:18.971 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 13:48:18.972 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 13:48:18.981 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.000 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.003 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:48:19.004 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:48:19.008 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:48:19.012 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 13:48:19.014 +01:00 [DBG] Created transaction savepoint.
2022-09-26 13:48:19.016 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:19.017 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:48:19.019 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transfers (amount, currency, from_account_id, to_account_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at;
2022-09-26 13:48:19.022 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transfers (amount, currency, from_account_id, to_account_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at;
2022-09-26 13:48:19.026 +01:00 [DBG] The foreign key property 'Transfer.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:48:19.028 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:19.030 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 13:48:19.032 +01:00 [DBG] Released transaction savepoint.
2022-09-26 13:48:19.033 +01:00 [DBG] An entity of type 'Transfer' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.034 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 13:48:19.035 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.036 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.037 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.038 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.039 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:48:19.040 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:48:19.040 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:48:19.041 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 13:48:19.042 +01:00 [DBG] Created transaction savepoint.
2022-09-26 13:48:19.042 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 13:48:19.043 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:19.044 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:19.046 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id;
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p4, @p5, @p6, @p7)
RETURNING id;
2022-09-26 13:48:19.049 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id;
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p4, @p5, @p6, @p7)
RETURNING id;
2022-09-26 13:48:19.051 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:48:19.052 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:48:19.053 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:19.053 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 13:48:19.054 +01:00 [DBG] Released transaction savepoint.
2022-09-26 13:48:19.054 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.055 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.057 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 13:48:19.059 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-26 13:48:19.064 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (int) Required FK Index, 4] }
        SELECT TOP(1) a.id, a.balance, a.created_at, a.currency, a.user_id
        FROM accounts AS a
        WHERE a.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-26 13:48:19.085 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:19.086 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:48:19.087 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 13:48:19.088 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 13:48:19.090 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.093 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:19.097 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:19.098 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:48:19.099 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 13:48:19.101 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 13:48:19.102 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.103 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:19.104 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:48:19.105 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:48:19.106 +01:00 [DBG] The unchanged property 'Account.Balance' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:48:19.107 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.108 +01:00 [DBG] The unchanged property 'Account.Balance' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:48:19.109 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.110 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:48:19.111 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 13:48:19.113 +01:00 [DBG] Created transaction savepoint.
2022-09-26 13:48:19.113 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 13:48:19.114 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:19.115 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:19.116 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
UPDATE accounts SET balance = @p0
WHERE id = @p1;
UPDATE accounts SET balance = @p2
WHERE id = @p3;
2022-09-26 13:48:19.117 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
UPDATE accounts SET balance = @p0
WHERE id = @p1;
UPDATE accounts SET balance = @p2
WHERE id = @p3;
2022-09-26 13:48:19.119 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:19.119 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 13:48:19.120 +01:00 [DBG] Released transaction savepoint.
2022-09-26 13:48:19.120 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.122 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:19.123 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 13:48:19.123 +01:00 [DBG] Committing transaction.
2022-09-26 13:48:19.124 +01:00 [DBG] Committed transaction.
2022-09-26 13:48:19.125 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:19.126 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:19.127 +01:00 [DBG] Disposing transaction.
2022-09-26 13:48:19.127 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:48:19.130 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:48:19.131 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:48:19.132 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:48:19.132 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:48:19.133 +01:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 13:48:19.134 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 209.2423ms
2022-09-26 13:48:19.135 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 13:48:19.136 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:48:19.136 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:48:19.137 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80 - 201 - application/json;+charset=utf-8 251.1843ms
2022-09-26 13:48:28.531 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80
2022-09-26 13:48:28.535 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Transfers/TransferRequest'
2022-09-26 13:48:28.538 +01:00 [DBG] Endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)' with route pattern 'api/Transfers/TransferRequest' is valid for the request path '/api/Transfers/TransferRequest'
2022-09-26 13:48:28.539 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 13:48:28.540 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:48:28.543 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:48:28.545 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:28.546 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:28.547 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:28.549 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:28.550 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:48:28.552 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:48:28.556 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:28.558 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:28.559 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:28.560 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:28.561 +01:00 [INF] Executing endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 13:48:28.562 +01:00 [INF] Route matched with {action = "Create", controller = "Transfers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.TransferRequest) on controller APIBank.Controllers.TransfersController (APIBank).
2022-09-26 13:48:28.563 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:48:28.564 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:48:28.565 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:48:28.566 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:48:28.567 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:48:28.571 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 13:48:28.573 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.TransfersController (APIBank)
2022-09-26 13:48:28.574 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 13:48:28.575 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' using the name '' in request data ...
2022-09-26 13:48:28.576 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-26 13:48:28.577 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:0000000F": started reading request body.
2022-09-26 13:48:28.580 +01:00 [DBG] Connection id "0HMKVNK6AFECG", Request id "0HMKVNK6AFECG:0000000F": done reading request body.
2022-09-26 13:48:28.583 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.TransferRequest'
2022-09-26 13:48:28.584 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 13:48:28.585 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 13:48:28.587 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest' ...
2022-09-26 13:48:28.590 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.TransferRequest'.
2022-09-26 13:48:28.593 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:28.594 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:28.595 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:28.596 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:28.600 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 13:48:28.607 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 13:48:28.615 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:28.617 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:28.618 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:28.624 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:28.625 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:48:28.626 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:28.627 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:28.628 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:48:28.631 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:48:28.633 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:28.635 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:28.636 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:28.638 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:28.639 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:28.640 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:28.641 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 13:48:28.642 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 13:48:28.643 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:28.645 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:28.645 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:48:28.646 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:48:28.647 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:48:28.647 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 13:48:28.648 +01:00 [DBG] Created transaction savepoint.
2022-09-26 13:48:28.649 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:28.650 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:48:28.651 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transfers (amount, currency, from_account_id, to_account_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at;
2022-09-26 13:48:28.655 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transfers (amount, currency, from_account_id, to_account_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id, created_at;
2022-09-26 13:48:28.657 +01:00 [DBG] The foreign key property 'Transfer.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:48:28.658 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:28.658 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 13:48:28.659 +01:00 [DBG] Released transaction savepoint.
2022-09-26 13:48:28.660 +01:00 [DBG] An entity of type 'Transfer' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:28.661 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 13:48:28.662 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:28.664 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:28.665 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:28.666 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:28.667 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:48:28.668 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:48:28.669 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:48:28.671 +01:00 [DBG] Creating transaction savepoint.
2022-09-26 13:48:28.672 +01:00 [DBG] Created transaction savepoint.
2022-09-26 13:48:28.673 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 13:48:28.674 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:28.675 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:28.676 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id;
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p4, @p5, @p6, @p7)
RETURNING id;
2022-09-26 13:48:28.678 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id;
INSERT INTO transactions (account_id, amount, balance, created_at)
VALUES (@p4, @p5, @p6, @p7)
RETURNING id;
2022-09-26 13:48:28.681 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:48:28.682 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:48:28.683 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:28.684 +01:00 [DBG] Releasing transaction savepoint.
2022-09-26 13:48:28.684 +01:00 [DBG] Released transaction savepoint.
2022-09-26 13:48:28.685 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:28.687 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:28.689 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 13:48:28.691 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:28.692 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:28.692 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 13:48:28.694 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 13:48:28.695 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:28.697 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:28.698 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:28.699 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:28.700 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 13:48:28.701 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.balance, a.created_at, a.currency, a.user_id
FROM accounts AS a
WHERE a.id = @__p_0
LIMIT 1
2022-09-26 13:48:28.704 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:28.705 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:28.706 +01:00 [INF] Error while transferring funds:
2022-09-26 13:48:28.709 +01:00 [DBG] Disposing transaction.
2022-09-26 13:48:28.709 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:28.710 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:28.711 +01:00 [INF] Executed action APIBank.Controllers.TransfersController.Create (APIBank) in 140.9131ms
2022-09-26 13:48:28.713 +01:00 [INF] Executed endpoint 'APIBank.Controllers.TransfersController.Create (APIBank)'
2022-09-26 13:48:28.714 +01:00 [INF] Global Error was found:
2022-09-26 13:48:28.715 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:48:28.715 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:48:28.716 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Transfers/TransferRequest application/json 80 - 400 - application/json 184.5717ms
2022-09-26 13:48:39.603 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000005 - -
2022-09-26 13:48:39.605 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetById/100000005'
2022-09-26 13:48:39.606 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)' with route pattern 'api/Accounts/GetById/{accountId}' is valid for the request path '/api/Accounts/GetById/100000005'
2022-09-26 13:48:39.607 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:48:39.608 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:48:39.611 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:48:39.614 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:39.616 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:48:39.617 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:39.618 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:39.618 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:48:39.620 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:48:39.622 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:39.624 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:39.625 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:39.626 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:39.628 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:48:39.630 +01:00 [INF] Route matched with {action = "GetById", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(Int32) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 13:48:39.632 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:48:39.633 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:48:39.634 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:48:39.635 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:48:39.636 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:48:39.637 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:48:39.638 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:48:39.639 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' ...
2022-09-26 13:48:39.640 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' using the name 'accountId' in request data ...
2022-09-26 13:48:39.642 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 13:48:39.643 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 13:48:39.645 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Int32' ...
2022-09-26 13:48:39.647 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Int32'.
2022-09-26 13:48:39.649 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:39.649 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:39.650 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:39.651 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:39.652 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:48:39.654 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:48:39.656 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:39.657 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:39.658 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:39.658 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:39.660 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:39.663 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-09-26 13:48:39.664 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:39.666 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:39.667 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 13:48:39.669 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 13:48:39.671 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:39.672 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:39.672 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:39.673 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:48:39.675 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:48:39.676 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:48:39.677 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:48:39.678 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:48:39.680 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.Responses.AccountMovims'.
2022-09-26 13:48:39.681 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetById (APIBank) in 43.8506ms
2022-09-26 13:48:39.683 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:48:39.684 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:48:39.685 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:48:39.686 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000005 - - - 200 - application/json;+charset=utf-8 83.5232ms
2022-09-26 13:48:45.020 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000006 - -
2022-09-26 13:48:45.023 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetById/100000006'
2022-09-26 13:48:45.025 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)' with route pattern 'api/Accounts/GetById/{accountId}' is valid for the request path '/api/Accounts/GetById/100000006'
2022-09-26 13:48:45.027 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:48:45.029 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:48:45.030 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:48:45.031 +01:00 [INF] Route matched with {action = "GetById", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(Int32) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 13:48:45.033 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:48:45.034 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:48:45.035 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:48:45.037 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:48:45.038 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:48:45.039 +01:00 [INF] Authorization failed for the request at filter 'APIBank.Authorization.AuthorizeAttribute'.
2022-09-26 13:48:45.041 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 13:48:45.042 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetById (APIBank) in 3.0731ms
2022-09-26 13:48:45.043 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:48:45.044 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:48:45.045 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000006 - - - 401 - application/json;+charset=utf-8 25.3770ms
2022-09-26 13:48:48.630 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0
2022-09-26 13:48:48.632 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/refreshToken'
2022-09-26 13:48:48.638 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)' with route pattern 'api/Users/refreshToken' is valid for the request path '/api/Users/refreshToken'
2022-09-26 13:48:48.640 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 13:48:48.641 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:48:48.643 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 13:48:48.645 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RefreshToken() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 13:48:48.647 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:48:48.648 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:48:48.650 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:48:48.654 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:48:48.655 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:48:48.658 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 13:48:48.659 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 13:48:48.661 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:48:48.664 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:48.666 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:48:48.667 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:48.667 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:48.669 +01:00 [DBG] Executing DbCommand [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 13:48:48.672 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 13:48:48.675 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:48.676 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:48.676 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:48.677 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:48.678 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:48.680 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:48:48.681 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:48.681 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:48.683 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 13:48:48.687 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 13:48:48.689 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:48.690 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:48.691 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:48.692 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:48.693 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:48.694 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:48.696 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:48.696 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 13:48:48.699 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-26 13:48:48.701 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:48.702 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:48.704 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:48.706 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:48.707 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:48:48.708 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:48.709 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:48.710 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 13:48:48.712 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 13:48:48.714 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:48.715 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:48.716 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:48.717 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:48.719 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:48:48.720 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:48:48.721 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:48.724 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:48.725 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:48.728 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:48:48.729 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:48.730 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:48.731 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 13:48:48.731 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 13:48:48.732 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-26 13:48:48.733 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:48.734 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:48.734 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 13:48:48.739 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-26 13:48:48.741 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:48:48.742 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:48.743 +01:00 [DBG] Committing transaction.
2022-09-26 13:48:48.746 +01:00 [DBG] Committed transaction.
2022-09-26 13:48:48.746 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:48.747 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:48.748 +01:00 [DBG] Disposing transaction.
2022-09-26 13:48:48.748 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:48.749 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:48.751 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-26 13:48:48.754 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:48:48.756 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:48:48.757 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:48:48.758 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:48:48.759 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:48:48.760 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-26 13:48:48.761 +01:00 [INF] Executed action APIBank.Controllers.UsersController.RefreshToken (APIBank) in 103.7163ms
2022-09-26 13:48:48.762 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-26 13:48:48.763 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:48:48.764 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:48:48.766 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/refreshToken - 0 - 200 - application/json;+charset=utf-8 135.4849ms
2022-09-26 13:48:59.187 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000006 - -
2022-09-26 13:48:59.189 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetById/100000006'
2022-09-26 13:48:59.190 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)' with route pattern 'api/Accounts/GetById/{accountId}' is valid for the request path '/api/Accounts/GetById/100000006'
2022-09-26 13:48:59.191 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:48:59.191 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:48:59.195 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:48:59.197 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:59.198 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:59.199 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:59.199 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:59.200 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:48:59.202 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:48:59.204 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:59.204 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:59.205 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:59.206 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:59.206 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:48:59.207 +01:00 [INF] Route matched with {action = "GetById", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(Int32) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 13:48:59.208 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:48:59.212 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:48:59.213 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:48:59.214 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:48:59.215 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:48:59.216 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:48:59.217 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:48:59.218 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' ...
2022-09-26 13:48:59.219 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' using the name 'accountId' in request data ...
2022-09-26 13:48:59.220 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 13:48:59.220 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 13:48:59.221 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Int32' ...
2022-09-26 13:48:59.222 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Int32'.
2022-09-26 13:48:59.223 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:59.224 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:59.225 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:59.229 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:59.230 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:48:59.232 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:48:59.235 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:48:59.236 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:59.236 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:59.237 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:59.238 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:48:59.239 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:48:59.240 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:48:59.241 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:59.244 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 13:48:59.247 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.balance, t.currency, t.created_at, t.id, t0.amount, t0.created_at, t0.id
FROM (
    SELECT a.balance, a.currency, a.created_at, a.id
    FROM accounts AS a
    WHERE (a.id = @__accountId_0) AND (a.user_id = @__userId_1)
    LIMIT 2
) AS t
LEFT JOIN transactions AS t0 ON t.id = t0.account_id
ORDER BY t.id
2022-09-26 13:48:59.249 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:48:59.250 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:48:59.251 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:48:59.252 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:48:59.253 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:48:59.254 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:48:59.255 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:48:59.255 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:48:59.257 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.Responses.AccountMovims'.
2022-09-26 13:48:59.261 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetById (APIBank) in 45.0612ms
2022-09-26 13:48:59.263 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:48:59.264 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:48:59.266 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:48:59.268 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000006 - - - 200 - application/json;+charset=utf-8 80.4556ms
2022-09-26 13:49:14.615 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0
2022-09-26 13:49:14.618 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Logout'
2022-09-26 13:49:14.619 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)' with route pattern 'api/Users/Logout' is valid for the request path '/api/Users/Logout'
2022-09-26 13:49:14.621 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 13:49:14.621 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:49:14.624 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:49:14.626 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:49:14.628 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:49:14.632 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:49:14.633 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:14.634 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:49:14.636 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:49:14.637 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:49:14.639 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:49:14.639 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:14.640 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:49:14.641 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 13:49:14.643 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-26 13:49:14.644 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:49:14.646 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:49:14.650 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:49:14.653 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:49:14.654 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:49:14.655 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 13:49:14.656 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-26 13:49:14.659 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:49:14.660 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:49:14.660 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:49:14.661 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:14.662 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:49:14.666 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:49:14.668 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:49:14.669 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:49:14.670 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:14.671 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:49:14.672 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:49:14.673 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:49:14.674 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:49:14.675 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:14.675 +01:00 [DBG] Executing DbCommand [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 13:49:14.677 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-26 13:49:14.681 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:49:14.682 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:14.683 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:49:14.685 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:49:14.686 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:49:14.687 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:49:14.688 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:14.689 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 13:49:14.692 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-26 13:49:14.693 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:49:14.694 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:14.695 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:49:14.699 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-26 13:49:14.699 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-26 13:49:14.700 +01:00 [DBG] The unchanged property 'RefreshToken.IsActive' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:49:14.701 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:49:14.703 +01:00 [DBG] The unchanged property 'RefreshToken.IsRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:49:14.704 +01:00 [DBG] The unchanged property 'RefreshToken.ReasonRevoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:49:14.706 +01:00 [DBG] The unchanged property 'RefreshToken.Revoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:49:14.706 +01:00 [DBG] The unchanged property 'RefreshToken.RevokedByIp' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-26 13:49:14.707 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-26 13:49:14.708 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:49:14.709 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:14.710 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-26 13:49:14.711 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-26 13:49:14.712 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:49:14.713 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:49:14.715 +01:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?', @p3='?' (DbType = DateTime), @p4='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET is_active = @p0, is_revoked = @p1, reason_revoked = @p2, revoked = @p3, revoked_by_ip = @p4
WHERE id = @p5;
2022-09-26 13:49:14.717 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?', @p3='?' (DbType = DateTime), @p4='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET is_active = @p0, is_revoked = @p1, reason_revoked = @p2, revoked = @p3, revoked_by_ip = @p4
WHERE id = @p5;
2022-09-26 13:49:14.719 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:49:14.719 +01:00 [DBG] Committing transaction.
2022-09-26 13:49:14.721 +01:00 [DBG] Committed transaction.
2022-09-26 13:49:14.722 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:14.723 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:49:14.723 +01:00 [DBG] Disposing transaction.
2022-09-26 13:49:14.725 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:49:14.726 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-26 13:49:14.727 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:49:14.728 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:49:14.729 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-26 13:49:14.733 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-26 13:49:14.734 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-26 13:49:14.735 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-26 13:49:14.736 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Logout (APIBank) in 80.3735ms
2022-09-26 13:49:14.737 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Logout (APIBank)'
2022-09-26 13:49:14.738 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:49:14.739 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:49:14.739 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7036/api/Users/Logout - 0 - 200 - application/json;+charset=utf-8 124.4720ms
2022-09-26 13:49:18.657 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-26 13:49:18.658 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-26 13:49:18.662 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-26 13:49:18.664 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 13:49:18.665 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:49:18.667 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:49:18.669 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:49:18.670 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-26 13:49:18.671 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:49:18.672 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:18.673 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:49:18.674 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:49:18.676 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:49:18.679 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:49:18.680 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:18.681 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:49:18.682 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 13:49:18.684 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 13:49:18.686 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:49:18.687 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:49:18.688 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:49:18.689 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:49:18.690 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:49:18.691 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:49:18.692 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:49:18.696 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:49:18.697 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:49:18.699 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:49:18.700 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:18.701 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:49:18.703 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:49:18.704 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:49:18.705 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:49:18.706 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:18.707 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:49:18.708 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:49:18.712 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:49:18.713 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-26 13:49:18.715 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-26 13:49:18.717 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-09-26 13:49:18.718 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 27.2652ms
2022-09-26 13:49:18.719 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-26 13:49:18.720 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:49:18.720 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:49:18.721 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetAll - - - 401 - application/problem+json;+charset=utf-8 64.5126ms
2022-09-26 13:49:22.536 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000006 - -
2022-09-26 13:49:22.542 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetById/100000006'
2022-09-26 13:49:22.544 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)' with route pattern 'api/Accounts/GetById/{accountId}' is valid for the request path '/api/Accounts/GetById/100000006'
2022-09-26 13:49:22.546 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:49:22.547 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-26 13:49:22.550 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-26 13:49:22.553 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:49:22.554 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:49:22.555 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:49:22.557 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:22.560 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:49:22.562 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-26 13:49:22.565 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:49:22.566 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:49:22.566 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:22.567 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:49:22.568 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:49:22.569 +01:00 [INF] Route matched with {action = "GetById", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(Int32) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-26 13:49:22.570 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-26 13:49:22.571 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-26 13:49:22.575 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-26 13:49:22.577 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-26 13:49:22.578 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-26 13:49:22.579 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:49:22.580 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-26 13:49:22.581 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' ...
2022-09-26 13:49:22.581 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Int32' using the name 'accountId' in request data ...
2022-09-26 13:49:22.583 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 13:49:22.584 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Int32'.
2022-09-26 13:49:22.584 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Int32' ...
2022-09-26 13:49:22.585 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Int32'.
2022-09-26 13:49:22.587 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-26 13:49:22.588 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-26 13:49:22.591 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-26 13:49:22.592 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:22.593 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:49:22.595 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created, r.created_by_ip, r.expires, r.is_active, r.is_expired, r.is_revoked, r.reason_revoked, r.token, r.replaced_by_token, r.revoked, r.revoked_by_ip, r.user_id
FROM refresh_token AS r
WHERE r.id = @__p_0
LIMIT 1
2022-09-26 13:49:22.597 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-26 13:49:22.598 +01:00 [DBG] A data reader was disposed.
2022-09-26 13:49:22.599 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-26 13:49:22.600 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-26 13:49:22.601 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-26 13:49:22.603 +01:00 [DBG] No information found on request to perform content negotiation.
2022-09-26 13:49:22.603 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-26 13:49:22.607 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-26 13:49:22.608 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-09-26 13:49:22.610 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetById (APIBank) in 30.4868ms
2022-09-26 13:49:22.611 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetById (APIBank)'
2022-09-26 13:49:22.612 +01:00 [DBG] Connection id "0HMKVNK6AFECG" completed keep alive response.
2022-09-26 13:49:22.612 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-26 13:49:22.613 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7036/api/Accounts/GetById/100000006 - - - 401 - application/problem+json;+charset=utf-8 76.9719ms
2022-09-26 13:51:33.397 +01:00 [DBG] Connection id "0HMKVNK6AFECG" disconnecting.
2022-09-26 13:51:33.401 +01:00 [DBG] Connection id "0HMKVNK6AFECG" stopped.
2022-09-26 13:51:33.403 +01:00 [DBG] Connection id "0HMKVNK6AFECG" sending FIN because: "The Socket transport's send loop completed gracefully."
