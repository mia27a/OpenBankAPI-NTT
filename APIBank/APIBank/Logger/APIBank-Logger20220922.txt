2022-09-22 12:11:57.349 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-09-22 12:11:57.444 +01:00 [DBG] Hosting starting
2022-09-22 12:11:57.542 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9CC642E9838495A6C3C202DECA6A8AD300396DD2)
2022-09-22 12:11:57.579 +01:00 [INF] Now listening on: https://localhost:7036
2022-09-22 12:11:57.581 +01:00 [INF] Now listening on: http://localhost:5036
2022-09-22 12:11:57.582 +01:00 [DBG] Loaded hosting startup assembly APIBank
2022-09-22 12:11:57.583 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-09-22 12:11:57.584 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-09-22 12:11:57.584 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-22 12:11:57.585 +01:00 [INF] Hosting environment: Development
2022-09-22 12:11:57.585 +01:00 [INF] Content root path: C:\Users\mguedesa\OneDrive - NTT DATA EMEAL\Documentos\GitHub\OpenBankAPI-NTT\APIBank\APIBank\
2022-09-22 12:11:57.586 +01:00 [DBG] Hosting started
2022-09-22 12:11:58.025 +01:00 [DBG] Connection id "0HMKSHD1UMTIU" accepted.
2022-09-22 12:11:58.028 +01:00 [DBG] Connection id "0HMKSHD1UMTIU" started.
2022-09-22 12:11:58.033 +01:00 [DBG] Connection id "0HMKSHD1UMTIV" accepted.
2022-09-22 12:11:58.035 +01:00 [DBG] Connection id "0HMKSHD1UMTIV" started.
2022-09-22 12:11:58.038 +01:00 [DBG] Connection id "0HMKSHD1UMTIV" received FIN.
2022-09-22 12:11:58.038 +01:00 [DBG] Connection id "0HMKSHD1UMTIU" received FIN.
2022-09-22 12:11:58.046 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-22 12:11:58.046 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-22 12:11:58.073 +01:00 [DBG] Connection id "0HMKSHD1UMTIU" stopped.
2022-09-22 12:11:58.073 +01:00 [DBG] Connection id "0HMKSHD1UMTIV" stopped.
2022-09-22 12:11:58.075 +01:00 [DBG] Connection id "0HMKSHD1UMTIU" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 12:11:58.075 +01:00 [DBG] Connection id "0HMKSHD1UMTIV" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 12:11:58.276 +01:00 [DBG] Connection id "0HMKSHD1UMTJ0" accepted.
2022-09-22 12:11:58.279 +01:00 [DBG] Connection id "0HMKSHD1UMTJ0" started.
2022-09-22 12:11:58.338 +01:00 [DBG] Connection 0HMKSHD1UMTJ0 established using the following protocol: "Tls12"
2022-09-22 12:11:58.413 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/index.html - -
2022-09-22 12:11:58.454 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-09-22 12:11:58.483 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-09-22 12:11:58.486 +01:00 [DBG] Request did not match any endpoints
2022-09-22 12:11:58.558 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-09-22 12:11:58.659 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-09-22 12:11:58.664 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/index.html - - - 200 - text/html;charset=utf-8 253.0624ms
2022-09-22 12:11:58.690 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - -
2022-09-22 12:11:58.694 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_vs/browserLink - -
2022-09-22 12:11:58.697 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 6.3226ms
2022-09-22 12:11:58.714 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 19.8382ms
2022-09-22 12:11:58.800 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - -
2022-09-22 12:11:58.802 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-09-22 12:11:58.804 +01:00 [DBG] Request did not match any endpoints
2022-09-22 12:11:58.956 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 156.6401ms
2022-09-22 12:12:15.180 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58
2022-09-22 12:12:15.188 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-22 12:12:15.195 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-22 12:12:15.197 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 12:12:15.199 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 12:12:15.416 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 12:12:15.436 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-22 12:12:15.444 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 12:12:15.446 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 12:12:15.446 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 12:12:15.448 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 12:12:15.449 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 12:12:15.451 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 12:12:15.452 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 12:12:15.463 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 12:12:15.465 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-22 12:12:15.466 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-22 12:12:15.473 +01:00 [DBG] Connection id "0HMKSHD1UMTJ0", Request id "0HMKSHD1UMTJ0:00000009": started reading request body.
2022-09-22 12:12:15.474 +01:00 [DBG] Connection id "0HMKSHD1UMTJ0", Request id "0HMKSHD1UMTJ0:00000009": done reading request body.
2022-09-22 12:12:15.478 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-22 12:12:15.479 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 12:12:15.480 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 12:12:15.481 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 12:12:15.490 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 12:12:15.559 +01:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'.
2022-09-22 12:12:16.294 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 12:12:16.330 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(x => x.Username == __model_Username_0)'
2022-09-22 12:12:16.501 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.username == @__model_Username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-22 12:12:16.528 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:12:16.558 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (27ms).
2022-09-22 12:12:16.565 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:12:16.856 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:12:16.867 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 12:12:16.932 +01:00 [INF] Executed DbCommand (68ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 12:12:16.966 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:12:17.001 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:12:17.007 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:12:17.012 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:12:17.272 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(user => user.RefreshTokenCollection
        .Any(reftoken => reftoken.RefToken == __token_0))'
2022-09-22 12:12:17.323 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM users AS u
            WHERE EXISTS (
                SELECT 1
                FROM refresh_token AS r
                WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__token_0)))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .Single()'
2022-09-22 12:12:17.333 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:12:17.337 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-22 12:12:17.340 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:12:17.341 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:12:17.341 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 12:12:17.345 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 12:12:17.347 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:12:17.348 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:12:17.348 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:12:17.358 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.UserId == __id_0)
    .AsNoTracking()
    .Select(rt => new RefreshToken{ 
        Id = rt.Id, 
        UserId = rt.UserId, 
        RefToken = rt.RefToken, 
        Expires = rt.Expires, 
        Created = rt.Created, 
        CreatedByIp = rt.CreatedByIp, 
        Revoked = rt.Revoked, 
        RevokedByIp = rt.RevokedByIp, 
        ReplacedByToken = rt.ReplacedByToken, 
        ReasonRevoked = rt.ReasonRevoked, 
        IsExpired = rt.IsExpired, 
        IsRevoked = rt.IsRevoked, 
        IsActive = rt.IsActive 
    }
    )'
2022-09-22 12:12:17.376 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Id -> 0
            UserId -> 1
            RefToken -> 2
            Expires -> 3
            Created -> 4
            CreatedByIp -> 5
            Revoked -> 6
            RevokedByIp -> 7
            ReplacedByToken -> 8
            ReasonRevoked -> 9
            IsExpired -> 10
            IsRevoked -> 11
            IsActive -> 12
        SELECT r.id AS Id, r.user_id AS UserId, r.token AS RefToken, r.expires AS Expires, r.created AS Created, r.created_by_ip AS CreatedByIp, r.revoked AS Revoked, r.revoked_by_ip AS RevokedByIp, r.replaced_by_token AS ReplacedByToken, r.reason_revoked AS ReasonRevoked, r.is_expired AS IsExpired, r.is_revoked AS IsRevoked, r.is_active AS IsActive
        FROM refresh_token AS r
        WHERE r.user_id == @__id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-22 12:12:17.379 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:12:17.380 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 12:12:17.381 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:12:17.382 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:12:17.384 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 12:12:17.388 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 12:12:17.391 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:12:17.392 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:12:17.393 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:12:17.406 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:12:17.423 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:12:17.450 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:12:17.455 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-22 12:12:17.458 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-22 12:12:17.479 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:12:17.489 +01:00 [DBG] The foreign key property 'RefreshToken.UserId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 12:12:17.502 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-22 12:12:17.511 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:12:17.513 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:12:17.515 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-22 12:12:17.521 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-22 12:12:17.564 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-22 12:12:17.576 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:12:17.578 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-22 12:12:17.580 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-22 12:12:17.588 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-22 12:12:17.597 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 12:12:17.599 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:12:17.602 +01:00 [DBG] Committing transaction.
2022-09-22 12:12:17.607 +01:00 [DBG] Committed transaction.
2022-09-22 12:12:17.609 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:12:17.610 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:12:17.611 +01:00 [DBG] Disposing transaction.
2022-09-22 12:12:17.615 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:12:17.620 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:12:17.622 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-22 12:12:17.627 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 12:12:17.630 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 12:12:17.633 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 12:12:17.636 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 12:12:17.637 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 12:12:17.638 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 12:12:17.639 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-22 12:12:17.652 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 2196.7233ms
2022-09-22 12:12:17.659 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 12:12:17.662 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 12:12:17.669 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58 - 200 - application/json;+charset=utf-8 2488.6348ms
2022-09-22 12:12:48.376 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-22 12:12:48.380 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-22 12:12:48.382 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-22 12:12:48.384 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 12:12:48.387 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 12:12:48.452 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 12:12:48.464 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-22 12:12:48.470 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(1) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-22 12:12:48.473 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:12:48.473 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 12:12:48.474 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:12:48.476 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:12:48.478 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 12:12:48.480 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 12:12:48.483 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:12:48.484 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:12:48.484 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:12:48.485 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:12:48.486 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 12:12:48.488 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-22 12:12:48.489 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 12:12:48.490 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 12:12:48.492 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 12:12:48.494 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 12:12:48.495 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 12:12:48.496 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 12:12:48.499 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 12:12:48.502 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(u => u.UserId == __userId_0)
    .Select(u => new AccountRequestResponse{ 
        Balance = u.Balance, 
        CreatedAt = u.CreatedAt, 
        Currency = u.Currency, 
        Id = u.Id 
    }
    )'
2022-09-22 12:12:48.505 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AccountRequestResponse>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Balance -> 0
            CreatedAt -> 1
            Currency -> 2
            Id -> 3
        SELECT a.balance AS Balance, a.created_at AS CreatedAt, a.currency AS Currency, a.id AS Id
        FROM accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountRequestResponse>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-22 12:12:48.507 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:12:48.508 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 12:12:48.509 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:12:48.510 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:12:48.512 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-22 12:12:48.516 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-22 12:12:48.523 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:12:48.524 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:12:48.525 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:12:48.529 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 12:12:48.531 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 12:12:48.532 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 12:12:48.533 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 12:12:48.534 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 12:12:48.534 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 12:12:48.535 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-22 12:12:48.539 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 42.9867ms
2022-09-22 12:12:48.540 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 12:12:48.541 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 12:12:48.545 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 168.6643ms
2022-09-22 12:15:00.382 +01:00 [DBG] Connection id "0HMKSHD1UMTJ0" is closing.
2022-09-22 12:15:00.384 +01:00 [DBG] Connection id "0HMKSHD1UMTJ0" is closed. The last processed stream ID was 11.
2022-09-22 12:15:00.386 +01:00 [DBG] Connection id "0HMKSHD1UMTJ0" received FIN.
2022-09-22 12:15:00.387 +01:00 [DBG] Connection id "0HMKSHD1UMTJ0" sending FIN because: "The client closed the connection."
2022-09-22 12:15:00.390 +01:00 [DBG] Connection id "0HMKSHD1UMTJ0" stopped.
2022-09-22 12:21:46.851 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-09-22 12:21:46.917 +01:00 [DBG] Hosting starting
2022-09-22 12:21:46.981 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9CC642E9838495A6C3C202DECA6A8AD300396DD2)
2022-09-22 12:21:47.018 +01:00 [INF] Now listening on: https://localhost:7036
2022-09-22 12:21:47.021 +01:00 [INF] Now listening on: http://localhost:5036
2022-09-22 12:21:47.023 +01:00 [DBG] Loaded hosting startup assembly APIBank
2022-09-22 12:21:47.024 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-09-22 12:21:47.024 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-09-22 12:21:47.025 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-22 12:21:47.025 +01:00 [INF] Hosting environment: Development
2022-09-22 12:21:47.026 +01:00 [INF] Content root path: C:\Users\mguedesa\OneDrive - NTT DATA EMEAL\Documentos\GitHub\OpenBankAPI-NTT\APIBank\APIBank\
2022-09-22 12:21:47.026 +01:00 [DBG] Hosting started
2022-09-22 12:21:47.131 +01:00 [DBG] Connection id "0HMKSHIHGRMSS" received FIN.
2022-09-22 12:21:47.131 +01:00 [DBG] Connection id "0HMKSHIHGRMSR" received FIN.
2022-09-22 12:21:47.131 +01:00 [DBG] Connection id "0HMKSHIHGRMSR" accepted.
2022-09-22 12:21:47.131 +01:00 [DBG] Connection id "0HMKSHIHGRMSS" accepted.
2022-09-22 12:21:47.135 +01:00 [DBG] Connection id "0HMKSHIHGRMSR" started.
2022-09-22 12:21:47.135 +01:00 [DBG] Connection id "0HMKSHIHGRMSS" started.
2022-09-22 12:21:47.147 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-22 12:21:47.147 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-22 12:21:47.166 +01:00 [DBG] Connection id "0HMKSHIHGRMSS" stopped.
2022-09-22 12:21:47.166 +01:00 [DBG] Connection id "0HMKSHIHGRMSR" stopped.
2022-09-22 12:21:47.167 +01:00 [DBG] Connection id "0HMKSHIHGRMSR" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 12:21:47.167 +01:00 [DBG] Connection id "0HMKSHIHGRMSS" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 12:21:47.331 +01:00 [DBG] Connection id "0HMKSHIHGRMST" accepted.
2022-09-22 12:21:47.333 +01:00 [DBG] Connection id "0HMKSHIHGRMST" started.
2022-09-22 12:21:47.378 +01:00 [DBG] Connection 0HMKSHIHGRMST established using the following protocol: "Tls12"
2022-09-22 12:21:47.443 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/index.html - -
2022-09-22 12:21:47.466 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-09-22 12:21:47.487 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-09-22 12:21:47.488 +01:00 [DBG] Request did not match any endpoints
2022-09-22 12:21:47.560 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-09-22 12:21:47.641 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-09-22 12:21:47.646 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/index.html - - - 200 - text/html;charset=utf-8 210.3187ms
2022-09-22 12:21:47.671 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_vs/browserLink - -
2022-09-22 12:21:47.671 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - -
2022-09-22 12:21:47.677 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 6.0739ms
2022-09-22 12:21:47.701 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 29.6080ms
2022-09-22 12:21:47.774 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - -
2022-09-22 12:21:47.776 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-09-22 12:21:47.777 +01:00 [DBG] Request did not match any endpoints
2022-09-22 12:21:47.882 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 107.5254ms
2022-09-22 12:23:59.375 +01:00 [DBG] Connection id "0HMKSHIHGRMST" is closing.
2022-09-22 12:23:59.388 +01:00 [DBG] Connection id "0HMKSHIHGRMST" is closed. The last processed stream ID was 7.
2022-09-22 12:23:59.395 +01:00 [DBG] Connection id "0HMKSHIHGRMST" received FIN.
2022-09-22 12:23:59.396 +01:00 [DBG] Connection id "0HMKSHIHGRMST" stopped.
2022-09-22 12:23:59.400 +01:00 [DBG] Connection id "0HMKSHIHGRMST" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 12:31:41.801 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-09-22 12:31:42.005 +01:00 [DBG] Hosting starting
2022-09-22 12:31:42.416 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9CC642E9838495A6C3C202DECA6A8AD300396DD2)
2022-09-22 12:31:42.771 +01:00 [INF] Now listening on: https://localhost:7036
2022-09-22 12:31:43.053 +01:00 [DBG] Connection id "0HMKSHO340VO4" received FIN.
2022-09-22 12:31:43.053 +01:00 [DBG] Connection id "0HMKSHO340VO3" received FIN.
2022-09-22 12:31:43.335 +01:00 [INF] Now listening on: http://localhost:5036
2022-09-22 12:31:43.351 +01:00 [DBG] Loaded hosting startup assembly APIBank
2022-09-22 12:31:43.352 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-09-22 12:31:43.353 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-09-22 12:31:43.354 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-22 12:31:43.359 +01:00 [INF] Hosting environment: Development
2022-09-22 12:31:43.363 +01:00 [DBG] Connection id "0HMKSHO340VO3" accepted.
2022-09-22 12:31:43.363 +01:00 [DBG] Connection id "0HMKSHO340VO4" accepted.
2022-09-22 12:31:43.364 +01:00 [INF] Content root path: C:\Users\mguedesa\OneDrive - NTT DATA EMEAL\Documentos\GitHub\OpenBankAPI-NTT\APIBank\APIBank\
2022-09-22 12:31:43.368 +01:00 [DBG] Hosting started
2022-09-22 12:31:43.368 +01:00 [DBG] Connection id "0HMKSHO340VO3" started.
2022-09-22 12:31:43.368 +01:00 [DBG] Connection id "0HMKSHO340VO4" started.
2022-09-22 12:31:43.371 +01:00 [DBG] Connection id "0HMKSHO340VO5" accepted.
2022-09-22 12:31:43.374 +01:00 [DBG] Connection id "0HMKSHO340VO5" started.
2022-09-22 12:31:43.413 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-22 12:31:43.413 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-22 12:31:43.662 +01:00 [DBG] Connection 0HMKSHO340VO5 established using the following protocol: "Tls12"
2022-09-22 12:31:43.673 +01:00 [DBG] Connection id "0HMKSHO340VO4" stopped.
2022-09-22 12:31:43.673 +01:00 [DBG] Connection id "0HMKSHO340VO3" stopped.
2022-09-22 12:31:43.677 +01:00 [DBG] Connection id "0HMKSHO340VO4" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 12:31:43.677 +01:00 [DBG] Connection id "0HMKSHO340VO3" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 12:31:43.800 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/index.html - -
2022-09-22 12:31:43.871 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-09-22 12:31:43.950 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-09-22 12:31:43.952 +01:00 [DBG] Request did not match any endpoints
2022-09-22 12:31:44.151 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-09-22 12:31:44.509 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-09-22 12:31:44.535 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - -
2022-09-22 12:31:44.550 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/index.html - - - 200 - text/html;charset=utf-8 746.2285ms
2022-09-22 12:31:44.552 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_vs/browserLink - -
2022-09-22 12:31:44.555 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 20.2896ms
2022-09-22 12:31:44.612 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 59.7778ms
2022-09-22 12:31:44.689 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - -
2022-09-22 12:31:44.692 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-09-22 12:31:44.694 +01:00 [DBG] Request did not match any endpoints
2022-09-22 12:31:44.918 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 228.0796ms
2022-09-22 12:31:55.456 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58
2022-09-22 12:31:55.479 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-22 12:31:55.486 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-22 12:31:55.490 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 12:31:55.493 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 12:31:55.925 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 12:31:55.946 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-22 12:31:55.948 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 12:31:55.949 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 12:31:55.951 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 12:31:55.953 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 12:31:55.955 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 12:31:55.958 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 12:31:55.959 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 12:31:55.973 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 12:31:55.976 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-22 12:31:55.978 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-22 12:31:55.982 +01:00 [DBG] Connection id "0HMKSHO340VO5", Request id "0HMKSHO340VO5:00000009": started reading request body.
2022-09-22 12:31:55.984 +01:00 [DBG] Connection id "0HMKSHO340VO5", Request id "0HMKSHO340VO5:00000009": done reading request body.
2022-09-22 12:31:55.991 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-22 12:31:55.992 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 12:31:55.993 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 12:31:55.994 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 12:31:56.002 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 12:31:56.140 +01:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'.
2022-09-22 12:31:57.573 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 12:31:57.656 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(x => x.Username == __model_Username_0)'
2022-09-22 12:31:58.207 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.username == @__model_Username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-22 12:31:58.273 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:31:58.376 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (98ms).
2022-09-22 12:31:58.389 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:31:58.718 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:31:58.737 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 12:31:58.889 +01:00 [INF] Executed DbCommand (150ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 12:31:58.985 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:31:59.083 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:31:59.090 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:31:59.099 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:31:59.688 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(user => user.RefreshTokenCollection
        .Any(reftoken => reftoken.RefToken == __token_0))'
2022-09-22 12:31:59.860 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM users AS u
            WHERE EXISTS (
                SELECT 1
                FROM refresh_token AS r
                WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__token_0)))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .Single()'
2022-09-22 12:31:59.873 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:31:59.875 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 12:31:59.875 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:31:59.877 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:31:59.878 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 12:31:59.882 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 12:31:59.886 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:31:59.887 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:31:59.888 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:31:59.899 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.UserId == __id_0)
    .AsNoTracking()
    .Select(rt => new RefreshToken{ 
        Id = rt.Id, 
        UserId = rt.UserId, 
        RefToken = rt.RefToken, 
        Expires = rt.Expires, 
        Created = rt.Created, 
        CreatedByIp = rt.CreatedByIp, 
        Revoked = rt.Revoked, 
        RevokedByIp = rt.RevokedByIp, 
        ReplacedByToken = rt.ReplacedByToken, 
        ReasonRevoked = rt.ReasonRevoked, 
        IsExpired = rt.IsExpired, 
        IsRevoked = rt.IsRevoked, 
        IsActive = rt.IsActive 
    }
    )'
2022-09-22 12:31:59.923 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Id -> 0
            UserId -> 1
            RefToken -> 2
            Expires -> 3
            Created -> 4
            CreatedByIp -> 5
            Revoked -> 6
            RevokedByIp -> 7
            ReplacedByToken -> 8
            ReasonRevoked -> 9
            IsExpired -> 10
            IsRevoked -> 11
            IsActive -> 12
        SELECT r.id AS Id, r.user_id AS UserId, r.token AS RefToken, r.expires AS Expires, r.created AS Created, r.created_by_ip AS CreatedByIp, r.revoked AS Revoked, r.revoked_by_ip AS RevokedByIp, r.replaced_by_token AS ReplacedByToken, r.reason_revoked AS ReasonRevoked, r.is_expired AS IsExpired, r.is_revoked AS IsRevoked, r.is_active AS IsActive
        FROM refresh_token AS r
        WHERE r.user_id == @__id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-22 12:31:59.927 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:31:59.928 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 12:31:59.929 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:31:59.930 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:31:59.931 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 12:31:59.939 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 12:31:59.941 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:31:59.942 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:31:59.942 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:31:59.957 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:31:59.997 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:32:00.059 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:32:00.068 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-22 12:32:00.072 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-22 12:32:00.107 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:32:00.127 +01:00 [DBG] The foreign key property 'RefreshToken.UserId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 12:32:00.149 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-22 12:32:00.162 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:32:00.164 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:32:00.169 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-22 12:32:00.178 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-22 12:32:00.267 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-22 12:32:00.290 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:32:00.292 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 12:32:00.294 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-22 12:32:00.309 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-22 12:32:00.331 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 12:32:00.336 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:32:00.341 +01:00 [DBG] Committing transaction.
2022-09-22 12:32:00.351 +01:00 [DBG] Committed transaction.
2022-09-22 12:32:00.352 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:32:00.353 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:32:00.356 +01:00 [DBG] Disposing transaction.
2022-09-22 12:32:00.359 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:32:00.361 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:32:00.364 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-22 12:32:00.370 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 12:32:00.377 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 12:32:00.378 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 12:32:00.379 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 12:32:00.380 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 12:32:00.381 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 12:32:00.383 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-22 12:32:00.400 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 4437.964ms
2022-09-22 12:32:00.402 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 12:32:00.408 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 12:32:00.414 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58 - 200 - application/json;+charset=utf-8 4958.1222ms
2022-09-22 12:32:12.067 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-22 12:32:12.071 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-22 12:32:12.073 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-22 12:32:12.076 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 12:32:12.077 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 12:32:12.244 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 12:32:12.259 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-22 12:32:12.264 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(1) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-22 12:32:12.265 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:32:12.266 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 12:32:12.267 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:32:12.267 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:32:12.268 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 12:32:12.274 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 12:32:12.276 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:32:12.277 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:32:12.278 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:32:12.279 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:32:12.279 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 12:32:12.281 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-22 12:32:12.282 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 12:32:12.283 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 12:32:12.286 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 12:32:12.288 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 12:32:12.290 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 12:32:12.291 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 12:32:12.292 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 12:32:12.296 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(u => u.UserId == __userId_0)
    .Select(u => new AccountRequestResponse{ 
        Balance = u.Balance, 
        CreatedAt = u.CreatedAt, 
        Currency = u.Currency, 
        Id = u.Id 
    }
    )'
2022-09-22 12:32:12.299 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AccountRequestResponse>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Balance -> 0
            CreatedAt -> 1
            Currency -> 2
            Id -> 3
        SELECT a.balance AS Balance, a.created_at AS CreatedAt, a.currency AS Currency, a.id AS Id
        FROM accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountRequestResponse>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-22 12:32:12.302 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:32:12.303 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 12:32:12.305 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:32:12.306 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:32:12.307 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-22 12:32:12.310 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-22 12:32:12.324 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:32:12.325 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:32:12.325 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:32:12.326 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 12:32:12.328 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 12:32:12.329 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 12:32:12.329 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 12:32:12.330 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 12:32:12.330 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 12:32:12.334 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-22 12:32:12.343 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 51.9294ms
2022-09-22 12:32:12.344 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 12:32:12.345 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 12:32:12.348 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 280.9174ms
2022-09-22 12:32:22.887 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Accounts/Create application/json 40
2022-09-22 12:32:22.902 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/Create'
2022-09-22 12:32:22.904 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)' with route pattern 'api/Accounts/Create' is valid for the request path '/api/Accounts/Create'
2022-09-22 12:32:22.908 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-22 12:32:22.917 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 12:32:22.976 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 12:32:22.984 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:32:22.985 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 12:32:22.987 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:32:22.988 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:32:22.989 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 12:32:22.991 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 12:32:22.992 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:32:22.993 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:32:22.994 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:32:22.995 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:32:22.996 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-22 12:32:22.998 +01:00 [INF] Route matched with {action = "Create", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.AccountCreateRequest) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-22 12:32:23.000 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 12:32:23.001 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 12:32:23.003 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 12:32:23.004 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 12:32:23.005 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 12:32:23.006 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 12:32:23.007 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 12:32:23.008 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-22 12:32:23.009 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' using the name '' in request data ...
2022-09-22 12:32:23.010 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-22 12:32:23.012 +01:00 [DBG] Connection id "0HMKSHO340VO5", Request id "0HMKSHO340VO5:0000000D": started reading request body.
2022-09-22 12:32:23.013 +01:00 [DBG] Connection id "0HMKSHO340VO5", Request id "0HMKSHO340VO5:0000000D": done reading request body.
2022-09-22 12:32:23.019 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.AccountCreateRequest'
2022-09-22 12:32:23.019 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-22 12:32:23.020 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-22 12:32:23.021 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-22 12:32:23.024 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-22 12:32:23.031 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:32:23.032 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:32:23.034 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-22 12:32:23.034 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-22 12:32:23.037 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:32:23.058 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:32:23.060 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-22 12:32:23.062 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-22 12:32:23.070 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-22 12:32:23.074 +01:00 [DBG] Creating transaction savepoint.
2022-09-22 12:32:23.080 +01:00 [DBG] Created transaction savepoint.
2022-09-22 12:32:23.083 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:32:23.085 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-22 12:32:23.088 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (balance, currency, user_id)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-22 12:32:23.110 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (balance, currency, user_id)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-22 12:32:23.120 +01:00 [DBG] The foreign key property 'Account.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 12:32:23.125 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:32:23.130 +01:00 [DBG] Releasing transaction savepoint.
2022-09-22 12:32:23.134 +01:00 [DBG] Released transaction savepoint.
2022-09-22 12:32:23.139 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:32:23.140 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-22 12:32:23.143 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:32:23.156 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:32:23.157 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-22 12:32:23.159 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-22 12:32:23.162 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-22 12:32:23.163 +01:00 [DBG] Creating transaction savepoint.
2022-09-22 12:32:23.165 +01:00 [DBG] Created transaction savepoint.
2022-09-22 12:32:23.166 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:32:23.166 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 12:32:23.167 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-22 12:32:23.170 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-22 12:32:23.174 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 12:32:23.175 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:32:23.176 +01:00 [DBG] Releasing transaction savepoint.
2022-09-22 12:32:23.177 +01:00 [DBG] Released transaction savepoint.
2022-09-22 12:32:23.179 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:32:23.180 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-22 12:32:23.181 +01:00 [DBG] Committing transaction.
2022-09-22 12:32:23.184 +01:00 [DBG] Committed transaction.
2022-09-22 12:32:23.184 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:32:23.185 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:32:23.186 +01:00 [DBG] Disposing transaction.
2022-09-22 12:32:23.186 +01:00 [INF] Account Created
2022-09-22 12:32:23.187 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 12:32:23.191 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 12:32:23.192 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 12:32:23.193 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 12:32:23.195 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 12:32:23.195 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 12:32:23.196 +01:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-09-22 12:32:23.200 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.Create (APIBank) in 193.8171ms
2022-09-22 12:32:23.201 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-22 12:32:23.202 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 12:32:23.204 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Accounts/Create application/json 40 - 201 - application/json;+charset=utf-8 316.9932ms
2022-09-22 12:34:23.613 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-09-22 12:34:23.773 +01:00 [DBG] Hosting starting
2022-09-22 12:34:24.459 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9CC642E9838495A6C3C202DECA6A8AD300396DD2)
2022-09-22 12:34:24.531 +01:00 [INF] Now listening on: https://localhost:7036
2022-09-22 12:34:24.533 +01:00 [INF] Now listening on: http://localhost:5036
2022-09-22 12:34:24.536 +01:00 [DBG] Loaded hosting startup assembly APIBank
2022-09-22 12:34:24.538 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-09-22 12:34:24.539 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-09-22 12:34:24.540 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-22 12:34:24.542 +01:00 [INF] Hosting environment: Development
2022-09-22 12:34:24.543 +01:00 [INF] Content root path: C:\Users\mguedesa\OneDrive - NTT DATA EMEAL\Documentos\GitHub\OpenBankAPI-NTT\APIBank\APIBank\
2022-09-22 12:34:24.544 +01:00 [DBG] Hosting started
2022-09-22 12:34:24.627 +01:00 [DBG] Connection id "0HMKSHPJ8SL8P" accepted.
2022-09-22 12:34:24.627 +01:00 [DBG] Connection id "0HMKSHPJ8SL8O" accepted.
2022-09-22 12:34:24.631 +01:00 [DBG] Connection id "0HMKSHPJ8SL8P" started.
2022-09-22 12:34:24.631 +01:00 [DBG] Connection id "0HMKSHPJ8SL8O" started.
2022-09-22 12:34:24.644 +01:00 [DBG] Connection id "0HMKSHPJ8SL8O" received FIN.
2022-09-22 12:34:24.644 +01:00 [DBG] Connection id "0HMKSHPJ8SL8P" received FIN.
2022-09-22 12:34:24.661 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-22 12:34:24.661 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-22 12:34:24.745 +01:00 [DBG] Connection id "0HMKSHPJ8SL8P" stopped.
2022-09-22 12:34:24.745 +01:00 [DBG] Connection id "0HMKSHPJ8SL8O" stopped.
2022-09-22 12:34:24.753 +01:00 [DBG] Connection id "0HMKSHPJ8SL8O" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 12:34:24.754 +01:00 [DBG] Connection id "0HMKSHPJ8SL8P" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 12:34:24.899 +01:00 [DBG] Connection id "0HMKSHPJ8SL8Q" accepted.
2022-09-22 12:34:24.901 +01:00 [DBG] Connection id "0HMKSHPJ8SL8Q" started.
2022-09-22 12:34:24.978 +01:00 [DBG] Connection 0HMKSHPJ8SL8Q established using the following protocol: "Tls12"
2022-09-22 12:34:25.098 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/index.html - -
2022-09-22 12:34:25.174 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-09-22 12:34:25.253 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-09-22 12:34:25.258 +01:00 [DBG] Request did not match any endpoints
2022-09-22 12:34:25.390 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-09-22 12:34:25.533 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-09-22 12:34:25.539 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/index.html - - - 200 - text/html;charset=utf-8 446.3026ms
2022-09-22 12:34:25.558 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_vs/browserLink - -
2022-09-22 12:34:25.558 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - -
2022-09-22 12:34:25.569 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 11.2409ms
2022-09-22 12:34:25.587 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 28.9453ms
2022-09-22 12:34:25.659 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - -
2022-09-22 12:34:25.660 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-09-22 12:34:25.661 +01:00 [DBG] Request did not match any endpoints
2022-09-22 12:34:25.858 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 198.8733ms
2022-09-22 12:34:49.323 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58
2022-09-22 12:34:49.337 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-22 12:34:49.343 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-22 12:34:49.349 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 12:34:49.352 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 12:34:49.792 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 12:34:49.826 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-22 12:34:49.834 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 12:34:49.836 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 12:34:49.838 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 12:34:49.839 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 12:34:49.841 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 12:34:49.844 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 12:34:49.846 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 12:34:49.863 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 12:34:49.868 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-22 12:34:49.871 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-22 12:34:49.876 +01:00 [DBG] Connection id "0HMKSHPJ8SL8Q", Request id "0HMKSHPJ8SL8Q:00000009": started reading request body.
2022-09-22 12:34:49.878 +01:00 [DBG] Connection id "0HMKSHPJ8SL8Q", Request id "0HMKSHPJ8SL8Q:00000009": done reading request body.
2022-09-22 12:34:49.886 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-22 12:34:49.887 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 12:34:49.888 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 12:34:49.889 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 12:34:49.900 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 12:34:50.040 +01:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'.
2022-09-22 12:34:51.651 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 12:34:51.758 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(x => x.Username == __model_Username_0)'
2022-09-22 12:34:52.357 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.username == @__model_Username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-22 12:34:52.447 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:34:52.591 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (137ms).
2022-09-22 12:34:52.604 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:34:52.905 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:34:52.933 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 12:34:53.074 +01:00 [INF] Executed DbCommand (149ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 12:34:53.147 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:34:53.238 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:34:53.247 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:34:53.256 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:34:53.791 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(user => user.RefreshTokenCollection
        .Any(reftoken => reftoken.RefToken == __token_0))'
2022-09-22 12:34:53.943 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM users AS u
            WHERE EXISTS (
                SELECT 1
                FROM refresh_token AS r
                WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__token_0)))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .Single()'
2022-09-22 12:34:53.962 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:34:53.965 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-22 12:34:53.966 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:34:53.967 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:34:53.968 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 12:34:53.972 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 12:34:53.977 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:34:53.979 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:34:53.979 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:34:53.990 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.UserId == __id_0)
    .AsNoTracking()
    .Select(rt => new RefreshToken{ 
        Id = rt.Id, 
        UserId = rt.UserId, 
        RefToken = rt.RefToken, 
        Expires = rt.Expires, 
        Created = rt.Created, 
        CreatedByIp = rt.CreatedByIp, 
        Revoked = rt.Revoked, 
        RevokedByIp = rt.RevokedByIp, 
        ReplacedByToken = rt.ReplacedByToken, 
        ReasonRevoked = rt.ReasonRevoked, 
        IsExpired = rt.IsExpired, 
        IsRevoked = rt.IsRevoked, 
        IsActive = rt.IsActive 
    }
    )'
2022-09-22 12:34:54.023 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Id -> 0
            UserId -> 1
            RefToken -> 2
            Expires -> 3
            Created -> 4
            CreatedByIp -> 5
            Revoked -> 6
            RevokedByIp -> 7
            ReplacedByToken -> 8
            ReasonRevoked -> 9
            IsExpired -> 10
            IsRevoked -> 11
            IsActive -> 12
        SELECT r.id AS Id, r.user_id AS UserId, r.token AS RefToken, r.expires AS Expires, r.created AS Created, r.created_by_ip AS CreatedByIp, r.revoked AS Revoked, r.revoked_by_ip AS RevokedByIp, r.replaced_by_token AS ReplacedByToken, r.reason_revoked AS ReasonRevoked, r.is_expired AS IsExpired, r.is_revoked AS IsRevoked, r.is_active AS IsActive
        FROM refresh_token AS r
        WHERE r.user_id == @__id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-22 12:34:54.030 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:34:54.032 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 12:34:54.034 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:34:54.035 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:34:54.037 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 12:34:54.050 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 12:34:54.055 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:34:54.056 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:34:54.057 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:34:54.076 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:34:54.118 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:34:54.169 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:34:54.178 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-22 12:34:54.182 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-22 12:34:54.228 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:34:54.256 +01:00 [DBG] The foreign key property 'RefreshToken.UserId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 12:34:54.277 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-22 12:34:54.291 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:34:54.297 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:34:54.301 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-22 12:34:54.318 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-22 12:34:54.419 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-22 12:34:54.447 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:34:54.449 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 12:34:54.453 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-22 12:34:54.473 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-22 12:34:54.492 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 12:34:54.499 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:34:54.504 +01:00 [DBG] Committing transaction.
2022-09-22 12:34:54.517 +01:00 [DBG] Committed transaction.
2022-09-22 12:34:54.519 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:34:54.521 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:34:54.524 +01:00 [DBG] Disposing transaction.
2022-09-22 12:34:54.530 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:34:54.532 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:34:54.535 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-22 12:34:54.541 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 12:34:54.547 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 12:34:54.548 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 12:34:54.549 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 12:34:54.550 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 12:34:54.551 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 12:34:54.552 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-22 12:34:54.569 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 4720.8058ms
2022-09-22 12:34:54.571 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 12:34:54.579 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 12:34:54.586 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58 - 200 - application/json;+charset=utf-8 5262.9461ms
2022-09-22 12:35:13.596 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-22 12:35:13.600 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-22 12:35:13.601 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-22 12:35:13.604 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 12:35:13.604 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 12:35:13.733 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 12:35:13.743 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-22 12:35:13.749 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(1) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-22 12:35:13.753 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:35:13.753 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 12:35:13.754 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:35:13.755 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:35:13.755 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 12:35:13.757 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 12:35:13.759 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:35:13.760 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:35:13.761 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:35:13.762 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:35:13.763 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 12:35:13.764 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-22 12:35:13.768 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 12:35:13.769 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 12:35:13.770 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 12:35:13.771 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 12:35:13.772 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 12:35:13.773 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 12:35:13.774 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 12:35:13.778 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(u => u.UserId == __userId_0)
    .Select(u => new AccountRequestResponse{ 
        Balance = u.Balance, 
        CreatedAt = u.CreatedAt, 
        Currency = u.Currency, 
        Id = u.Id 
    }
    )'
2022-09-22 12:35:13.782 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AccountRequestResponse>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Balance -> 0
            CreatedAt -> 1
            Currency -> 2
            Id -> 3
        SELECT a.balance AS Balance, a.created_at AS CreatedAt, a.currency AS Currency, a.id AS Id
        FROM accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountRequestResponse>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-22 12:35:13.784 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:35:13.785 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 12:35:13.786 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:35:13.786 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:35:13.787 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-22 12:35:13.790 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-22 12:35:13.801 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:35:13.802 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:35:13.802 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:35:13.803 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 12:35:13.805 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 12:35:13.806 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 12:35:13.806 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 12:35:13.807 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 12:35:13.807 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 12:35:13.808 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-22 12:35:13.816 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 43.1374ms
2022-09-22 12:35:13.817 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 12:35:13.818 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 12:35:13.819 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 222.7436ms
2022-09-22 12:35:25.967 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Accounts/Create application/json 40
2022-09-22 12:35:25.971 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/Create'
2022-09-22 12:35:25.973 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)' with route pattern 'api/Accounts/Create' is valid for the request path '/api/Accounts/Create'
2022-09-22 12:35:25.974 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-22 12:35:25.976 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 12:35:26.034 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 12:35:26.042 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:35:26.044 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 12:35:26.046 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:35:26.047 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:35:26.048 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 12:35:26.050 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 12:35:26.053 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:35:26.054 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:35:26.054 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:35:26.055 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:35:26.056 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-22 12:35:26.057 +01:00 [INF] Route matched with {action = "Create", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(APIBank.Models.Requests.AccountCreateRequest) on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-22 12:35:26.060 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 12:35:26.062 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 12:35:26.063 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 12:35:26.066 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 12:35:26.068 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 12:35:26.070 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 12:35:26.071 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 12:35:26.073 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-22 12:35:26.075 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' using the name '' in request data ...
2022-09-22 12:35:26.077 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-22 12:35:26.079 +01:00 [DBG] Connection id "0HMKSHPJ8SL8Q", Request id "0HMKSHPJ8SL8Q:0000000D": started reading request body.
2022-09-22 12:35:26.081 +01:00 [DBG] Connection id "0HMKSHPJ8SL8Q", Request id "0HMKSHPJ8SL8Q:0000000D": done reading request body.
2022-09-22 12:35:26.086 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.AccountCreateRequest'
2022-09-22 12:35:26.087 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-22 12:35:26.088 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-22 12:35:26.088 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest' ...
2022-09-22 12:35:26.092 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.AccountCreateRequest'.
2022-09-22 12:35:26.098 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 12:35:26.101 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:35:26.102 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-22 12:35:26.103 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-22 12:35:26.106 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:35:26.127 +01:00 [DBG] Context 'PostgresContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:35:26.129 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-22 12:35:26.130 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-22 12:35:26.138 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-22 12:35:26.142 +01:00 [DBG] Creating transaction savepoint.
2022-09-22 12:35:26.147 +01:00 [DBG] Created transaction savepoint.
2022-09-22 12:35:26.150 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:35:26.153 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-22 12:35:26.154 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (balance, currency, user_id)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-22 12:35:26.166 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (balance, currency, user_id)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-22 12:35:26.172 +01:00 [DBG] The foreign key property 'Account.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 12:35:26.175 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:35:26.178 +01:00 [DBG] Releasing transaction savepoint.
2022-09-22 12:35:26.181 +01:00 [DBG] Released transaction savepoint.
2022-09-22 12:35:26.188 +01:00 [DBG] An entity of type 'Account' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:35:26.190 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-22 12:35:26.191 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.Transaction'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:35:26.203 +01:00 [DBG] Context 'PostgresContext' started tracking 'Transaction' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:35:26.210 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-22 12:35:26.211 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-22 12:35:26.214 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-22 12:35:26.216 +01:00 [DBG] Creating transaction savepoint.
2022-09-22 12:35:26.218 +01:00 [DBG] Created transaction savepoint.
2022-09-22 12:35:26.219 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 12:35:26.221 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 12:35:26.224 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-22 12:35:26.226 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO transactions (account_id, amount, balance)
VALUES (@p0, @p1, @p2)
RETURNING id, created_at;
2022-09-22 12:35:26.229 +01:00 [DBG] The foreign key property 'Transaction.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 12:35:26.231 +01:00 [DBG] A data reader was disposed.
2022-09-22 12:35:26.231 +01:00 [DBG] Releasing transaction savepoint.
2022-09-22 12:35:26.233 +01:00 [DBG] Released transaction savepoint.
2022-09-22 12:35:26.235 +01:00 [DBG] An entity of type 'Transaction' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 12:35:26.237 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 1 entities written to the database.
2022-09-22 12:35:26.238 +01:00 [DBG] Committing transaction.
2022-09-22 12:35:26.240 +01:00 [DBG] Committed transaction.
2022-09-22 12:35:26.241 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 12:35:26.242 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 12:35:26.243 +01:00 [DBG] Disposing transaction.
2022-09-22 12:35:26.243 +01:00 [INF] Account Created
2022-09-22 12:35:26.244 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 12:35:26.247 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 12:35:26.247 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 12:35:26.248 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 12:35:26.249 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 12:35:26.250 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 12:35:26.251 +01:00 [INF] Executing CreatedResult, writing value of type 'APIBank.Models.Responses.AccountRequestResponse'.
2022-09-22 12:35:26.253 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.Create (APIBank) in 183.1539ms
2022-09-22 12:35:26.255 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.Create (APIBank)'
2022-09-22 12:35:26.256 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 12:35:26.257 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Accounts/Create application/json 40 - 201 - application/json;+charset=utf-8 290.1370ms
2022-09-22 13:48:19.091 +01:00 [DBG] Connection id "0HMKSHPJ8SL8Q" received FIN.
2022-09-22 13:48:19.412 +01:00 [DBG] Connection id "0HMKSHPJ8SL8Q" is closed. The last processed stream ID was 13.
2022-09-22 13:48:19.424 +01:00 [DBG] Connection id "0HMKSHPJ8SL8Q" sending FIN because: "The client closed the connection."
2022-09-22 13:48:19.429 +01:00 [DBG] Connection id "0HMKSHPJ8SL8Q" stopped.
2022-09-22 15:58:24.947 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-09-22 15:58:25.024 +01:00 [DBG] Hosting starting
2022-09-22 15:58:25.101 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9CC642E9838495A6C3C202DECA6A8AD300396DD2)
2022-09-22 15:58:25.141 +01:00 [INF] Now listening on: https://localhost:7036
2022-09-22 15:58:25.144 +01:00 [INF] Now listening on: http://localhost:5036
2022-09-22 15:58:25.146 +01:00 [DBG] Loaded hosting startup assembly APIBank
2022-09-22 15:58:25.147 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-09-22 15:58:25.147 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-09-22 15:58:25.148 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-22 15:58:25.149 +01:00 [INF] Hosting environment: Development
2022-09-22 15:58:25.149 +01:00 [INF] Content root path: C:\Users\mguedesa\OneDrive - NTT DATA EMEAL\Documentos\GitHub\OpenBankAPI-NTT\APIBank\APIBank\
2022-09-22 15:58:25.150 +01:00 [DBG] Hosting started
2022-09-22 15:58:25.639 +01:00 [DBG] Connection id "0HMKSLBJC9C06" accepted.
2022-09-22 15:58:25.639 +01:00 [DBG] Connection id "0HMKSLBJC9C07" accepted.
2022-09-22 15:58:25.643 +01:00 [DBG] Connection id "0HMKSLBJC9C06" started.
2022-09-22 15:58:25.643 +01:00 [DBG] Connection id "0HMKSLBJC9C07" started.
2022-09-22 15:58:25.644 +01:00 [DBG] Connection id "0HMKSLBJC9C07" received FIN.
2022-09-22 15:58:25.644 +01:00 [DBG] Connection id "0HMKSLBJC9C06" received FIN.
2022-09-22 15:58:25.659 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-22 15:58:25.659 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-22 15:58:25.707 +01:00 [DBG] Connection id "0HMKSLBJC9C07" stopped.
2022-09-22 15:58:25.707 +01:00 [DBG] Connection id "0HMKSLBJC9C06" stopped.
2022-09-22 15:58:25.711 +01:00 [DBG] Connection id "0HMKSLBJC9C07" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 15:58:25.711 +01:00 [DBG] Connection id "0HMKSLBJC9C06" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 15:58:25.872 +01:00 [DBG] Connection id "0HMKSLBJC9C08" accepted.
2022-09-22 15:58:25.887 +01:00 [DBG] Connection id "0HMKSLBJC9C08" started.
2022-09-22 15:58:26.007 +01:00 [DBG] Connection 0HMKSLBJC9C08 established using the following protocol: "Tls12"
2022-09-22 15:58:26.094 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/index.html - -
2022-09-22 15:58:26.133 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-09-22 15:58:26.169 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-09-22 15:58:26.171 +01:00 [DBG] Request did not match any endpoints
2022-09-22 15:58:26.261 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-09-22 15:58:26.354 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-09-22 15:58:26.364 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/index.html - - - 200 - text/html;charset=utf-8 277.4885ms
2022-09-22 15:58:26.398 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_vs/browserLink - -
2022-09-22 15:58:26.398 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - -
2022-09-22 15:58:26.404 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 5.5736ms
2022-09-22 15:58:26.428 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 29.9625ms
2022-09-22 15:58:26.519 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - -
2022-09-22 15:58:26.522 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-09-22 15:58:26.525 +01:00 [DBG] Request did not match any endpoints
2022-09-22 15:58:26.750 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 230.7587ms
2022-09-22 15:58:37.487 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58
2022-09-22 15:58:37.507 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-22 15:58:37.517 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-22 15:58:37.521 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 15:58:37.523 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 15:58:37.793 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 15:58:37.815 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-22 15:58:37.819 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 15:58:37.821 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 15:58:37.822 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 15:58:37.823 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 15:58:37.824 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 15:58:37.826 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 15:58:37.827 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 15:58:37.839 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 15:58:37.841 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-22 15:58:37.842 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-22 15:58:37.848 +01:00 [DBG] Connection id "0HMKSLBJC9C08", Request id "0HMKSLBJC9C08:00000009": started reading request body.
2022-09-22 15:58:37.850 +01:00 [DBG] Connection id "0HMKSLBJC9C08", Request id "0HMKSLBJC9C08:00000009": done reading request body.
2022-09-22 15:58:37.855 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-22 15:58:37.856 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 15:58:37.858 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 15:58:37.859 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 15:58:37.871 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 15:58:37.951 +01:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'.
2022-09-22 15:58:38.756 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 15:58:38.796 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(x => x.Username == __model_Username_0)'
2022-09-22 15:58:38.979 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.username == @__model_Username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-22 15:58:39.008 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:58:39.046 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (33ms).
2022-09-22 15:58:39.054 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:58:39.309 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:39.325 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 15:58:39.419 +01:00 [INF] Executed DbCommand (96ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 15:58:39.458 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:58:39.504 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:58:39.508 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:39.514 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:58:39.686 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(user => user.RefreshTokenCollection
        .Any(reftoken => reftoken.RefToken == __token_0))'
2022-09-22 15:58:39.736 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM users AS u
            WHERE EXISTS (
                SELECT 1
                FROM refresh_token AS r
                WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__token_0)))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .Single()'
2022-09-22 15:58:39.746 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:58:39.748 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 15:58:39.749 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:58:39.750 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:39.751 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 15:58:39.756 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 15:58:39.759 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:58:39.760 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:39.762 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:58:39.883 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.UserId == __id_0)
    .AsNoTracking()
    .Select(rt => new RefreshToken{ 
        Id = rt.Id, 
        UserId = rt.UserId, 
        RefToken = rt.RefToken, 
        Expires = rt.Expires, 
        Created = rt.Created, 
        CreatedByIp = rt.CreatedByIp, 
        Revoked = rt.Revoked, 
        RevokedByIp = rt.RevokedByIp, 
        ReplacedByToken = rt.ReplacedByToken, 
        ReasonRevoked = rt.ReasonRevoked, 
        IsExpired = rt.IsExpired, 
        IsRevoked = rt.IsRevoked, 
        IsActive = rt.IsActive 
    }
    )'
2022-09-22 15:58:39.900 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Id -> 0
            UserId -> 1
            RefToken -> 2
            Expires -> 3
            Created -> 4
            CreatedByIp -> 5
            Revoked -> 6
            RevokedByIp -> 7
            ReplacedByToken -> 8
            ReasonRevoked -> 9
            IsExpired -> 10
            IsRevoked -> 11
            IsActive -> 12
        SELECT r.id AS Id, r.user_id AS UserId, r.token AS RefToken, r.expires AS Expires, r.created AS Created, r.created_by_ip AS CreatedByIp, r.revoked AS Revoked, r.revoked_by_ip AS RevokedByIp, r.replaced_by_token AS ReplacedByToken, r.reason_revoked AS ReasonRevoked, r.is_expired AS IsExpired, r.is_revoked AS IsRevoked, r.is_active AS IsActive
        FROM refresh_token AS r
        WHERE r.user_id == @__id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-22 15:58:39.903 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:58:39.904 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 15:58:39.905 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:58:39.906 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:39.906 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 15:58:39.910 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 15:58:39.915 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:58:39.915 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:39.917 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:58:39.974 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:58:39.987 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:58:39.993 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-22 15:58:39.998 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-22 15:58:40.026 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:58:40.046 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:58:40.054 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:58:40.057 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-22 15:58:40.069 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:58:40.070 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:40.072 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-22 15:58:40.079 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-22 15:58:40.131 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:58:40.132 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 15:58:40.134 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM refresh_token
WHERE id = @p0;
2022-09-22 15:58:40.137 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM refresh_token
WHERE id = @p0;
2022-09-22 15:58:40.141 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:58:40.149 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:58:40.151 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 15:58:40.152 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING id;
2022-09-22 15:58:40.162 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING id;
2022-09-22 15:58:40.174 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 15:58:40.181 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:58:40.183 +01:00 [DBG] Committing transaction.
2022-09-22 15:58:40.187 +01:00 [DBG] Committed transaction.
2022-09-22 15:58:40.188 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:40.189 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:58:40.192 +01:00 [DBG] Disposing transaction.
2022-09-22 15:58:40.196 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:58:40.202 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:58:40.205 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-22 15:58:40.206 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:58:40.209 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:58:40.211 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-22 15:58:40.212 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-22 15:58:40.213 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-22 15:58:40.214 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:58:40.215 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:40.216 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-22 15:58:40.216 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-22 15:58:40.225 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-22 15:58:40.229 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:58:40.230 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 15:58:40.231 +01:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-22 15:58:40.234 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p19='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime), @p17='?', @p18='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE refresh_token SET created = @p0, created_by_ip = @p1, expires = @p2, is_active = @p3, is_expired = @p4, is_revoked = @p5, reason_revoked = @p6, token = @p7, replaced_by_token = @p8, revoked = @p9, revoked_by_ip = @p10, user_id = @p11
WHERE id = @p12;
UPDATE users SET created_at = @p13, email = @p14, full_name = @p15, password_changed_at = @p16, password_hash = @p17, username = @p18
WHERE id = @p19;
2022-09-22 15:58:40.236 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:58:40.238 +01:00 [DBG] Committing transaction.
2022-09-22 15:58:40.239 +01:00 [DBG] Committed transaction.
2022-09-22 15:58:40.239 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:40.240 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:58:40.241 +01:00 [DBG] Disposing transaction.
2022-09-22 15:58:40.242 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:58:40.245 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:58:40.247 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-22 15:58:40.252 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 15:58:40.256 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 15:58:40.257 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 15:58:40.259 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 15:58:40.259 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 15:58:40.262 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 15:58:40.263 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-22 15:58:40.275 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 2446.7612ms
2022-09-22 15:58:40.277 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 15:58:40.280 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 15:58:40.283 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58 - 200 - application/json;+charset=utf-8 2795.9622ms
2022-09-22 15:58:57.433 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-22 15:58:57.438 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-22 15:58:57.441 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-22 15:58:57.443 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 15:58:57.443 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 15:58:57.501 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 15:58:57.512 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-22 15:58:57.517 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(1) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-22 15:58:57.520 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:58:57.521 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 15:58:57.521 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:58:57.522 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:57.523 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 15:58:57.525 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 15:58:57.527 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:58:57.529 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:58:57.529 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:57.531 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:58:57.532 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 15:58:57.535 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-22 15:58:57.537 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 15:58:57.538 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 15:58:57.539 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 15:58:57.540 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 15:58:57.541 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 15:58:57.543 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 15:58:57.544 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 15:58:57.549 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(u => u.UserId == __userId_0)
    .Select(u => new AccountRequestResponse{ 
        Balance = u.Balance, 
        CreatedAt = u.CreatedAt, 
        Currency = u.Currency, 
        Id = u.Id 
    }
    )'
2022-09-22 15:58:57.553 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AccountRequestResponse>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Balance -> 0
            CreatedAt -> 1
            Currency -> 2
            Id -> 3
        SELECT a.balance AS Balance, a.created_at AS CreatedAt, a.currency AS Currency, a.id AS Id
        FROM accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountRequestResponse>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-22 15:58:57.555 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:58:57.555 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 15:58:57.556 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:58:57.557 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:57.558 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-22 15:58:57.562 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-22 15:58:57.573 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:58:57.574 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:58:57.575 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:58:57.576 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 15:58:57.579 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 15:58:57.582 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 15:58:57.583 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 15:58:57.583 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 15:58:57.584 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 15:58:57.585 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-22 15:58:57.591 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 48.599ms
2022-09-22 15:58:57.592 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 15:58:57.594 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 15:58:57.597 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 163.7350ms
2022-09-22 15:59:06.527 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Users/refreshToken - 0
2022-09-22 15:59:06.531 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/refreshToken'
2022-09-22 15:59:06.534 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)' with route pattern 'api/Users/refreshToken' is valid for the request path '/api/Users/refreshToken'
2022-09-22 15:59:06.536 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-22 15:59:06.538 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 15:59:06.585 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 15:59:06.592 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:59:06.594 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 15:59:06.594 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:59:06.595 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:06.596 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 15:59:06.598 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 15:59:06.600 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:59:06.601 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:59:06.601 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:06.603 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:59:06.605 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-22 15:59:06.607 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RefreshToken() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-22 15:59:06.609 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 15:59:06.610 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 15:59:06.611 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 15:59:06.613 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 15:59:06.614 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 15:59:06.615 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 15:59:06.615 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 15:59:06.620 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(userQuery => userQuery.RefreshTokenCollection
        .Any(refTokenQuery => refTokenQuery.RefToken == __refToken_0))'
2022-09-22 15:59:06.626 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE EXISTS (
            SELECT 1
            FROM refresh_token AS r
            WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__refToken_0))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-22 15:59:06.628 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:59:06.629 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 15:59:06.630 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:59:06.631 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:06.632 +01:00 [DBG] Executing DbCommand [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-22 15:59:06.635 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-22 15:59:06.636 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:59:06.638 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:06.639 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:59:06.642 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:59:06.643 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 15:59:06.644 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:59:06.644 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:06.645 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 15:59:06.648 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 15:59:06.651 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:59:06.651 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:06.652 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:59:06.656 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:59:06.657 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 15:59:06.658 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:59:06.659 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:06.659 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 15:59:06.661 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 15:59:06.663 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:59:06.665 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:06.666 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:59:06.667 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:59:06.668 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 15:59:06.668 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:59:06.669 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:06.671 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 15:59:06.674 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 15:59:06.676 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:59:06.676 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:06.677 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:59:06.678 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:59:06.679 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-22 15:59:06.681 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-22 15:59:06.682 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:59:06.683 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:59:06.684 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:59:06.686 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-22 15:59:06.687 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:59:06.689 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:06.690 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-22 15:59:06.691 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-22 15:59:06.692 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-22 15:59:06.693 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:59:06.694 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 15:59:06.695 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-22 15:59:06.698 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-22 15:59:06.701 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 15:59:06.702 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:59:06.703 +01:00 [DBG] Committing transaction.
2022-09-22 15:59:06.705 +01:00 [DBG] Committed transaction.
2022-09-22 15:59:06.706 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:06.707 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:59:06.708 +01:00 [DBG] Disposing transaction.
2022-09-22 15:59:06.710 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:59:06.712 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:59:06.714 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-22 15:59:06.716 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 15:59:06.718 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 15:59:06.719 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 15:59:06.720 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 15:59:06.722 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 15:59:06.723 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 15:59:06.725 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-22 15:59:06.726 +01:00 [INF] Executed action APIBank.Controllers.UsersController.RefreshToken (APIBank) in 111.7107ms
2022-09-22 15:59:06.728 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-22 15:59:06.729 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 15:59:06.730 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Users/refreshToken - 0 - 200 - application/json;+charset=utf-8 203.1343ms
2022-09-22 15:59:20.922 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-22 15:59:20.925 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-22 15:59:20.927 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-22 15:59:20.931 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 15:59:20.932 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 15:59:20.937 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 15:59:20.940 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:59:20.941 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 15:59:20.943 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:59:20.944 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:20.947 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 15:59:20.949 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 15:59:20.951 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 15:59:20.952 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:59:20.952 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:20.953 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:59:20.954 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 15:59:20.955 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-22 15:59:20.956 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 15:59:20.957 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 15:59:20.958 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 15:59:20.963 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 15:59:20.964 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 15:59:20.965 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 15:59:20.966 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 15:59:20.968 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 15:59:20.968 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 15:59:20.969 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 15:59:20.970 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:20.971 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-22 15:59:20.972 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-22 15:59:20.974 +01:00 [DBG] A data reader was disposed.
2022-09-22 15:59:20.975 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 15:59:20.977 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 15:59:20.980 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 15:59:20.981 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 15:59:20.982 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 15:59:20.983 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 15:59:20.983 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 15:59:20.984 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 15:59:20.985 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-22 15:59:20.986 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 20.5643ms
2022-09-22 15:59:20.987 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 15:59:20.988 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 15:59:20.989 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 67.0515ms
2022-09-22 16:01:32.657 +01:00 [DBG] Connection id "0HMKSLBJC9C08" is closing.
2022-09-22 16:01:32.660 +01:00 [DBG] Connection id "0HMKSLBJC9C08" is closed. The last processed stream ID was 15.
2022-09-22 16:01:32.667 +01:00 [DBG] Connection id "0HMKSLBJC9C08" received FIN.
2022-09-22 16:01:32.668 +01:00 [DBG] Connection id "0HMKSLBJC9C08" sending FIN because: "The client closed the connection."
2022-09-22 16:01:32.673 +01:00 [DBG] Connection id "0HMKSLBJC9C08" stopped.
2022-09-22 16:25:47.672 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-09-22 16:25:47.736 +01:00 [DBG] Hosting starting
2022-09-22 16:25:47.813 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9CC642E9838495A6C3C202DECA6A8AD300396DD2)
2022-09-22 16:25:47.859 +01:00 [INF] Now listening on: https://localhost:7036
2022-09-22 16:25:47.864 +01:00 [INF] Now listening on: http://localhost:5036
2022-09-22 16:25:47.866 +01:00 [DBG] Loaded hosting startup assembly APIBank
2022-09-22 16:25:47.866 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-09-22 16:25:47.867 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-09-22 16:25:47.867 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-22 16:25:47.868 +01:00 [INF] Hosting environment: Development
2022-09-22 16:25:47.869 +01:00 [INF] Content root path: C:\Users\mguedesa\OneDrive - NTT DATA EMEAL\Documentos\GitHub\OpenBankAPI-NTT\APIBank\APIBank\
2022-09-22 16:25:47.869 +01:00 [DBG] Hosting started
2022-09-22 16:25:48.342 +01:00 [DBG] Connection id "0HMKSLQSUANDE" accepted.
2022-09-22 16:25:48.342 +01:00 [DBG] Connection id "0HMKSLQSUANDF" accepted.
2022-09-22 16:25:48.345 +01:00 [DBG] Connection id "0HMKSLQSUANDE" started.
2022-09-22 16:25:48.345 +01:00 [DBG] Connection id "0HMKSLQSUANDF" started.
2022-09-22 16:25:48.361 +01:00 [DBG] Connection id "0HMKSLQSUANDF" received FIN.
2022-09-22 16:25:48.361 +01:00 [DBG] Connection id "0HMKSLQSUANDE" received FIN.
2022-09-22 16:25:48.371 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-22 16:25:48.371 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-22 16:25:48.396 +01:00 [DBG] Connection id "0HMKSLQSUANDE" stopped.
2022-09-22 16:25:48.396 +01:00 [DBG] Connection id "0HMKSLQSUANDF" stopped.
2022-09-22 16:25:48.397 +01:00 [DBG] Connection id "0HMKSLQSUANDE" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 16:25:48.397 +01:00 [DBG] Connection id "0HMKSLQSUANDF" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 16:25:48.555 +01:00 [DBG] Connection id "0HMKSLQSUANDG" accepted.
2022-09-22 16:25:48.560 +01:00 [DBG] Connection id "0HMKSLQSUANDG" started.
2022-09-22 16:25:48.602 +01:00 [DBG] Connection 0HMKSLQSUANDG established using the following protocol: "Tls12"
2022-09-22 16:25:48.650 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/index.html - -
2022-09-22 16:25:48.681 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-09-22 16:25:48.707 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-09-22 16:25:48.709 +01:00 [DBG] Request did not match any endpoints
2022-09-22 16:25:48.840 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-09-22 16:25:48.952 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-09-22 16:25:48.957 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/index.html - - - 200 - text/html;charset=utf-8 310.8328ms
2022-09-22 16:25:48.984 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_vs/browserLink - -
2022-09-22 16:25:48.984 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - -
2022-09-22 16:25:48.990 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 5.0481ms
2022-09-22 16:25:49.063 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 78.4328ms
2022-09-22 16:25:49.268 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - -
2022-09-22 16:25:49.270 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-09-22 16:25:49.271 +01:00 [DBG] Request did not match any endpoints
2022-09-22 16:25:49.412 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 143.7637ms
2022-09-22 16:26:05.419 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Users/Login application/json 52
2022-09-22 16:26:05.430 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-22 16:26:05.438 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-22 16:26:05.444 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:26:05.449 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 16:26:05.715 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:26:05.737 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-22 16:26:05.741 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 16:26:05.747 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 16:26:05.748 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 16:26:05.750 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 16:26:05.751 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 16:26:05.754 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:26:05.755 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:26:05.765 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 16:26:05.768 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-22 16:26:05.770 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-22 16:26:05.773 +01:00 [DBG] Connection id "0HMKSLQSUANDG", Request id "0HMKSLQSUANDG:00000009": started reading request body.
2022-09-22 16:26:05.774 +01:00 [DBG] Connection id "0HMKSLQSUANDG", Request id "0HMKSLQSUANDG:00000009": done reading request body.
2022-09-22 16:26:05.783 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-22 16:26:05.784 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:26:05.785 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:26:05.786 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 16:26:05.798 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:26:05.801 +01:00 [DBG] The request has model state errors, returning an error response.
2022-09-22 16:26:05.802 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2022-09-22 16:26:05.804 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 16:26:05.809 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2022-09-22 16:26:05.814 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 16:26:05.816 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-09-22 16:26:05.819 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-09-22 16:26:05.820 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-09-22 16:26:05.834 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 78.0992ms
2022-09-22 16:26:05.835 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:26:05.838 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Users/Login application/json 52 - 400 - application/problem+json;+charset=utf-8 418.9361ms
2022-09-22 16:26:22.883 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Users/Login application/json 55
2022-09-22 16:26:22.888 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-22 16:26:22.890 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-22 16:26:22.892 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:26:22.893 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 16:26:22.907 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:26:22.911 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-22 16:26:22.914 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 16:26:22.916 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 16:26:22.917 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 16:26:22.919 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 16:26:22.921 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 16:26:22.923 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:26:22.925 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:26:22.927 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 16:26:22.930 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-22 16:26:22.932 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-22 16:26:22.933 +01:00 [DBG] Connection id "0HMKSLQSUANDG", Request id "0HMKSLQSUANDG:0000000B": started reading request body.
2022-09-22 16:26:22.934 +01:00 [DBG] Connection id "0HMKSLQSUANDG", Request id "0HMKSLQSUANDG:0000000B": done reading request body.
2022-09-22 16:26:22.936 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-22 16:26:22.937 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:26:22.938 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:26:22.939 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 16:26:22.941 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:26:22.954 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 31.6044ms
2022-09-22 16:26:22.956 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:26:22.957 +01:00 [INF] Global Error was found:
2022-09-22 16:26:22.961 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Users/Login application/json 55 - 500 - application/json 77.8186ms
2022-09-22 16:26:41.768 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58
2022-09-22 16:26:41.771 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-22 16:26:41.773 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-22 16:26:41.776 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:26:41.778 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 16:26:41.783 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:26:41.785 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-22 16:26:41.789 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 16:26:41.790 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 16:26:41.791 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 16:26:41.794 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 16:26:41.797 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 16:26:41.798 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:26:41.799 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:26:41.800 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 16:26:41.801 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-22 16:26:41.805 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-22 16:26:41.806 +01:00 [DBG] Connection id "0HMKSLQSUANDG", Request id "0HMKSLQSUANDG:0000000D": started reading request body.
2022-09-22 16:26:41.806 +01:00 [DBG] Connection id "0HMKSLQSUANDG", Request id "0HMKSLQSUANDG:0000000D": done reading request body.
2022-09-22 16:26:41.807 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-22 16:26:41.808 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:26:41.811 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:26:41.813 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 16:26:41.814 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:26:41.816 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 17.3547ms
2022-09-22 16:26:41.817 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:26:41.818 +01:00 [INF] Global Error was found:
2022-09-22 16:26:41.819 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58 - 500 - application/json 50.9590ms
2022-09-22 16:28:52.393 +01:00 [DBG] Connection id "0HMKSLQSUANDG" is closing.
2022-09-22 16:28:52.401 +01:00 [DBG] Connection id "0HMKSLQSUANDG" is closed. The last processed stream ID was 13.
2022-09-22 16:28:52.406 +01:00 [DBG] Connection id "0HMKSLQSUANDG" received FIN.
2022-09-22 16:28:52.407 +01:00 [DBG] Connection id "0HMKSLQSUANDG" stopped.
2022-09-22 16:28:52.410 +01:00 [DBG] Connection id "0HMKSLQSUANDG" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 16:39:20.283 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-09-22 16:39:20.362 +01:00 [DBG] Hosting starting
2022-09-22 16:39:20.451 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 9CC642E9838495A6C3C202DECA6A8AD300396DD2)
2022-09-22 16:39:20.501 +01:00 [INF] Now listening on: https://localhost:7036
2022-09-22 16:39:20.503 +01:00 [INF] Now listening on: http://localhost:5036
2022-09-22 16:39:20.505 +01:00 [DBG] Loaded hosting startup assembly APIBank
2022-09-22 16:39:20.505 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-09-22 16:39:20.508 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-09-22 16:39:20.510 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-22 16:39:20.511 +01:00 [INF] Hosting environment: Development
2022-09-22 16:39:20.511 +01:00 [INF] Content root path: C:\Users\mguedesa\OneDrive - NTT DATA EMEAL\Documentos\GitHub\OpenBankAPI-NTT\APIBank\APIBank\
2022-09-22 16:39:20.512 +01:00 [DBG] Hosting started
2022-09-22 16:39:20.812 +01:00 [DBG] Connection id "0HMKSM2F2LEVM" received FIN.
2022-09-22 16:39:20.823 +01:00 [DBG] Connection id "0HMKSM2F2LEVM" accepted.
2022-09-22 16:39:20.825 +01:00 [DBG] Connection id "0HMKSM2F2LEVM" started.
2022-09-22 16:39:20.848 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-09-22 16:39:20.875 +01:00 [DBG] Connection id "0HMKSM2F2LEVM" stopped.
2022-09-22 16:39:20.878 +01:00 [DBG] Connection id "0HMKSM2F2LEVM" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-09-22 16:39:20.952 +01:00 [DBG] Connection id "0HMKSM2F2LEVN" accepted.
2022-09-22 16:39:20.954 +01:00 [DBG] Connection id "0HMKSM2F2LEVN" started.
2022-09-22 16:39:20.996 +01:00 [DBG] Connection 0HMKSM2F2LEVN established using the following protocol: "Tls12"
2022-09-22 16:39:21.054 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/index.html - -
2022-09-22 16:39:21.092 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-09-22 16:39:21.128 +01:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-09-22 16:39:21.129 +01:00 [DBG] Request did not match any endpoints
2022-09-22 16:39:21.236 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-09-22 16:39:21.358 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-09-22 16:39:21.365 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/index.html - - - 200 - text/html;charset=utf-8 313.9154ms
2022-09-22 16:39:21.398 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - -
2022-09-22 16:39:21.403 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/_vs/browserLink - -
2022-09-22 16:39:21.404 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 6.1740ms
2022-09-22 16:39:21.438 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 34.8516ms
2022-09-22 16:39:21.664 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - -
2022-09-22 16:39:21.667 +01:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-09-22 16:39:21.669 +01:00 [DBG] Request did not match any endpoints
2022-09-22 16:39:21.834 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 170.3651ms
2022-09-22 16:39:27.074 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Users/Login application/json 54
2022-09-22 16:39:27.082 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-22 16:39:27.091 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-22 16:39:27.093 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:39:27.096 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 16:39:27.348 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:39:27.368 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-22 16:39:27.376 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 16:39:27.377 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 16:39:27.379 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 16:39:27.381 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 16:39:27.382 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 16:39:27.384 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:39:27.386 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:39:27.398 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 16:39:27.401 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-22 16:39:27.403 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-22 16:39:27.411 +01:00 [DBG] Connection id "0HMKSM2F2LEVN", Request id "0HMKSM2F2LEVN:00000009": started reading request body.
2022-09-22 16:39:27.412 +01:00 [DBG] Connection id "0HMKSM2F2LEVN", Request id "0HMKSM2F2LEVN:00000009": done reading request body.
2022-09-22 16:39:27.417 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-22 16:39:27.418 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:39:27.420 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:39:27.423 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 16:39:27.430 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:39:27.476 +01:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'.
2022-09-22 16:39:28.362 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 16:39:28.401 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(x => x.Username == __model_Username_0)'
2022-09-22 16:39:28.643 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.username == @__model_Username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-22 16:39:28.684 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:39:28.726 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (39ms).
2022-09-22 16:39:28.732 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:39:28.939 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:39:28.956 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 16:39:29.051 +01:00 [INF] Executed DbCommand (102ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 16:39:29.064 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:39:29.067 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:39:29.073 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:39:29.079 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 1692.2024ms
2022-09-22 16:39:29.080 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:39:29.081 +01:00 [INF] Global Error was found:
2022-09-22 16:39:29.086 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 16:39:29.090 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Users/Login application/json 54 - 400 - application/json 2016.5881ms
2022-09-22 16:39:36.757 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Users/Login application/json 56
2022-09-22 16:39:36.761 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-22 16:39:36.763 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-22 16:39:36.765 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:39:36.767 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 16:39:36.778 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:39:36.782 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-22 16:39:36.784 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 16:39:36.786 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 16:39:36.787 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 16:39:36.789 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 16:39:36.790 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 16:39:36.791 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:39:36.792 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:39:36.793 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 16:39:36.794 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-22 16:39:36.795 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-22 16:39:36.797 +01:00 [DBG] Connection id "0HMKSM2F2LEVN", Request id "0HMKSM2F2LEVN:0000000B": started reading request body.
2022-09-22 16:39:36.799 +01:00 [DBG] Connection id "0HMKSM2F2LEVN", Request id "0HMKSM2F2LEVN:0000000B": done reading request body.
2022-09-22 16:39:36.800 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-22 16:39:36.801 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:39:36.802 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:39:36.803 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 16:39:36.803 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:39:36.806 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 16:39:36.811 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:39:36.812 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 16:39:36.814 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:39:36.815 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:39:36.816 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 16:39:36.819 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 16:39:36.853 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:39:36.896 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:39:36.899 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:39:36.902 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:39:37.114 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 323.8287ms
2022-09-22 16:39:37.117 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:39:37.119 +01:00 [INF] Global Error was found:
2022-09-22 16:39:37.121 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 16:39:37.123 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Users/Login application/json 56 - 400 - application/json 366.5983ms
2022-09-22 16:39:48.688 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58
2022-09-22 16:39:48.691 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Login'
2022-09-22 16:39:48.692 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.Login (APIBank)' with route pattern 'api/Users/Login' is valid for the request path '/api/Users/Login'
2022-09-22 16:39:48.695 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:39:48.696 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 16:39:48.699 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:39:48.703 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(APIBank.Models.Requests.UserLoginRequest) on controller APIBank.Controllers.UsersController (APIBank).
2022-09-22 16:39:48.707 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 16:39:48.708 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 16:39:48.709 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 16:39:48.710 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 16:39:48.711 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 16:39:48.712 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:39:48.713 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:39:48.714 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 16:39:48.715 +01:00 [DBG] Attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' using the name '' in request data ...
2022-09-22 16:39:48.716 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-09-22 16:39:48.717 +01:00 [DBG] Connection id "0HMKSM2F2LEVN", Request id "0HMKSM2F2LEVN:0000000D": started reading request body.
2022-09-22 16:39:48.718 +01:00 [DBG] Connection id "0HMKSM2F2LEVN", Request id "0HMKSM2F2LEVN:0000000D": done reading request body.
2022-09-22 16:39:48.721 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'APIBank.Models.Requests.UserLoginRequest'
2022-09-22 16:39:48.721 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:39:48.723 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:39:48.725 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest' ...
2022-09-22 16:39:48.726 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'APIBank.Models.Requests.UserLoginRequest'.
2022-09-22 16:39:48.781 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 16:39:48.789 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:39:48.791 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-09-22 16:39:48.792 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:39:48.792 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:39:48.793 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 16:39:48.795 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.username = @__model_Username_0
LIMIT 2
2022-09-22 16:39:48.798 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:39:48.800 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:39:48.800 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:39:48.802 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:39:48.982 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(user => user.RefreshTokenCollection
        .Any(reftoken => reftoken.RefToken == __token_0))'
2022-09-22 16:39:49.057 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM users AS u
            WHERE EXISTS (
                SELECT 1
                FROM refresh_token AS r
                WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__token_0)))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .Single()'
2022-09-22 16:39:49.072 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:39:49.074 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 16:39:49.076 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:39:49.078 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:39:49.079 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 16:39:49.082 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 16:39:49.085 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:39:49.087 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:39:49.089 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:39:49.245 +01:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(rt => rt.UserId == __id_0)
    .AsNoTracking()
    .Select(rt => new RefreshToken{ 
        Id = rt.Id, 
        UserId = rt.UserId, 
        RefToken = rt.RefToken, 
        Expires = rt.Expires, 
        Created = rt.Created, 
        CreatedByIp = rt.CreatedByIp, 
        Revoked = rt.Revoked, 
        RevokedByIp = rt.RevokedByIp, 
        ReplacedByToken = rt.ReplacedByToken, 
        ReasonRevoked = rt.ReasonRevoked, 
        IsExpired = rt.IsExpired, 
        IsRevoked = rt.IsRevoked, 
        IsActive = rt.IsActive 
    }
    )'
2022-09-22 16:39:49.274 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Id -> 0
            UserId -> 1
            RefToken -> 2
            Expires -> 3
            Created -> 4
            CreatedByIp -> 5
            Revoked -> 6
            RevokedByIp -> 7
            ReplacedByToken -> 8
            ReasonRevoked -> 9
            IsExpired -> 10
            IsRevoked -> 11
            IsActive -> 12
        SELECT r.id AS Id, r.user_id AS UserId, r.token AS RefToken, r.expires AS Expires, r.created AS Created, r.created_by_ip AS CreatedByIp, r.revoked AS Revoked, r.revoked_by_ip AS RevokedByIp, r.replaced_by_token AS ReplacedByToken, r.reason_revoked AS ReasonRevoked, r.is_expired AS IsExpired, r.is_revoked AS IsRevoked, r.is_active AS IsActive
        FROM refresh_token AS r
        WHERE r.user_id == @__id_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-22 16:39:49.277 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:39:49.277 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 16:39:49.278 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:39:49.280 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:39:49.281 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 16:39:49.284 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 16:39:49.289 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:39:49.289 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:39:49.290 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:39:49.301 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:39:49.326 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:39:49.366 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:39:49.373 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-22 16:39:49.378 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-22 16:39:49.408 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:39:49.423 +01:00 [DBG] The foreign key property 'RefreshToken.UserId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 16:39:49.446 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-22 16:39:49.458 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:39:49.459 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:39:49.462 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-22 16:39:49.470 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-22 16:39:49.539 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-22 16:39:49.556 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:39:49.557 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 16:39:49.559 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-22 16:39:49.572 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-22 16:39:49.583 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 16:39:49.589 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:39:49.591 +01:00 [DBG] Committing transaction.
2022-09-22 16:39:49.596 +01:00 [DBG] Committed transaction.
2022-09-22 16:39:49.597 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:39:49.598 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:39:49.599 +01:00 [DBG] Disposing transaction.
2022-09-22 16:39:49.604 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:39:49.607 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:39:49.610 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-22 16:39:49.614 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 16:39:49.618 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 16:39:49.620 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 16:39:49.622 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 16:39:49.623 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 16:39:49.624 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 16:39:49.626 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-22 16:39:49.632 +01:00 [INF] Executed action APIBank.Controllers.UsersController.Login (APIBank) in 920.161ms
2022-09-22 16:39:49.633 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.Login (APIBank)'
2022-09-22 16:39:49.634 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 16:39:49.636 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Users/Login application/json 58 - 200 - application/json;+charset=utf-8 947.1286ms
2022-09-22 16:40:14.376 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7036/api/Accounts/GetAll - -
2022-09-22 16:40:14.380 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/GetAll'
2022-09-22 16:40:14.382 +01:00 [DBG] Endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)' with route pattern 'api/Accounts/GetAll' is valid for the request path '/api/Accounts/GetAll'
2022-09-22 16:40:14.385 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 16:40:14.389 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 16:40:14.475 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 16:40:14.487 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2022-09-22 16:40:14.494 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(1) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE u.id == @__p_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-22 16:40:14.496 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:40:14.498 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 16:40:14.499 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:40:14.500 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:40:14.501 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 16:40:14.503 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 16:40:14.505 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:40:14.507 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:40:14.507 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:40:14.508 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:40:14.509 +01:00 [INF] Executing endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 16:40:14.511 +01:00 [INF] Route matched with {action = "GetAllFromUser", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllFromUser() on controller APIBank.Controllers.AccountsController (APIBank).
2022-09-22 16:40:14.513 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 16:40:14.515 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 16:40:14.517 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 16:40:14.519 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 16:40:14.520 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 16:40:14.521 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 16:40:14.523 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.AccountsController (APIBank)
2022-09-22 16:40:14.527 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(u => u.UserId == __userId_0)
    .Select(u => new AccountRequestResponse{ 
        Balance = u.Balance, 
        CreatedAt = u.CreatedAt, 
        Currency = u.Currency, 
        Id = u.Id 
    }
    )'
2022-09-22 16:40:14.533 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AccountRequestResponse>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            Balance -> 0
            CreatedAt -> 1
            Currency -> 2
            Id -> 3
        SELECT a.balance AS Balance, a.created_at AS CreatedAt, a.currency AS Currency, a.id AS Id
        FROM accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountRequestResponse>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)'
2022-09-22 16:40:14.535 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:40:14.536 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 16:40:14.536 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:40:14.537 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:40:14.539 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-22 16:40:14.542 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.balance AS "Balance", a.created_at AS "CreatedAt", a.currency AS "Currency", a.id AS "Id"
FROM accounts AS a
WHERE a.user_id = @__userId_0
2022-09-22 16:40:14.552 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:40:14.552 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:40:14.555 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:40:14.556 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 16:40:14.558 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 16:40:14.558 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 16:40:14.559 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 16:40:14.560 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 16:40:14.560 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 16:40:14.561 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[APIBank.Models.Responses.AccountRequestResponse, APIBank, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-22 16:40:14.570 +01:00 [INF] Executed action APIBank.Controllers.AccountsController.GetAllFromUser (APIBank) in 49.1157ms
2022-09-22 16:40:14.571 +01:00 [INF] Executed endpoint 'APIBank.Controllers.AccountsController.GetAllFromUser (APIBank)'
2022-09-22 16:40:14.573 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 16:40:14.574 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7036/api/Accounts/GetAll - - - 200 - application/json;+charset=utf-8 197.8445ms
2022-09-22 16:42:26.757 +01:00 [DBG] Connection id "0HMKSM2F2LEVN" is closing.
2022-09-22 16:42:26.761 +01:00 [DBG] Connection id "0HMKSM2F2LEVN" is closed. The last processed stream ID was 15.
2022-09-22 16:42:26.763 +01:00 [DBG] Connection id "0HMKSM2F2LEVN" received FIN.
2022-09-22 16:42:26.764 +01:00 [DBG] Connection id "0HMKSM2F2LEVN" sending FIN because: "The client closed the connection."
2022-09-22 16:42:26.773 +01:00 [DBG] Connection id "0HMKSM2F2LEVN" stopped.
2022-09-22 16:43:02.687 +01:00 [DBG] Connection id "0HMKSM2F2LEVO" accepted.
2022-09-22 16:43:02.690 +01:00 [DBG] Connection id "0HMKSM2F2LEVO" started.
2022-09-22 16:43:02.696 +01:00 [DBG] Connection 0HMKSM2F2LEVO established using the following protocol: "Tls12"
2022-09-22 16:43:02.704 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7036/api/Users/refreshToken - 0
2022-09-22 16:43:02.705 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/refreshToken'
2022-09-22 16:43:02.707 +01:00 [DBG] Endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)' with route pattern 'api/Users/refreshToken' is valid for the request path '/api/Users/refreshToken'
2022-09-22 16:43:02.710 +01:00 [DBG] Request matched endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-22 16:43:02.711 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-09-22 16:43:02.714 +01:00 [INF] Entity Framework Core 6.0.9 initialized 'PostgresContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-09-22 16:43:02.721 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:43:02.722 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 16:43:02.724 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:43:02.726 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:43:02.726 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 16:43:02.729 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2022-09-22 16:43:02.730 +01:00 [DBG] Context 'PostgresContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:43:02.732 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:43:02.734 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:43:02.735 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:43:02.739 +01:00 [INF] Executing endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-22 16:43:02.741 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult RefreshToken() on controller APIBank.Controllers.UsersController (APIBank).
2022-09-22 16:43:02.743 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["APIBank.Authorization.AuthorizeAttribute"]
2022-09-22 16:43:02.744 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-09-22 16:43:02.745 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-09-22 16:43:02.746 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-09-22 16:43:02.747 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-09-22 16:43:02.748 +01:00 [DBG] Executing controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:43:02.750 +01:00 [DBG] Executed controller factory for controller APIBank.Controllers.UsersController (APIBank)
2022-09-22 16:43:02.756 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(userQuery => userQuery.RefreshTokenCollection
        .Any(refTokenQuery => refTokenQuery.RefToken == __refToken_0))'
2022-09-22 16:43:02.761 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(254), 2], [Property: User.FullName (string) Required MaxLength(100), 3], [Property: User.PasswordChangedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: User.PasswordHash (string) Required MaxLength(200), 5], [Property: User.Username (string) Required Index MaxLength(50), 6] }
        SELECT TOP(2) u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
        FROM users AS u
        WHERE EXISTS (
            SELECT 1
            FROM refresh_token AS r
            WHERE ((u.id != NULL) && (u.id == r.user_id)) && (r.token == @__refToken_0))), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    APIBank.Helpers.PostgresContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-09-22 16:43:02.762 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:43:02.763 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 16:43:02.764 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:43:02.764 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:43:02.767 +01:00 [DBG] Executing DbCommand [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-22 16:43:02.772 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.email, u.full_name, u.password_changed_at, u.password_hash, u.username
FROM users AS u
WHERE EXISTS (
    SELECT 1
    FROM refresh_token AS r
    WHERE (u.id = r.user_id) AND (r.token = @__refToken_0))
LIMIT 2
2022-09-22 16:43:02.774 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:43:02.774 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:43:02.775 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:43:02.777 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:43:02.778 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 16:43:02.778 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:43:02.779 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:43:02.780 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 16:43:02.785 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 16:43:02.788 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:43:02.788 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:43:02.789 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:43:02.791 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:43:02.791 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 16:43:02.792 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:43:02.793 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:43:02.793 +01:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 16:43:02.795 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__token_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE EXISTS (
        SELECT 1
        FROM refresh_token AS r
        WHERE (u.id = r.user_id) AND (r.token = @__token_0)))
2022-09-22 16:43:02.797 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:43:02.797 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:43:02.798 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:43:02.801 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:43:02.802 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-09-22 16:43:02.804 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:43:02.805 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:43:02.806 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 16:43:02.808 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id AS "Id", r.user_id AS "UserId", r.token AS "RefToken", r.expires AS "Expires", r.created AS "Created", r.created_by_ip AS "CreatedByIp", r.revoked AS "Revoked", r.revoked_by_ip AS "RevokedByIp", r.replaced_by_token AS "ReplacedByToken", r.reason_revoked AS "ReasonRevoked", r.is_expired AS "IsExpired", r.is_revoked AS "IsRevoked", r.is_active AS "IsActive"
FROM refresh_token AS r
WHERE r.user_id = @__id_0
2022-09-22 16:43:02.809 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:43:02.810 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:43:02.811 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:43:02.812 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:43:02.813 +01:00 [DBG] SaveChanges starting for 'PostgresContext'.
2022-09-22 16:43:02.814 +01:00 [DBG] DetectChanges starting for 'PostgresContext'.
2022-09-22 16:43:02.814 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokenCollection'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:43:02.820 +01:00 [DBG] 'PostgresContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:43:02.823 +01:00 [DBG] Context 'PostgresContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:43:02.824 +01:00 [DBG] DetectChanges completed for 'PostgresContext'.
2022-09-22 16:43:02.825 +01:00 [DBG] Opening connection to database 'BankAPI' on server ''.
2022-09-22 16:43:02.826 +01:00 [DBG] Opened connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:43:02.826 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-09-22 16:43:02.827 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-09-22 16:43:02.828 +01:00 [DBG] Executing 2 update commands as a batch.
2022-09-22 16:43:02.829 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-09-22 16:43:02.829 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-09-22 16:43:02.830 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-22 16:43:02.837 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?', @p11='?' (DbType = Int32), @p18='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?', @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_token (created, created_by_ip, expires, is_active, is_expired, is_revoked, reason_revoked, token, replaced_by_token, revoked, revoked_by_ip, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
UPDATE users SET created_at = @p12, email = @p13, full_name = @p14, password_changed_at = @p15, password_hash = @p16, username = @p17
WHERE id = @p18;
2022-09-22 16:43:02.840 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-09-22 16:43:02.841 +01:00 [DBG] A data reader was disposed.
2022-09-22 16:43:02.841 +01:00 [DBG] Committing transaction.
2022-09-22 16:43:02.844 +01:00 [DBG] Committed transaction.
2022-09-22 16:43:02.844 +01:00 [DBG] Closing connection to database 'BankAPI' on server 'tcp://localhost:5433'.
2022-09-22 16:43:02.845 +01:00 [DBG] Closed connection to database 'BankAPI' on server ''.
2022-09-22 16:43:02.846 +01:00 [DBG] Disposing transaction.
2022-09-22 16:43:02.846 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'PostgresContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:43:02.850 +01:00 [DBG] An entity of type 'User' tracked by 'PostgresContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-09-22 16:43:02.853 +01:00 [DBG] SaveChanges completed for 'PostgresContext' with 2 entities written to the database.
2022-09-22 16:43:02.854 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-09-22 16:43:02.856 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-09-22 16:43:02.857 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-09-22 16:43:02.858 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-09-22 16:43:02.858 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-09-22 16:43:02.859 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-09-22 16:43:02.860 +01:00 [INF] Executing OkObjectResult, writing value of type 'APIBank.Models.MyRequestResponses.LoginResponse'.
2022-09-22 16:43:02.861 +01:00 [INF] Executed action APIBank.Controllers.UsersController.RefreshToken (APIBank) in 113.3994ms
2022-09-22 16:43:02.862 +01:00 [INF] Executed endpoint 'APIBank.Controllers.UsersController.RefreshToken (APIBank)'
2022-09-22 16:43:02.863 +01:00 [DBG] 'PostgresContext' disposed.
2022-09-22 16:43:02.864 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7036/api/Users/refreshToken - 0 - 200 - application/json;+charset=utf-8 160.5121ms
2022-09-22 16:45:14.138 +01:00 [DBG] Connection id "0HMKSM2F2LEVO" is closing.
2022-09-22 16:45:14.143 +01:00 [DBG] Connection id "0HMKSM2F2LEVO" is closed. The last processed stream ID was 1.
2022-09-22 16:45:14.145 +01:00 [DBG] Connection id "0HMKSM2F2LEVO" received FIN.
2022-09-22 16:45:14.145 +01:00 [DBG] Connection id "0HMKSM2F2LEVO" stopped.
2022-09-22 16:45:14.146 +01:00 [DBG] Connection id "0HMKSM2F2LEVO" sending FIN because: "The Socket transport's send loop completed gracefully."
